import{r as l,j as s,R as Mr,c as Fc,d as Xe,e as En}from"./index-Cpyx2Kcx.js";function yo(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=yo(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function wo(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=yo(e))&&(r&&(r+=" "),r+=t);return r}const xs=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,vs=wo,Rn=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return vs(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:a}=t,i=Object.keys(o).map(u=>{const m=n==null?void 0:n[u],f=a==null?void 0:a[u];if(m===null)return null;const g=xs(m)||xs(f);return o[u][g]}),c=n&&Object.entries(n).reduce((u,m)=>{let[f,g]=m;return g===void 0||(u[f]=g),u},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,m)=>{let{class:f,className:g,...v}=m;return Object.entries(v).every(x=>{let[h,p]=x;return Array.isArray(p)?p.includes({...a,...c}[h]):{...a,...c}[h]===p})?[...u,f,g]:u},[]);return vs(e,i,d,n==null?void 0:n.class,n==null?void 0:n.className)},Wc=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},Vc=(e,t)=>({classGroupId:e,validator:t}),No=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),hn="-",bs=[],Bc="arbitrary..",zc=e=>{const t=Hc(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return Gc(i);const c=i.split(hn),d=c[0]===""&&c.length>1?1:0;return jo(c,d,t)},getConflictingClassGroupIds:(i,c)=>{if(c){const d=r[i],u=n[i];return d?u?Wc(u,d):d:u||bs}return n[i]||bs}}},jo=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const o=e[t],a=n.nextPart.get(o);if(a){const u=jo(e,t+1,a);if(u)return u}const i=n.validators;if(i===null)return;const c=t===0?e.join(hn):e.slice(t).join(hn),d=i.length;for(let u=0;u<d;u++){const m=i[u];if(m.validator(c))return m.classGroupId}},Gc=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?Bc+r:void 0})(),Hc=e=>{const{theme:t,classGroups:n}=e;return Uc(n,t)},Uc=(e,t)=>{const n=No();for(const r in e){const o=e[r];Lr(o,n,r,t)}return n},Lr=(e,t,n,r)=>{const o=e.length;for(let a=0;a<o;a++){const i=e[a];Kc(i,t,n,r)}},Kc=(e,t,n,r)=>{if(typeof e=="string"){qc(e,t,n);return}if(typeof e=="function"){Yc(e,t,n,r);return}Xc(e,t,n,r)},qc=(e,t,n)=>{const r=e===""?t:So(t,e);r.classGroupId=n},Yc=(e,t,n,r)=>{if(Qc(e)){Lr(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(Vc(n,e))},Xc=(e,t,n,r)=>{const o=Object.entries(e),a=o.length;for(let i=0;i<a;i++){const[c,d]=o[i];Lr(d,So(t,c),n,r)}},So=(e,t)=>{let n=e;const r=t.split(hn),o=r.length;for(let a=0;a<o;a++){const i=r[a];let c=n.nextPart.get(i);c||(c=No(),n.nextPart.set(i,c)),n=c}return n},Qc=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Jc=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const o=(a,i)=>{n[a]=i,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(a){let i=n[a];if(i!==void 0)return i;if((i=r[a])!==void 0)return o(a,i),i},set(a,i){a in n?n[a]=i:o(a,i)}}},pr="!",ys=":",Zc=[],ws=(e,t,n,r,o)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:o}),el=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=o=>{const a=[];let i=0,c=0,d=0,u;const m=o.length;for(let h=0;h<m;h++){const p=o[h];if(i===0&&c===0){if(p===ys){a.push(o.slice(d,h)),d=h+1;continue}if(p==="/"){u=h;continue}}p==="["?i++:p==="]"?i--:p==="("?c++:p===")"&&c--}const f=a.length===0?o:o.slice(d);let g=f,v=!1;f.endsWith(pr)?(g=f.slice(0,-1),v=!0):f.startsWith(pr)&&(g=f.slice(1),v=!0);const x=u&&u>d?u-d:void 0;return ws(a,v,g,x)};if(t){const o=t+ys,a=r;r=i=>i.startsWith(o)?a(i.slice(o.length)):ws(Zc,!1,i,void 0,!0)}if(n){const o=r;r=a=>n({className:a,parseClassName:o})}return r},tl=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let o=[];for(let a=0;a<n.length;a++){const i=n[a],c=i[0]==="[",d=t.has(i);c||d?(o.length>0&&(o.sort(),r.push(...o),o=[]),r.push(i)):o.push(i)}return o.length>0&&(o.sort(),r.push(...o)),r}},nl=e=>({cache:Jc(e.cacheSize),parseClassName:el(e),sortModifiers:tl(e),...zc(e)}),rl=/\s+/,sl=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:a}=t,i=[],c=e.trim().split(rl);let d="";for(let u=c.length-1;u>=0;u-=1){const m=c[u],{isExternal:f,modifiers:g,hasImportantModifier:v,baseClassName:x,maybePostfixModifierPosition:h}=n(m);if(f){d=m+(d.length>0?" "+d:d);continue}let p=!!h,b=r(p?x.substring(0,h):x);if(!b){if(!p){d=m+(d.length>0?" "+d:d);continue}if(b=r(x),!b){d=m+(d.length>0?" "+d:d);continue}p=!1}const y=g.length===0?"":g.length===1?g[0]:a(g).join(":"),w=v?y+pr:y,N=w+b;if(i.indexOf(N)>-1)continue;i.push(N);const S=o(b,p);for(let C=0;C<S.length;++C){const j=S[C];i.push(w+j)}d=m+(d.length>0?" "+d:d)}return d},ol=(...e)=>{let t=0,n,r,o="";for(;t<e.length;)(n=e[t++])&&(r=Co(n))&&(o&&(o+=" "),o+=r);return o},Co=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Co(e[r]))&&(n&&(n+=" "),n+=t);return n},al=(e,...t)=>{let n,r,o,a;const i=d=>{const u=t.reduce((m,f)=>f(m),e());return n=nl(u),r=n.cache.get,o=n.cache.set,a=c,c(d)},c=d=>{const u=r(d);if(u)return u;const m=sl(d,n);return o(d,m),m};return a=i,(...d)=>a(ol(...d))},il=[],de=e=>{const t=n=>n[e]||il;return t.isThemeGetter=!0,t},ko=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Eo=/^\((?:(\w[\w-]*):)?(.+)\)$/i,cl=/^\d+\/\d+$/,ll=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dl=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ul=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,fl=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ml=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ct=e=>cl.test(e),ne=e=>!!e&&!Number.isNaN(Number(e)),Le=e=>!!e&&Number.isInteger(Number(e)),qn=e=>e.endsWith("%")&&ne(e.slice(0,-1)),Ie=e=>ll.test(e),hl=()=>!0,pl=e=>dl.test(e)&&!ul.test(e),Ro=()=>!1,gl=e=>fl.test(e),xl=e=>ml.test(e),vl=e=>!K(e)&&!q(e),bl=e=>jt(e,To,Ro),K=e=>ko.test(e),Qe=e=>jt(e,Oo,pl),Yn=e=>jt(e,Sl,ne),Ns=e=>jt(e,Po,Ro),yl=e=>jt(e,Ao,xl),qt=e=>jt(e,Io,gl),q=e=>Eo.test(e),Tt=e=>St(e,Oo),wl=e=>St(e,Cl),js=e=>St(e,Po),Nl=e=>St(e,To),jl=e=>St(e,Ao),Yt=e=>St(e,Io,!0),jt=(e,t,n)=>{const r=ko.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},St=(e,t,n=!1)=>{const r=Eo.exec(e);return r?r[1]?t(r[1]):n:!1},Po=e=>e==="position"||e==="percentage",Ao=e=>e==="image"||e==="url",To=e=>e==="length"||e==="size"||e==="bg-size",Oo=e=>e==="length",Sl=e=>e==="number",Cl=e=>e==="family-name",Io=e=>e==="shadow",kl=()=>{const e=de("color"),t=de("font"),n=de("text"),r=de("font-weight"),o=de("tracking"),a=de("leading"),i=de("breakpoint"),c=de("container"),d=de("spacing"),u=de("radius"),m=de("shadow"),f=de("inset-shadow"),g=de("text-shadow"),v=de("drop-shadow"),x=de("blur"),h=de("perspective"),p=de("aspect"),b=de("ease"),y=de("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...N(),q,K],C=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],R=()=>[q,K,d],D=()=>[ct,"full","auto",...R()],F=()=>[Le,"none","subgrid",q,K],I=()=>["auto",{span:["full",Le,q,K]},Le,q,K],B=()=>[Le,"auto",q,K],z=()=>["auto","min","max","fr",q,K],E=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],O=()=>["start","end","center","stretch","center-safe","end-safe"],T=()=>["auto",...R()],L=()=>[ct,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],A=()=>[e,q,K],G=()=>[...N(),js,Ns,{position:[q,K]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],M=()=>["auto","cover","contain",Nl,bl,{size:[q,K]}],k=()=>[qn,Tt,Qe],W=()=>["","none","full",u,q,K],P=()=>["",ne,Tt,Qe],_=()=>["solid","dashed","dotted","double"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>[ne,qn,js,Ns],Y=()=>["","none",x,q,K],Q=()=>["none",ne,q,K],J=()=>["none",ne,q,K],ee=()=>[ne,q,K],se=()=>[ct,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ie],breakpoint:[Ie],color:[hl],container:[Ie],"drop-shadow":[Ie],ease:["in","out","in-out"],font:[vl],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ie],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ie],shadow:[Ie],spacing:["px",ne],text:[Ie],"text-shadow":[Ie],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ct,K,q,p]}],container:["container"],columns:[{columns:[ne,K,q,c]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[Le,"auto",q,K]}],basis:[{basis:[ct,"full","auto",c,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ne,ct,"auto","initial","none",K]}],grow:[{grow:["",ne,q,K]}],shrink:[{shrink:["",ne,q,K]}],order:[{order:[Le,"first","last","none",q,K]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:I()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:I()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...E(),"normal"]}],"justify-items":[{"justify-items":[...O(),"normal"]}],"justify-self":[{"justify-self":["auto",...O()]}],"align-content":[{content:["normal",...E()]}],"align-items":[{items:[...O(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...O(),{baseline:["","last"]}]}],"place-content":[{"place-content":E()}],"place-items":[{"place-items":[...O(),"baseline"]}],"place-self":[{"place-self":["auto",...O()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:L()}],w:[{w:[c,"screen",...L()]}],"min-w":[{"min-w":[c,"screen","none",...L()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[i]},...L()]}],h:[{h:["screen","lh",...L()]}],"min-h":[{"min-h":["screen","lh","none",...L()]}],"max-h":[{"max-h":["screen","lh",...L()]}],"font-size":[{text:["base",n,Tt,Qe]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,q,Yn]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",qn,K]}],"font-family":[{font:[wl,K,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,q,K]}],"line-clamp":[{"line-clamp":[ne,"none",q,Yn]}],leading:[{leading:[a,...R()]}],"list-image":[{"list-image":["none",q,K]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",q,K]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:A()}],"text-color":[{text:A()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._(),"wavy"]}],"text-decoration-thickness":[{decoration:[ne,"from-font","auto",q,Qe]}],"text-decoration-color":[{decoration:A()}],"underline-offset":[{"underline-offset":[ne,"auto",q,K]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",q,K]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",q,K]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:G()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:M()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Le,q,K],radial:["",q,K],conic:[Le,q,K]},jl,yl]}],"bg-color":[{bg:A()}],"gradient-from-pos":[{from:k()}],"gradient-via-pos":[{via:k()}],"gradient-to-pos":[{to:k()}],"gradient-from":[{from:A()}],"gradient-via":[{via:A()}],"gradient-to":[{to:A()}],rounded:[{rounded:W()}],"rounded-s":[{"rounded-s":W()}],"rounded-e":[{"rounded-e":W()}],"rounded-t":[{"rounded-t":W()}],"rounded-r":[{"rounded-r":W()}],"rounded-b":[{"rounded-b":W()}],"rounded-l":[{"rounded-l":W()}],"rounded-ss":[{"rounded-ss":W()}],"rounded-se":[{"rounded-se":W()}],"rounded-ee":[{"rounded-ee":W()}],"rounded-es":[{"rounded-es":W()}],"rounded-tl":[{"rounded-tl":W()}],"rounded-tr":[{"rounded-tr":W()}],"rounded-br":[{"rounded-br":W()}],"rounded-bl":[{"rounded-bl":W()}],"border-w":[{border:P()}],"border-w-x":[{"border-x":P()}],"border-w-y":[{"border-y":P()}],"border-w-s":[{"border-s":P()}],"border-w-e":[{"border-e":P()}],"border-w-t":[{"border-t":P()}],"border-w-r":[{"border-r":P()}],"border-w-b":[{"border-b":P()}],"border-w-l":[{"border-l":P()}],"divide-x":[{"divide-x":P()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":P()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[..._(),"hidden","none"]}],"divide-style":[{divide:[..._(),"hidden","none"]}],"border-color":[{border:A()}],"border-color-x":[{"border-x":A()}],"border-color-y":[{"border-y":A()}],"border-color-s":[{"border-s":A()}],"border-color-e":[{"border-e":A()}],"border-color-t":[{"border-t":A()}],"border-color-r":[{"border-r":A()}],"border-color-b":[{"border-b":A()}],"border-color-l":[{"border-l":A()}],"divide-color":[{divide:A()}],"outline-style":[{outline:[..._(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ne,q,K]}],"outline-w":[{outline:["",ne,Tt,Qe]}],"outline-color":[{outline:A()}],shadow:[{shadow:["","none",m,Yt,qt]}],"shadow-color":[{shadow:A()}],"inset-shadow":[{"inset-shadow":["none",f,Yt,qt]}],"inset-shadow-color":[{"inset-shadow":A()}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:A()}],"ring-offset-w":[{"ring-offset":[ne,Qe]}],"ring-offset-color":[{"ring-offset":A()}],"inset-ring-w":[{"inset-ring":P()}],"inset-ring-color":[{"inset-ring":A()}],"text-shadow":[{"text-shadow":["none",g,Yt,qt]}],"text-shadow-color":[{"text-shadow":A()}],opacity:[{opacity:[ne,q,K]}],"mix-blend":[{"mix-blend":[...H(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":H()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ne]}],"mask-image-linear-from-pos":[{"mask-linear-from":$()}],"mask-image-linear-to-pos":[{"mask-linear-to":$()}],"mask-image-linear-from-color":[{"mask-linear-from":A()}],"mask-image-linear-to-color":[{"mask-linear-to":A()}],"mask-image-t-from-pos":[{"mask-t-from":$()}],"mask-image-t-to-pos":[{"mask-t-to":$()}],"mask-image-t-from-color":[{"mask-t-from":A()}],"mask-image-t-to-color":[{"mask-t-to":A()}],"mask-image-r-from-pos":[{"mask-r-from":$()}],"mask-image-r-to-pos":[{"mask-r-to":$()}],"mask-image-r-from-color":[{"mask-r-from":A()}],"mask-image-r-to-color":[{"mask-r-to":A()}],"mask-image-b-from-pos":[{"mask-b-from":$()}],"mask-image-b-to-pos":[{"mask-b-to":$()}],"mask-image-b-from-color":[{"mask-b-from":A()}],"mask-image-b-to-color":[{"mask-b-to":A()}],"mask-image-l-from-pos":[{"mask-l-from":$()}],"mask-image-l-to-pos":[{"mask-l-to":$()}],"mask-image-l-from-color":[{"mask-l-from":A()}],"mask-image-l-to-color":[{"mask-l-to":A()}],"mask-image-x-from-pos":[{"mask-x-from":$()}],"mask-image-x-to-pos":[{"mask-x-to":$()}],"mask-image-x-from-color":[{"mask-x-from":A()}],"mask-image-x-to-color":[{"mask-x-to":A()}],"mask-image-y-from-pos":[{"mask-y-from":$()}],"mask-image-y-to-pos":[{"mask-y-to":$()}],"mask-image-y-from-color":[{"mask-y-from":A()}],"mask-image-y-to-color":[{"mask-y-to":A()}],"mask-image-radial":[{"mask-radial":[q,K]}],"mask-image-radial-from-pos":[{"mask-radial-from":$()}],"mask-image-radial-to-pos":[{"mask-radial-to":$()}],"mask-image-radial-from-color":[{"mask-radial-from":A()}],"mask-image-radial-to-color":[{"mask-radial-to":A()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[ne]}],"mask-image-conic-from-pos":[{"mask-conic-from":$()}],"mask-image-conic-to-pos":[{"mask-conic-to":$()}],"mask-image-conic-from-color":[{"mask-conic-from":A()}],"mask-image-conic-to-color":[{"mask-conic-to":A()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:G()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:M()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",q,K]}],filter:[{filter:["","none",q,K]}],blur:[{blur:Y()}],brightness:[{brightness:[ne,q,K]}],contrast:[{contrast:[ne,q,K]}],"drop-shadow":[{"drop-shadow":["","none",v,Yt,qt]}],"drop-shadow-color":[{"drop-shadow":A()}],grayscale:[{grayscale:["",ne,q,K]}],"hue-rotate":[{"hue-rotate":[ne,q,K]}],invert:[{invert:["",ne,q,K]}],saturate:[{saturate:[ne,q,K]}],sepia:[{sepia:["",ne,q,K]}],"backdrop-filter":[{"backdrop-filter":["","none",q,K]}],"backdrop-blur":[{"backdrop-blur":Y()}],"backdrop-brightness":[{"backdrop-brightness":[ne,q,K]}],"backdrop-contrast":[{"backdrop-contrast":[ne,q,K]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ne,q,K]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ne,q,K]}],"backdrop-invert":[{"backdrop-invert":["",ne,q,K]}],"backdrop-opacity":[{"backdrop-opacity":[ne,q,K]}],"backdrop-saturate":[{"backdrop-saturate":[ne,q,K]}],"backdrop-sepia":[{"backdrop-sepia":["",ne,q,K]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",q,K]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ne,"initial",q,K]}],ease:[{ease:["linear","initial",b,q,K]}],delay:[{delay:[ne,q,K]}],animate:[{animate:["none",y,q,K]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[h,q,K]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:Q()}],"rotate-x":[{"rotate-x":Q()}],"rotate-y":[{"rotate-y":Q()}],"rotate-z":[{"rotate-z":Q()}],scale:[{scale:J()}],"scale-x":[{"scale-x":J()}],"scale-y":[{"scale-y":J()}],"scale-z":[{"scale-z":J()}],"scale-3d":["scale-3d"],skew:[{skew:ee()}],"skew-x":[{"skew-x":ee()}],"skew-y":[{"skew-y":ee()}],transform:[{transform:[q,K,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:se()}],"translate-x":[{"translate-x":se()}],"translate-y":[{"translate-y":se()}],"translate-z":[{"translate-z":se()}],"translate-none":["translate-none"],accent:[{accent:A()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:A()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",q,K]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",q,K]}],fill:[{fill:["none",...A()]}],"stroke-w":[{stroke:[ne,Tt,Qe,Yn]}],stroke:[{stroke:["none",...A()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},El=al(kl);function V(...e){return El(wo(e))}const Rl=Rn("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),X=l.forwardRef(({className:e,variant:t,size:n,...r},o)=>s.jsx("button",{className:V(Rl({variant:t,size:n,className:e})),ref:o,...r}));X.displayName="Button";const ue=l.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:V("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ue.displayName="Card";const it=l.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:V("flex flex-col space-y-1.5 p-6",e),...t}));it.displayName="CardHeader";const Pn=l.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:V("text-2xl font-semibold leading-none tracking-tight",e),...t}));Pn.displayName="CardTitle";const Do=l.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:V("text-sm text-muted-foreground",e),...t}));Do.displayName="CardDescription";const xe=l.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:V("p-6 pt-0",e),...t}));xe.displayName="CardContent";const Pl=l.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:V("flex items-center p-6 pt-0",e),...t}));Pl.displayName="CardFooter";const he=l.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:V("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));he.displayName="Input";const Al=Rn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ie=l.forwardRef(({className:e,...t},n)=>s.jsx("label",{ref:n,className:V(Al(),e),...t}));ie.displayName="Label";function Ss(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function We(...e){return t=>{let n=!1;const r=e.map(o=>{const a=Ss(o,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let o=0;o<r.length;o++){const a=r[o];typeof a=="function"?a():Ss(e[o],null)}}}}function ce(...e){return l.useCallback(We(...e),e)}var Tl=Symbol.for("react.lazy"),pn=Mr[" use ".trim().toString()];function Ol(e){return typeof e=="object"&&e!==null&&"then"in e}function Mo(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Tl&&"_payload"in e&&Ol(e._payload)}function Il(e){const t=Dl(e),n=l.forwardRef((r,o)=>{let{children:a,...i}=r;Mo(a)&&typeof pn=="function"&&(a=pn(a._payload));const c=l.Children.toArray(a),d=c.find(Ll);if(d){const u=d.props.children,m=c.map(f=>f===d?l.Children.count(u)>1?l.Children.only(null):l.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...i,ref:o,children:l.isValidElement(u)?l.cloneElement(u,void 0,m):null})}return s.jsx(t,{...i,ref:o,children:a})});return n.displayName=`${e}.Slot`,n}function Dl(e){const t=l.forwardRef((n,r)=>{let{children:o,...a}=n;if(Mo(o)&&typeof pn=="function"&&(o=pn(o._payload)),l.isValidElement(o)){const i=_l(o),c=$l(a,o.props);return o.type!==l.Fragment&&(c.ref=r?We(r,i):i),l.cloneElement(o,c)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ml=Symbol("radix.slottable");function Ll(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ml}function $l(e,t){const n={...t};for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=(...c)=>{const d=a(...c);return o(...c),d}:o&&(n[r]=o):r==="style"?n[r]={...o,...a}:r==="className"&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...e,...n}}function _l(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Fl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Wl=Fl.reduce((e,t)=>{const n=Il(`Primitive.${t}`),r=l.forwardRef((o,a)=>{const{asChild:i,...c}=o,d=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Vl="Separator",Cs="horizontal",Bl=["horizontal","vertical"],Lo=l.forwardRef((e,t)=>{const{decorative:n,orientation:r=Cs,...o}=e,a=zl(r)?r:Cs,c=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(Wl.div,{"data-orientation":a,...c,...o,ref:t})});Lo.displayName=Vl;function zl(e){return Bl.includes(e)}var $o=Lo;const $r=l.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>s.jsx($o,{ref:o,decorative:n,orientation:t,className:V("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));$r.displayName=$o.displayName;const $t=l.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:V("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));$t.displayName="Textarea";const Gl=Rn("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",warning:"border-transparent bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},defaultVariants:{variant:"default"}});function le({className:e,variant:t,...n}){return s.jsx("div",{className:V(Gl({variant:t}),e),...n})}function Hl(e,t){const[n,r]=l.useState([]),[o,a]=l.useState([]),[i,c]=l.useState([]),[d,u]=l.useState([]),[m,f]=l.useState(!1),[g,v]=l.useState(null),x=l.useRef(null),h=l.useCallback(async()=>{var y;if(!t)return;const b=`${t.start}-${t.end}`;if(!(x.current===b&&n.length>0)){f(!0),v(null);try{const N=((y=(await e.queryAuditLogFacets({timeRange:{start:t.start,end:t.end},facets:[{field:"verb",limit:20},{field:"objectRef.resource",limit:50},{field:"objectRef.namespace",limit:50},{field:"user.username",limit:50}]})).status)==null?void 0:y.facets)||[],S=N.find(D=>D.field==="verb");r((S==null?void 0:S.values)||[]);const C=N.find(D=>D.field==="objectRef.resource");a((C==null?void 0:C.values)||[]);const j=N.find(D=>D.field==="objectRef.namespace");c((j==null?void 0:j.values)||[]);const R=N.find(D=>D.field==="user.username");u((R==null?void 0:R.values)||[]),x.current=b}catch(w){v(w instanceof Error?w:new Error(String(w)))}finally{f(!1)}}},[e,t,n.length]);l.useEffect(()=>{h()},[h]);const p=l.useCallback(async()=>{x.current=null,await h()},[h]);return{verbs:n,resources:o,namespaces:i,usernames:d,isLoading:m,error:g,refresh:p}}function ae(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ae(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ul(e,t){const n=ae(e);return isNaN(t)?Ae(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function _o(e,t){const n=+ae(e);return Ae(e,n+t)}const Fo=6048e5,Kl=864e5,ql=6e4,Yl=36e5,Xt=43200,ks=1440;function Xl(e,t){return _o(e,t*Yl)}let Ql={};function Vt(){return Ql}function _t(e,t){var c,d,u,m;const n=Vt(),r=(t==null?void 0:t.weekStartsOn)??((d=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??n.weekStartsOn??((m=(u=n.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??0,o=ae(e),a=o.getDay(),i=(a<r?7:0)+a-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function gn(e){return _t(e,{weekStartsOn:1})}function Wo(e){const t=ae(e),n=t.getFullYear(),r=Ae(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=gn(r),a=Ae(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const i=gn(a);return t.getTime()>=o.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function gr(e){const t=ae(e);return t.setHours(0,0,0,0),t}function xn(e){const t=ae(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Jl(e,t){const n=gr(e),r=gr(t),o=+n-xn(n),a=+r-xn(r);return Math.round((o-a)/Kl)}function Zl(e){const t=Wo(e),n=Ae(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),gn(n)}function ed(e,t){return _o(e,t*ql)}function dn(e,t){const n=ae(e),r=ae(t),o=n.getTime()-r.getTime();return o<0?-1:o>0?1:o}function td(e){return Ae(e,Date.now())}function nd(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function rd(e){if(!nd(e)&&typeof e!="number")return!1;const t=ae(e);return!isNaN(Number(t))}function sd(e,t){const n=ae(e),r=ae(t),o=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return o*12+a}function od(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function ad(e,t){return+ae(e)-+ae(t)}function Vo(e){const t=ae(e);return t.setHours(23,59,59,999),t}function id(e){const t=ae(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function cd(e){const t=ae(e);return+Vo(t)==+id(t)}function ld(e,t){const n=ae(e),r=ae(t),o=dn(n,r),a=Math.abs(sd(n,r));let i;if(a<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-o*a);let c=dn(n,r)===-o;cd(ae(e))&&a===1&&dn(e,r)===1&&(c=!1),i=o*(a-Number(c))}return i===0?0:i}function dd(e,t,n){const r=ad(e,t)/1e3;return od(n==null?void 0:n.roundingMethod)(r)}function ud(e){const t=ae(e),n=Ae(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const fd={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},md=(e,t,n)=>{let r;const o=fd[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Xn(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const hd={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},pd={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gd={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xd={date:Xn({formats:hd,defaultWidth:"full"}),time:Xn({formats:pd,defaultWidth:"full"}),dateTime:Xn({formats:gd,defaultWidth:"full"})},vd={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bd=(e,t,n,r)=>vd[e];function Ot(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,c=n!=null&&n.width?String(n.width):i;o=e.formattingValues[c]||e.formattingValues[i]}else{const i=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;o=e.values[c]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(t):t;return o[a]}}const yd={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wd={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Nd={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jd={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Sd={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Cd={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kd=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Ed={ordinalNumber:kd,era:Ot({values:yd,defaultWidth:"wide"}),quarter:Ot({values:wd,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ot({values:Nd,defaultWidth:"wide"}),day:Ot({values:jd,defaultWidth:"wide"}),dayPeriod:Ot({values:Sd,defaultWidth:"wide",formattingValues:Cd,defaultFormattingWidth:"wide"})};function It(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(o);if(!a)return null;const i=a[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(c)?Pd(c,f=>f.test(i)):Rd(c,f=>f.test(i));let u;u=e.valueCallback?e.valueCallback(d):d,u=n.valueCallback?n.valueCallback(u):u;const m=t.slice(i.length);return{value:u,rest:m}}}function Rd(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Pd(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Ad(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;const c=t.slice(o.length);return{value:i,rest:c}}}const Td=/^(\d+)(th|st|nd|rd)?/i,Od=/\d+/i,Id={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Dd={any:[/^b/i,/^(a|c)/i]},Md={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ld={any:[/1/i,/2/i,/3/i,/4/i]},$d={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_d={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Fd={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Wd={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Vd={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bd={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zd={ordinalNumber:Ad({matchPattern:Td,parsePattern:Od,valueCallback:e=>parseInt(e,10)}),era:It({matchPatterns:Id,defaultMatchWidth:"wide",parsePatterns:Dd,defaultParseWidth:"any"}),quarter:It({matchPatterns:Md,defaultMatchWidth:"wide",parsePatterns:Ld,defaultParseWidth:"any",valueCallback:e=>e+1}),month:It({matchPatterns:$d,defaultMatchWidth:"wide",parsePatterns:_d,defaultParseWidth:"any"}),day:It({matchPatterns:Fd,defaultMatchWidth:"wide",parsePatterns:Wd,defaultParseWidth:"any"}),dayPeriod:It({matchPatterns:Vd,defaultMatchWidth:"any",parsePatterns:Bd,defaultParseWidth:"any"})},Bo={code:"en-US",formatDistance:md,formatLong:xd,formatRelative:bd,localize:Ed,match:zd,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Gd(e){const t=ae(e);return Jl(t,ud(t))+1}function Hd(e){const t=ae(e),n=+gn(t)-+Zl(t);return Math.round(n/Fo)+1}function zo(e,t){var m,f,g,v;const n=ae(e),r=n.getFullYear(),o=Vt(),a=(t==null?void 0:t.firstWeekContainsDate)??((f=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??o.firstWeekContainsDate??((v=(g=o.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,i=Ae(e,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const c=_t(i,t),d=Ae(e,0);d.setFullYear(r,0,a),d.setHours(0,0,0,0);const u=_t(d,t);return n.getTime()>=c.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function Ud(e,t){var c,d,u,m;const n=Vt(),r=(t==null?void 0:t.firstWeekContainsDate)??((d=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(u=n.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,o=zo(e,t),a=Ae(e,0);return a.setFullYear(o,0,r),a.setHours(0,0,0,0),_t(a,t)}function Kd(e,t){const n=ae(e),r=+_t(n,t)-+Ud(n,t);return Math.round(r/Fo)+1}function re(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const $e={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return re(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):re(n+1,2)},d(e,t){return re(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return re(e.getHours()%12||12,t.length)},H(e,t){return re(e.getHours(),t.length)},m(e,t){return re(e.getMinutes(),t.length)},s(e,t){return re(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return re(o,t.length)}},lt={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Es={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return $e.y(e,t)},Y:function(e,t,n,r){const o=zo(e,r),a=o>0?o:1-o;if(t==="YY"){const i=a%100;return re(i,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):re(a,t.length)},R:function(e,t){const n=Wo(e);return re(n,t.length)},u:function(e,t){const n=e.getFullYear();return re(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return re(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return re(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return $e.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return re(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=Kd(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):re(o,t.length)},I:function(e,t,n){const r=Hd(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):re(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):$e.d(e,t)},D:function(e,t,n){const r=Gd(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):re(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return re(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return re(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return re(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(r===12?o=lt.noon:r===0?o=lt.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(r>=17?o=lt.evening:r>=12?o=lt.afternoon:r>=4?o=lt.morning:o=lt.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return $e.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):$e.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):re(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):re(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):$e.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):$e.s(e,t)},S:function(e,t){return $e.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Ps(r);case"XXXX":case"XX":return Je(r);case"XXXXX":case"XXX":default:return Je(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Ps(r);case"xxxx":case"xx":return Je(r);case"xxxxx":case"xxx":default:return Je(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Rs(r,":");case"OOOO":default:return"GMT"+Je(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Rs(r,":");case"zzzz":default:return"GMT"+Je(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return re(r,t.length)},T:function(e,t,n){const r=e.getTime();return re(r,t.length)}};function Rs(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),a=r%60;return a===0?n+String(o):n+String(o)+t+re(a,2)}function Ps(e,t){return e%60===0?(e>0?"-":"+")+re(Math.abs(e)/60,2):Je(e,t)}function Je(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=re(Math.trunc(r/60),2),a=re(r%60,2);return n+o+t+a}const As=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Go=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},qd=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return As(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",As(r,t)).replace("{{time}}",Go(o,t))},Yd={p:Go,P:qd},Xd=/^D+$/,Qd=/^Y+$/,Jd=["D","DD","YY","YYYY"];function Zd(e){return Xd.test(e)}function eu(e){return Qd.test(e)}function tu(e,t,n){const r=nu(e,t,n);if(console.warn(r),Jd.includes(e))throw new RangeError(r)}function nu(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ru=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,su=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ou=/^'([^]*?)'?$/,au=/''/g,iu=/[a-zA-Z]/;function Bt(e,t,n){var m,f,g,v;const r=Vt(),o=r.locale??Bo,a=r.firstWeekContainsDate??((f=(m=r.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,i=r.weekStartsOn??((v=(g=r.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??0,c=ae(e);if(!rd(c))throw new RangeError("Invalid time value");let d=t.match(su).map(x=>{const h=x[0];if(h==="p"||h==="P"){const p=Yd[h];return p(x,o.formatLong)}return x}).join("").match(ru).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const h=x[0];if(h==="'")return{isToken:!1,value:cu(x)};if(Es[h])return{isToken:!0,value:x};if(h.match(iu))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:x}});o.localize.preprocessor&&(d=o.localize.preprocessor(c,d));const u={firstWeekContainsDate:a,weekStartsOn:i,locale:o};return d.map(x=>{if(!x.isToken)return x.value;const h=x.value;(eu(h)||Zd(h))&&tu(h,t,String(e));const p=Es[h[0]];return p(c,h,o.localize,u)}).join("")}function cu(e){const t=e.match(ou);return t?t[1].replace(au,"'"):e}function lu(e,t,n){const r=Vt(),o=(n==null?void 0:n.locale)??r.locale??Bo,a=2520,i=dn(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:i});let d,u;i>0?(d=ae(t),u=ae(e)):(d=ae(e),u=ae(t));const m=dd(u,d),f=(xn(u)-xn(d))/1e3,g=Math.round((m-f)/60);let v;if(g<2)return n!=null&&n.includeSeconds?m<5?o.formatDistance("lessThanXSeconds",5,c):m<10?o.formatDistance("lessThanXSeconds",10,c):m<20?o.formatDistance("lessThanXSeconds",20,c):m<40?o.formatDistance("halfAMinute",0,c):m<60?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",1,c):g===0?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",g,c);if(g<45)return o.formatDistance("xMinutes",g,c);if(g<90)return o.formatDistance("aboutXHours",1,c);if(g<ks){const x=Math.round(g/60);return o.formatDistance("aboutXHours",x,c)}else{if(g<a)return o.formatDistance("xDays",1,c);if(g<Xt){const x=Math.round(g/ks);return o.formatDistance("xDays",x,c)}else if(g<Xt*2)return v=Math.round(g/Xt),o.formatDistance("aboutXMonths",v,c)}if(v=ld(u,d),v<12){const x=Math.round(g/Xt);return o.formatDistance("xMonths",x,c)}else{const x=v%12,h=Math.trunc(v/12);return x<3?o.formatDistance("aboutXYears",h,c):x<9?o.formatDistance("overXYears",h,c):o.formatDistance("almostXYears",h+1,c)}}function Ho(e,t){return lu(e,td(e),t)}function oe(e,t){const n=ae(e);if(isNaN(n.getTime()))throw new RangeError("Invalid time value");let r="",o="";const a="-",i=":";{const c=re(n.getDate(),2),d=re(n.getMonth()+1,2);r=`${re(n.getFullYear(),4)}${a}${d}${a}${c}`}{const c=n.getTimezoneOffset();if(c!==0){const v=Math.abs(c),x=re(Math.trunc(v/60),2),h=re(v%60,2);o=`${c<0?"+":"-"}${x}:${h}`}else o="Z";const d=re(n.getHours(),2),u=re(n.getMinutes(),2),m=re(n.getSeconds(),2),f=r===""?"":"T",g=[d,u,m].join(i);r=`${r}${f}${g}${o}`}return r}function bt(e,t){return Ul(e,-t)}function et(e,t){return Xl(e,-t)}function Uo(e,t){return ed(e,-15)}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=e=>{const t=uu(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fu={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=l.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:i,...c},d)=>l.createElement("svg",{ref:d,...fu,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Ko("lucide",o),...!a&&!mu(c)&&{"aria-hidden":"true"},...c},[...i.map(([u,m])=>l.createElement(u,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(e,t)=>{const n=l.forwardRef(({className:r,...o},a)=>l.createElement(hu,{ref:a,iconNode:t,className:Ko(`lucide-${du(Ts(e))}`,`lucide-${e}`,r),...o}));return n.displayName=Ts(e),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gu=we("calendar",pu);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ft=we("check",xu);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_r=we("chevron-down",vu);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yu=we("chevron-right",bu);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Nu=we("chevron-up",wu);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],qo=we("chevrons-up-down",ju);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gt=we("circle-alert",Su);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ku=we("circle-check-big",Cu);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Os=we("circle-x",Eu);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pu=we("clock",Ru);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Is=we("loader-circle",Au);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vn=we("x",Tu);var Ds=1,Ou=.9,Iu=.8,Du=.17,Qn=.1,Jn=.999,Mu=.9999,Lu=.99,$u=/[\\\/_+.#"@\[\(\{&]/,_u=/[\\\/_+.#"@\[\(\{&]/g,Fu=/[\s-]/,Yo=/[\s-]/g;function xr(e,t,n,r,o,a,i){if(a===t.length)return o===e.length?Ds:Lu;var c=`${o},${a}`;if(i[c]!==void 0)return i[c];for(var d=r.charAt(a),u=n.indexOf(d,o),m=0,f,g,v,x;u>=0;)f=xr(e,t,n,r,u+1,a+1,i),f>m&&(u===o?f*=Ds:$u.test(e.charAt(u-1))?(f*=Iu,v=e.slice(o,u-1).match(_u),v&&o>0&&(f*=Math.pow(Jn,v.length))):Fu.test(e.charAt(u-1))?(f*=Ou,x=e.slice(o,u-1).match(Yo),x&&o>0&&(f*=Math.pow(Jn,x.length))):(f*=Du,o>0&&(f*=Math.pow(Jn,u-o))),e.charAt(u)!==t.charAt(a)&&(f*=Mu)),(f<Qn&&n.charAt(u-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(u-1)!==r.charAt(a))&&(g=xr(e,t,n,r,u+1,a+2,i),g*Qn>f&&(f=g*Qn)),f>m&&(m=f),u=n.indexOf(d,u+1);return i[c]=m,m}function Ms(e){return e.toLowerCase().replace(Yo," ")}function Wu(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,xr(e,t,Ms(e),Ms(t),0,0,{})}function te(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function Vu(e,t){const n=l.createContext(t),r=a=>{const{children:i,...c}=a,d=l.useMemo(()=>c,Object.values(c));return s.jsx(n.Provider,{value:d,children:i})};r.displayName=e+"Provider";function o(a){const i=l.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,o]}function He(e,t=[]){let n=[];function r(a,i){const c=l.createContext(i),d=n.length;n=[...n,i];const u=f=>{var b;const{scope:g,children:v,...x}=f,h=((b=g==null?void 0:g[e])==null?void 0:b[d])||c,p=l.useMemo(()=>x,Object.values(x));return s.jsx(h.Provider,{value:p,children:v})};u.displayName=a+"Provider";function m(f,g){var h;const v=((h=g==null?void 0:g[e])==null?void 0:h[d])||c,x=l.useContext(v);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,m]}const o=()=>{const a=n.map(i=>l.createContext(i));return function(c){const d=(c==null?void 0:c[e])||a;return l.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return o.scopeName=e,[r,Bu(o,...t)]}function Bu(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const i=r.reduce((c,{useScope:d,scopeName:u})=>{const f=d(a)[`__scope${u}`];return{...c,...f}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var fe=globalThis!=null&&globalThis.document?l.useLayoutEffect:()=>{},zu=Mr[" useId ".trim().toString()]||(()=>{}),Gu=0;function me(e){const[t,n]=l.useState(zu());return fe(()=>{n(r=>r??String(Gu++))},[e]),t?`radix-${t}`:""}var Hu=Mr[" useInsertionEffect ".trim().toString()]||fe;function tt({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,a,i]=Uu({defaultProp:t,onChange:n}),c=e!==void 0,d=c?e:o;{const m=l.useRef(e!==void 0);l.useEffect(()=>{const f=m.current;f!==c&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,r])}const u=l.useCallback(m=>{var f;if(c){const g=Ku(m)?m(e):m;g!==e&&((f=i.current)==null||f.call(i,g))}else a(m)},[c,e,a,i]);return[d,u]}function Uu({defaultProp:e,onChange:t}){const[n,r]=l.useState(e),o=l.useRef(n),a=l.useRef(t);return Hu(()=>{a.current=t},[t]),l.useEffect(()=>{var i;o.current!==n&&((i=a.current)==null||i.call(a,n),o.current=n)},[n,o]),[n,r,a]}function Ku(e){return typeof e=="function"}function yt(e){const t=qu(e),n=l.forwardRef((r,o)=>{const{children:a,...i}=r,c=l.Children.toArray(a),d=c.find(Xu);if(d){const u=d.props.children,m=c.map(f=>f===d?l.Children.count(u)>1?l.Children.only(null):l.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...i,ref:o,children:l.isValidElement(u)?l.cloneElement(u,void 0,m):null})}return s.jsx(t,{...i,ref:o,children:a})});return n.displayName=`${e}.Slot`,n}function qu(e){const t=l.forwardRef((n,r)=>{const{children:o,...a}=n;if(l.isValidElement(o)){const i=Ju(o),c=Qu(a,o.props);return o.type!==l.Fragment&&(c.ref=r?We(r,i):i),l.cloneElement(o,c)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Yu=Symbol("radix.slottable");function Xu(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Yu}function Qu(e,t){const n={...t};for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=(...c)=>{const d=a(...c);return o(...c),d}:o&&(n[r]=o):r==="style"?n[r]={...o,...a}:r==="className"&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...e,...n}}function Ju(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Zu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Z=Zu.reduce((e,t)=>{const n=yt(`Primitive.${t}`),r=l.forwardRef((o,a)=>{const{asChild:i,...c}=o,d=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function ef(e,t){e&&En.flushSync(()=>e.dispatchEvent(t))}function Ve(e){const t=l.useRef(e);return l.useEffect(()=>{t.current=e}),l.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function tf(e,t=globalThis==null?void 0:globalThis.document){const n=Ve(e);l.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var nf="DismissableLayer",vr="dismissableLayer.update",rf="dismissableLayer.pointerDownOutside",sf="dismissableLayer.focusOutside",Ls,Xo=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),An=l.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i,onDismiss:c,...d}=e,u=l.useContext(Xo),[m,f]=l.useState(null),g=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=l.useState({}),x=ce(t,j=>f(j)),h=Array.from(u.layers),[p]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=h.indexOf(p),y=m?h.indexOf(m):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,N=y>=b,S=cf(j=>{const R=j.target,D=[...u.branches].some(F=>F.contains(R));!N||D||(o==null||o(j),i==null||i(j),j.defaultPrevented||c==null||c())},g),C=lf(j=>{const R=j.target;[...u.branches].some(F=>F.contains(R))||(a==null||a(j),i==null||i(j),j.defaultPrevented||c==null||c())},g);return tf(j=>{y===u.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&c&&(j.preventDefault(),c()))},g),l.useEffect(()=>{if(m)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Ls=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),$s(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Ls)}},[m,g,n,u]),l.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),$s())},[m,u]),l.useEffect(()=>{const j=()=>v({});return document.addEventListener(vr,j),()=>document.removeEventListener(vr,j)},[]),s.jsx(Z.div,{...d,ref:x,style:{pointerEvents:w?N?"auto":"none":void 0,...e.style},onFocusCapture:te(e.onFocusCapture,C.onFocusCapture),onBlurCapture:te(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:te(e.onPointerDownCapture,S.onPointerDownCapture)})});An.displayName=nf;var of="DismissableLayerBranch",af=l.forwardRef((e,t)=>{const n=l.useContext(Xo),r=l.useRef(null),o=ce(t,r);return l.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(Z.div,{...e,ref:o})});af.displayName=of;function cf(e,t=globalThis==null?void 0:globalThis.document){const n=Ve(e),r=l.useRef(!1),o=l.useRef(()=>{});return l.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let d=function(){Qo(rf,n,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=d,t.addEventListener("click",o.current,{once:!0})):d()}else t.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function lf(e,t=globalThis==null?void 0:globalThis.document){const n=Ve(e),r=l.useRef(!1);return l.useEffect(()=>{const o=a=>{a.target&&!r.current&&Qo(sf,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $s(){const e=new CustomEvent(vr);document.dispatchEvent(e)}function Qo(e,t,n,{discrete:r}){const o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?ef(o,a):o.dispatchEvent(a)}var Zn="focusScope.autoFocusOnMount",er="focusScope.autoFocusOnUnmount",_s={bubbles:!1,cancelable:!0},df="FocusScope",Tn=l.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...i}=e,[c,d]=l.useState(null),u=Ve(o),m=Ve(a),f=l.useRef(null),g=ce(t,h=>d(h)),v=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(r){let h=function(w){if(v.paused||!c)return;const N=w.target;c.contains(N)?f.current=N:_e(f.current,{select:!0})},p=function(w){if(v.paused||!c)return;const N=w.relatedTarget;N!==null&&(c.contains(N)||_e(f.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&_e(c)};document.addEventListener("focusin",h),document.addEventListener("focusout",p);const y=new MutationObserver(b);return c&&y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",p),y.disconnect()}}},[r,c,v.paused]),l.useEffect(()=>{if(c){Ws.add(v);const h=document.activeElement;if(!c.contains(h)){const b=new CustomEvent(Zn,_s);c.addEventListener(Zn,u),c.dispatchEvent(b),b.defaultPrevented||(uf(gf(Jo(c)),{select:!0}),document.activeElement===h&&_e(c))}return()=>{c.removeEventListener(Zn,u),setTimeout(()=>{const b=new CustomEvent(er,_s);c.addEventListener(er,m),c.dispatchEvent(b),b.defaultPrevented||_e(h??document.body,{select:!0}),c.removeEventListener(er,m),Ws.remove(v)},0)}}},[c,u,m,v]);const x=l.useCallback(h=>{if(!n&&!r||v.paused)return;const p=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,b=document.activeElement;if(p&&b){const y=h.currentTarget,[w,N]=ff(y);w&&N?!h.shiftKey&&b===N?(h.preventDefault(),n&&_e(w,{select:!0})):h.shiftKey&&b===w&&(h.preventDefault(),n&&_e(N,{select:!0})):b===y&&h.preventDefault()}},[n,r,v.paused]);return s.jsx(Z.div,{tabIndex:-1,...i,ref:g,onKeyDown:x})});Tn.displayName=df;function uf(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(_e(r,{select:t}),document.activeElement!==n)return}function ff(e){const t=Jo(e),n=Fs(t,e),r=Fs(t.reverse(),e);return[n,r]}function Jo(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Fs(e,t){for(const n of e)if(!mf(n,{upTo:t}))return n}function mf(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function hf(e){return e instanceof HTMLInputElement&&"select"in e}function _e(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&hf(e)&&t&&e.select()}}var Ws=pf();function pf(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Vs(e,t),e.unshift(t)},remove(t){var n;e=Vs(e,t),(n=e[0])==null||n.resume()}}}function Vs(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function gf(e){return e.filter(t=>t.tagName!=="A")}var xf="Portal",On=l.forwardRef((e,t)=>{var c;const{container:n,...r}=e,[o,a]=l.useState(!1);fe(()=>a(!0),[]);const i=n||o&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return i?Fc.createPortal(s.jsx(Z.div,{...r,ref:t}),i):null});On.displayName=xf;function vf(e,t){return l.useReducer((n,r)=>t[n][r]??n,e)}var Ue=e=>{const{present:t,children:n}=e,r=bf(t),o=typeof n=="function"?n({present:r.isPresent}):l.Children.only(n),a=ce(r.ref,yf(o));return typeof n=="function"||r.isPresent?l.cloneElement(o,{ref:a}):null};Ue.displayName="Presence";function bf(e){const[t,n]=l.useState(),r=l.useRef(null),o=l.useRef(e),a=l.useRef("none"),i=e?"mounted":"unmounted",[c,d]=vf(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return l.useEffect(()=>{const u=Qt(r.current);a.current=c==="mounted"?u:"none"},[c]),fe(()=>{const u=r.current,m=o.current;if(m!==e){const g=a.current,v=Qt(u);e?d("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?d("UNMOUNT"):d(m&&g!==v?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,d]),fe(()=>{if(t){let u;const m=t.ownerDocument.defaultView??window,f=v=>{const h=Qt(r.current).includes(CSS.escape(v.animationName));if(v.target===t&&h&&(d("ANIMATION_END"),!o.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",u=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},g=v=>{v.target===t&&(a.current=Qt(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{m.clearTimeout(u),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:l.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Qt(e){return(e==null?void 0:e.animationName)||"none"}function yf(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var tr=0;function Fr(){l.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Bs()),document.body.insertAdjacentElement("beforeend",e[1]??Bs()),tr++,()=>{tr===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),tr--}},[])}function Bs(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ee=function(){return Ee=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Ee.apply(this,arguments)};function Zo(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function wf(e,t,n){for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var un="right-scroll-bar-position",fn="width-before-scroll-bar",Nf="with-scroll-bars-hidden",jf="--removed-body-scroll-bar-size";function nr(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Sf(e,t){var n=l.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var Cf=typeof window<"u"?l.useLayoutEffect:l.useEffect,zs=new WeakMap;function kf(e,t){var n=Sf(null,function(r){return e.forEach(function(o){return nr(o,r)})});return Cf(function(){var r=zs.get(n);if(r){var o=new Set(r),a=new Set(e),i=n.current;o.forEach(function(c){a.has(c)||nr(c,null)}),a.forEach(function(c){o.has(c)||nr(c,i)})}zs.set(n,e)},[e]),n}function Ef(e){return e}function Rf(e,t){t===void 0&&(t=Ef);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(c){return c!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(c){return a(c)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var c=n;n=[],c.forEach(a),i=n}var d=function(){var m=i;i=[],m.forEach(a)},u=function(){return Promise.resolve().then(d)};u(),n={push:function(m){i.push(m),u()},filter:function(m){return i=i.filter(m),n}}}};return o}function Pf(e){e===void 0&&(e={});var t=Rf(null);return t.options=Ee({async:!0,ssr:!1},e),t}var ea=function(e){var t=e.sideCar,n=Zo(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return l.createElement(r,Ee({},n))};ea.isSideCarExport=!0;function Af(e,t){return e.useMedium(t),ea}var ta=Pf(),rr=function(){},In=l.forwardRef(function(e,t){var n=l.useRef(null),r=l.useState({onScrollCapture:rr,onWheelCapture:rr,onTouchMoveCapture:rr}),o=r[0],a=r[1],i=e.forwardProps,c=e.children,d=e.className,u=e.removeScrollBar,m=e.enabled,f=e.shards,g=e.sideCar,v=e.noRelative,x=e.noIsolation,h=e.inert,p=e.allowPinchZoom,b=e.as,y=b===void 0?"div":b,w=e.gapMode,N=Zo(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=g,C=kf([n,t]),j=Ee(Ee({},N),o);return l.createElement(l.Fragment,null,m&&l.createElement(S,{sideCar:ta,removeScrollBar:u,shards:f,noRelative:v,noIsolation:x,inert:h,setCallbacks:a,allowPinchZoom:!!p,lockRef:n,gapMode:w}),i?l.cloneElement(l.Children.only(c),Ee(Ee({},j),{ref:C})):l.createElement(y,Ee({},j,{className:d,ref:C}),c))});In.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};In.classNames={fullWidth:fn,zeroRight:un};var Tf=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Of(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Tf();return t&&e.setAttribute("nonce",t),e}function If(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Df(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Mf=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Of())&&(If(t,n),Df(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Lf=function(){var e=Mf();return function(t,n){l.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},na=function(){var e=Lf(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},$f={left:0,top:0,right:0,gap:0},sr=function(e){return parseInt(e||"",10)||0},_f=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[sr(n),sr(r),sr(o)]},Ff=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return $f;var t=_f(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Wf=na(),xt="data-scroll-locked",Vf=function(e,t,n,r){var o=e.left,a=e.top,i=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Nf,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(xt,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(un,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(fn,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(un," .").concat(un,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(fn," .").concat(fn,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(xt,`] {
    `).concat(jf,": ").concat(c,`px;
  }
`)},Gs=function(){var e=parseInt(document.body.getAttribute(xt)||"0",10);return isFinite(e)?e:0},Bf=function(){l.useEffect(function(){return document.body.setAttribute(xt,(Gs()+1).toString()),function(){var e=Gs()-1;e<=0?document.body.removeAttribute(xt):document.body.setAttribute(xt,e.toString())}},[])},zf=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;Bf();var a=l.useMemo(function(){return Ff(o)},[o]);return l.createElement(Wf,{styles:Vf(a,!t,o,n?"":"!important")})},br=!1;if(typeof window<"u")try{var Jt=Object.defineProperty({},"passive",{get:function(){return br=!0,!0}});window.addEventListener("test",Jt,Jt),window.removeEventListener("test",Jt,Jt)}catch{br=!1}var dt=br?{passive:!1}:!1,Gf=function(e){return e.tagName==="TEXTAREA"},ra=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Gf(e)&&n[t]==="visible")},Hf=function(e){return ra(e,"overflowY")},Uf=function(e){return ra(e,"overflowX")},Hs=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=sa(e,r);if(o){var a=oa(e,r),i=a[1],c=a[2];if(i>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Kf=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},qf=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},sa=function(e,t){return e==="v"?Hf(t):Uf(t)},oa=function(e,t){return e==="v"?Kf(t):qf(t)},Yf=function(e,t){return e==="h"&&t==="rtl"?-1:1},Xf=function(e,t,n,r,o){var a=Yf(e,window.getComputedStyle(t).direction),i=a*r,c=n.target,d=t.contains(c),u=!1,m=i>0,f=0,g=0;do{if(!c)break;var v=oa(e,c),x=v[0],h=v[1],p=v[2],b=h-p-a*x;(x||b)&&sa(e,c)&&(f+=b,g+=x);var y=c.parentNode;c=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!d&&c!==document.body||d&&(t.contains(c)||t===c));return(m&&Math.abs(f)<1||!m&&Math.abs(g)<1)&&(u=!0),u},Zt=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Us=function(e){return[e.deltaX,e.deltaY]},Ks=function(e){return e&&"current"in e?e.current:e},Qf=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Jf=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Zf=0,ut=[];function em(e){var t=l.useRef([]),n=l.useRef([0,0]),r=l.useRef(),o=l.useState(Zf++)[0],a=l.useState(na)[0],i=l.useRef(e);l.useEffect(function(){i.current=e},[e]),l.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var h=wf([e.lockRef.current],(e.shards||[]).map(Ks)).filter(Boolean);return h.forEach(function(p){return p.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),h.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var c=l.useCallback(function(h,p){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!i.current.allowPinchZoom;var b=Zt(h),y=n.current,w="deltaX"in h?h.deltaX:y[0]-b[0],N="deltaY"in h?h.deltaY:y[1]-b[1],S,C=h.target,j=Math.abs(w)>Math.abs(N)?"h":"v";if("touches"in h&&j==="h"&&C.type==="range")return!1;var R=window.getSelection(),D=R&&R.anchorNode,F=D?D===C||D.contains(C):!1;if(F)return!1;var I=Hs(j,C);if(!I)return!0;if(I?S=j:(S=j==="v"?"h":"v",I=Hs(j,C)),!I)return!1;if(!r.current&&"changedTouches"in h&&(w||N)&&(r.current=S),!S)return!0;var B=r.current||S;return Xf(B,p,h,B==="h"?w:N)},[]),d=l.useCallback(function(h){var p=h;if(!(!ut.length||ut[ut.length-1]!==a)){var b="deltaY"in p?Us(p):Zt(p),y=t.current.filter(function(S){return S.name===p.type&&(S.target===p.target||p.target===S.shadowParent)&&Qf(S.delta,b)})[0];if(y&&y.should){p.cancelable&&p.preventDefault();return}if(!y){var w=(i.current.shards||[]).map(Ks).filter(Boolean).filter(function(S){return S.contains(p.target)}),N=w.length>0?c(p,w[0]):!i.current.noIsolation;N&&p.cancelable&&p.preventDefault()}}},[]),u=l.useCallback(function(h,p,b,y){var w={name:h,delta:p,target:b,should:y,shadowParent:tm(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(N){return N!==w})},1)},[]),m=l.useCallback(function(h){n.current=Zt(h),r.current=void 0},[]),f=l.useCallback(function(h){u(h.type,Us(h),h.target,c(h,e.lockRef.current))},[]),g=l.useCallback(function(h){u(h.type,Zt(h),h.target,c(h,e.lockRef.current))},[]);l.useEffect(function(){return ut.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:g}),document.addEventListener("wheel",d,dt),document.addEventListener("touchmove",d,dt),document.addEventListener("touchstart",m,dt),function(){ut=ut.filter(function(h){return h!==a}),document.removeEventListener("wheel",d,dt),document.removeEventListener("touchmove",d,dt),document.removeEventListener("touchstart",m,dt)}},[]);var v=e.removeScrollBar,x=e.inert;return l.createElement(l.Fragment,null,x?l.createElement(a,{styles:Jf(o)}):null,v?l.createElement(zf,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function tm(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}var nm=Af(ta,em),Dn=l.forwardRef(function(e,t){return l.createElement(In,Ee({},e,{ref:t,sideCar:nm}))});Dn.classNames=In.classNames;var rm=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ft=new WeakMap,en=new WeakMap,tn={},or=0,aa=function(e){return e&&(e.host||aa(e.parentNode))},sm=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=aa(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},om=function(e,t,n,r){var o=sm(t,Array.isArray(e)?e:[e]);tn[n]||(tn[n]=new WeakMap);var a=tn[n],i=[],c=new Set,d=new Set(o),u=function(f){!f||c.has(f)||(c.add(f),u(f.parentNode))};o.forEach(u);var m=function(f){!f||d.has(f)||Array.prototype.forEach.call(f.children,function(g){if(c.has(g))m(g);else try{var v=g.getAttribute(r),x=v!==null&&v!=="false",h=(ft.get(g)||0)+1,p=(a.get(g)||0)+1;ft.set(g,h),a.set(g,p),i.push(g),h===1&&x&&en.set(g,!0),p===1&&g.setAttribute(n,"true"),x||g.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",g,b)}})};return m(t),c.clear(),or++,function(){i.forEach(function(f){var g=ft.get(f)-1,v=a.get(f)-1;ft.set(f,g),a.set(f,v),g||(en.has(f)||f.removeAttribute(r),en.delete(f)),v||f.removeAttribute(n)}),or--,or||(ft=new WeakMap,ft=new WeakMap,en=new WeakMap,tn={})}},Wr=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=rm(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),om(r,o,n,"aria-hidden")):function(){return null}},Mn="Dialog",[ia]=He(Mn),[am,Ce]=ia(Mn),ca=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,c=l.useRef(null),d=l.useRef(null),[u,m]=tt({prop:r,defaultProp:o??!1,onChange:a,caller:Mn});return s.jsx(am,{scope:t,triggerRef:c,contentRef:d,contentId:me(),titleId:me(),descriptionId:me(),open:u,onOpenChange:m,onOpenToggle:l.useCallback(()=>m(f=>!f),[m]),modal:i,children:n})};ca.displayName=Mn;var la="DialogTrigger",im=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Ce(la,n),a=ce(t,o.triggerRef);return s.jsx(Z.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":zr(o.open),...r,ref:a,onClick:te(e.onClick,o.onOpenToggle)})});im.displayName=la;var Vr="DialogPortal",[cm,da]=ia(Vr,{forceMount:void 0}),ua=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,a=Ce(Vr,t);return s.jsx(cm,{scope:t,forceMount:n,children:l.Children.map(r,i=>s.jsx(Ue,{present:n||a.open,children:s.jsx(On,{asChild:!0,container:o,children:i})}))})};ua.displayName=Vr;var bn="DialogOverlay",fa=l.forwardRef((e,t)=>{const n=da(bn,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=Ce(bn,e.__scopeDialog);return a.modal?s.jsx(Ue,{present:r||a.open,children:s.jsx(dm,{...o,ref:t})}):null});fa.displayName=bn;var lm=yt("DialogOverlay.RemoveScroll"),dm=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Ce(bn,n);return s.jsx(Dn,{as:lm,allowPinchZoom:!0,shards:[o.contentRef],children:s.jsx(Z.div,{"data-state":zr(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),nt="DialogContent",ma=l.forwardRef((e,t)=>{const n=da(nt,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=Ce(nt,e.__scopeDialog);return s.jsx(Ue,{present:r||a.open,children:a.modal?s.jsx(um,{...o,ref:t}):s.jsx(fm,{...o,ref:t})})});ma.displayName=nt;var um=l.forwardRef((e,t)=>{const n=Ce(nt,e.__scopeDialog),r=l.useRef(null),o=ce(t,n.contentRef,r);return l.useEffect(()=>{const a=r.current;if(a)return Wr(a)},[]),s.jsx(ha,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:te(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:te(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0;(i.button===2||c)&&a.preventDefault()}),onFocusOutside:te(e.onFocusOutside,a=>a.preventDefault())})}),fm=l.forwardRef((e,t)=>{const n=Ce(nt,e.__scopeDialog),r=l.useRef(!1),o=l.useRef(!1);return s.jsx(ha,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,c;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var d,u;(d=e.onInteractOutside)==null||d.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),ha=l.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,c=Ce(nt,n),d=l.useRef(null),u=ce(t,d);return Fr(),s.jsxs(s.Fragment,{children:[s.jsx(Tn,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:s.jsx(An,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":zr(c.open),...i,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(mm,{titleId:c.titleId}),s.jsx(pm,{contentRef:d,descriptionId:c.descriptionId})]})]})}),Br="DialogTitle",pa=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Ce(Br,n);return s.jsx(Z.h2,{id:o.titleId,...r,ref:t})});pa.displayName=Br;var ga="DialogDescription",xa=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Ce(ga,n);return s.jsx(Z.p,{id:o.descriptionId,...r,ref:t})});xa.displayName=ga;var va="DialogClose",ba=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Ce(va,n);return s.jsx(Z.button,{type:"button",...r,ref:t,onClick:te(e.onClick,()=>o.onOpenChange(!1))})});ba.displayName=va;function zr(e){return e?"open":"closed"}var ya="DialogTitleWarning",[rx,wa]=Vu(ya,{contentName:nt,titleName:Br,docsSlug:"dialog"}),mm=({titleId:e})=>{const t=wa(ya),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return l.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},hm="DialogDescriptionWarning",pm=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wa(hm).contentName}}.`;return l.useEffect(()=>{var a;const o=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Na=ca,ja=ua,Gr=fa,Hr=ma,Sa=pa,Ca=xa,gm=ba,Dt='[cmdk-group=""]',ar='[cmdk-group-items=""]',xm='[cmdk-group-heading=""]',ka='[cmdk-item=""]',qs=`${ka}:not([aria-disabled="true"])`,yr="cmdk-item-select",ht="data-value",vm=(e,t,n)=>Wu(e,t,n),Ea=l.createContext(void 0),zt=()=>l.useContext(Ea),Ra=l.createContext(void 0),Ur=()=>l.useContext(Ra),Pa=l.createContext(void 0),Aa=l.forwardRef((e,t)=>{let n=pt(()=>{var k,W;return{search:"",value:(W=(k=e.value)!=null?k:e.defaultValue)!=null?W:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=pt(()=>new Set),o=pt(()=>new Map),a=pt(()=>new Map),i=pt(()=>new Set),c=Oa(e),{label:d,children:u,value:m,onValueChange:f,filter:g,shouldFilter:v,loop:x,disablePointerSelection:h=!1,vimBindings:p=!0,...b}=e,y=me(),w=me(),N=me(),S=l.useRef(null),C=Sm();rt(()=>{if(m!==void 0){let k=m.trim();n.current.value=k,j.emit()}},[m]),rt(()=>{C(6,z)},[]);let j=l.useMemo(()=>({subscribe:k=>(i.current.add(k),()=>i.current.delete(k)),snapshot:()=>n.current,setState:(k,W,P)=>{var _,H,$,Y;if(!Object.is(n.current[k],W)){if(n.current[k]=W,k==="search")B(),F(),C(1,I);else if(k==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Q=document.getElementById(N);Q?Q.focus():(_=document.getElementById(y))==null||_.focus()}if(C(7,()=>{var Q;n.current.selectedItemId=(Q=E())==null?void 0:Q.id,j.emit()}),P||C(5,z),((H=c.current)==null?void 0:H.value)!==void 0){let Q=W??"";(Y=($=c.current).onValueChange)==null||Y.call($,Q);return}}j.emit()}},emit:()=>{i.current.forEach(k=>k())}}),[]),R=l.useMemo(()=>({value:(k,W,P)=>{var _;W!==((_=a.current.get(k))==null?void 0:_.value)&&(a.current.set(k,{value:W,keywords:P}),n.current.filtered.items.set(k,D(W,P)),C(2,()=>{F(),j.emit()}))},item:(k,W)=>(r.current.add(k),W&&(o.current.has(W)?o.current.get(W).add(k):o.current.set(W,new Set([k]))),C(3,()=>{B(),F(),n.current.value||I(),j.emit()}),()=>{a.current.delete(k),r.current.delete(k),n.current.filtered.items.delete(k);let P=E();C(4,()=>{B(),(P==null?void 0:P.getAttribute("id"))===k&&I(),j.emit()})}),group:k=>(o.current.has(k)||o.current.set(k,new Set),()=>{a.current.delete(k),o.current.delete(k)}),filter:()=>c.current.shouldFilter,label:d||e["aria-label"],getDisablePointerSelection:()=>c.current.disablePointerSelection,listId:y,inputId:N,labelId:w,listInnerRef:S}),[]);function D(k,W){var P,_;let H=(_=(P=c.current)==null?void 0:P.filter)!=null?_:vm;return k?H(k,n.current.search,W):0}function F(){if(!n.current.search||c.current.shouldFilter===!1)return;let k=n.current.filtered.items,W=[];n.current.filtered.groups.forEach(_=>{let H=o.current.get(_),$=0;H.forEach(Y=>{let Q=k.get(Y);$=Math.max(Q,$)}),W.push([_,$])});let P=S.current;O().sort((_,H)=>{var $,Y;let Q=_.getAttribute("id"),J=H.getAttribute("id");return(($=k.get(J))!=null?$:0)-((Y=k.get(Q))!=null?Y:0)}).forEach(_=>{let H=_.closest(ar);H?H.appendChild(_.parentElement===H?_:_.closest(`${ar} > *`)):P.appendChild(_.parentElement===P?_:_.closest(`${ar} > *`))}),W.sort((_,H)=>H[1]-_[1]).forEach(_=>{var H;let $=(H=S.current)==null?void 0:H.querySelector(`${Dt}[${ht}="${encodeURIComponent(_[0])}"]`);$==null||$.parentElement.appendChild($)})}function I(){let k=O().find(P=>P.getAttribute("aria-disabled")!=="true"),W=k==null?void 0:k.getAttribute(ht);j.setState("value",W||void 0)}function B(){var k,W,P,_;if(!n.current.search||c.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let H=0;for(let $ of r.current){let Y=(W=(k=a.current.get($))==null?void 0:k.value)!=null?W:"",Q=(_=(P=a.current.get($))==null?void 0:P.keywords)!=null?_:[],J=D(Y,Q);n.current.filtered.items.set($,J),J>0&&H++}for(let[$,Y]of o.current)for(let Q of Y)if(n.current.filtered.items.get(Q)>0){n.current.filtered.groups.add($);break}n.current.filtered.count=H}function z(){var k,W,P;let _=E();_&&(((k=_.parentElement)==null?void 0:k.firstChild)===_&&((P=(W=_.closest(Dt))==null?void 0:W.querySelector(xm))==null||P.scrollIntoView({block:"nearest"})),_.scrollIntoView({block:"nearest"}))}function E(){var k;return(k=S.current)==null?void 0:k.querySelector(`${ka}[aria-selected="true"]`)}function O(){var k;return Array.from(((k=S.current)==null?void 0:k.querySelectorAll(qs))||[])}function T(k){let W=O()[k];W&&j.setState("value",W.getAttribute(ht))}function L(k){var W;let P=E(),_=O(),H=_.findIndex(Y=>Y===P),$=_[H+k];(W=c.current)!=null&&W.loop&&($=H+k<0?_[_.length-1]:H+k===_.length?_[0]:_[H+k]),$&&j.setState("value",$.getAttribute(ht))}function A(k){let W=E(),P=W==null?void 0:W.closest(Dt),_;for(;P&&!_;)P=k>0?Nm(P,Dt):jm(P,Dt),_=P==null?void 0:P.querySelector(qs);_?j.setState("value",_.getAttribute(ht)):L(k)}let G=()=>T(O().length-1),U=k=>{k.preventDefault(),k.metaKey?G():k.altKey?A(1):L(1)},M=k=>{k.preventDefault(),k.metaKey?T(0):k.altKey?A(-1):L(-1)};return l.createElement(Z.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:k=>{var W;(W=b.onKeyDown)==null||W.call(b,k);let P=k.nativeEvent.isComposing||k.keyCode===229;if(!(k.defaultPrevented||P))switch(k.key){case"n":case"j":{p&&k.ctrlKey&&U(k);break}case"ArrowDown":{U(k);break}case"p":case"k":{p&&k.ctrlKey&&M(k);break}case"ArrowUp":{M(k);break}case"Home":{k.preventDefault(),T(0);break}case"End":{k.preventDefault(),G();break}case"Enter":{k.preventDefault();let _=E();if(_){let H=new Event(yr);_.dispatchEvent(H)}}}}},l.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:km},d),Ln(e,k=>l.createElement(Ra.Provider,{value:j},l.createElement(Ea.Provider,{value:R},k))))}),yn=l.forwardRef((e,t)=>{var n,r;let o=me(),a=l.useRef(null),i=l.useContext(Pa),c=zt(),d=Oa(e),u=(r=(n=d.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;rt(()=>{if(!u)return c.item(o,i==null?void 0:i.id)},[u]);let m=Ia(o,a,[e.value,e.children,a],e.keywords),f=Ur(),g=Be(C=>C.value&&C.value===m.current),v=Be(C=>u||c.filter()===!1?!0:C.search?C.filtered.items.get(o)>0:!0);l.useEffect(()=>{let C=a.current;if(!(!C||e.disabled))return C.addEventListener(yr,x),()=>C.removeEventListener(yr,x)},[v,e.onSelect,e.disabled]);function x(){var C,j;h(),(j=(C=d.current).onSelect)==null||j.call(C,m.current)}function h(){f.setState("value",m.current,!0)}if(!v)return null;let{disabled:p,value:b,onSelect:y,forceMount:w,keywords:N,...S}=e;return l.createElement(Z.div,{ref:We(a,t),...S,id:o,"cmdk-item":"",role:"option","aria-disabled":!!p,"aria-selected":!!g,"data-disabled":!!p,"data-selected":!!g,onPointerMove:p||c.getDisablePointerSelection()?void 0:h,onClick:p?void 0:x},e.children)}),Kr=l.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:o,...a}=e,i=me(),c=l.useRef(null),d=l.useRef(null),u=me(),m=zt(),f=Be(v=>o||m.filter()===!1?!0:v.search?v.filtered.groups.has(i):!0);rt(()=>m.group(i),[]),Ia(i,c,[e.value,e.heading,d]);let g=l.useMemo(()=>({id:i,forceMount:o}),[o]);return l.createElement(Z.div,{ref:We(c,t),...a,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},n&&l.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),Ln(e,v=>l.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},l.createElement(Pa.Provider,{value:g},v))))}),bm=l.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,o=l.useRef(null),a=Be(i=>!i.search);return!n&&!a?null:l.createElement(Z.div,{ref:We(o,t),...r,"cmdk-separator":"",role:"separator"})}),qr=l.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,o=e.value!=null,a=Ur(),i=Be(u=>u.search),c=Be(u=>u.selectedItemId),d=zt();return l.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),l.createElement(Z.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":c,id:d.inputId,type:"text",value:o?e.value:i,onChange:u=>{o||a.setState("search",u.target.value),n==null||n(u.target.value)}})}),Yr=l.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...o}=e,a=l.useRef(null),i=l.useRef(null),c=Be(u=>u.selectedItemId),d=zt();return l.useEffect(()=>{if(i.current&&a.current){let u=i.current,m=a.current,f,g=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let v=u.offsetHeight;m.style.setProperty("--cmdk-list-height",v.toFixed(1)+"px")})});return g.observe(u),()=>{cancelAnimationFrame(f),g.unobserve(u)}}},[]),l.createElement(Z.div,{ref:We(a,t),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":c,"aria-label":r,id:d.listId},Ln(e,u=>l.createElement("div",{ref:We(i,d.listInnerRef),"cmdk-list-sizer":""},u)))}),ym=l.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:a,container:i,...c}=e;return l.createElement(Na,{open:n,onOpenChange:r},l.createElement(ja,{container:i},l.createElement(Gr,{"cmdk-overlay":"",className:o}),l.createElement(Hr,{"aria-label":e.label,"cmdk-dialog":"",className:a},l.createElement(Aa,{ref:t,...c}))))}),Xr=l.forwardRef((e,t)=>Be(n=>n.filtered.count===0)?l.createElement(Z.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),wm=l.forwardRef((e,t)=>{let{progress:n,children:r,label:o="Loading...",...a}=e;return l.createElement(Z.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},Ln(e,i=>l.createElement("div",{"aria-hidden":!0},i)))}),Ta=Object.assign(Aa,{List:Yr,Item:yn,Input:qr,Group:Kr,Separator:bm,Dialog:ym,Empty:Xr,Loading:wm});function Nm(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function jm(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function Oa(e){let t=l.useRef(e);return rt(()=>{t.current=e}),t}var rt=typeof window>"u"?l.useEffect:l.useLayoutEffect;function pt(e){let t=l.useRef();return t.current===void 0&&(t.current=e()),t}function Be(e){let t=Ur(),n=()=>e(t.snapshot());return l.useSyncExternalStore(t.subscribe,n,n)}function Ia(e,t,n,r=[]){let o=l.useRef(),a=zt();return rt(()=>{var i;let c=(()=>{var u;for(let m of n){if(typeof m=="string")return m.trim();if(typeof m=="object"&&"current"in m)return m.current?(u=m.current.textContent)==null?void 0:u.trim():o.current}})(),d=r.map(u=>u.trim());a.value(e,c,d),(i=t.current)==null||i.setAttribute(ht,c),o.current=c}),o}var Sm=()=>{let[e,t]=l.useState(),n=pt(()=>new Map);return rt(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,o)=>{n.current.set(r,o),t({})}};function Cm(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Ln({asChild:e,children:t},n){return e&&l.isValidElement(t)?l.cloneElement(Cm(t),{ref:t.ref},n(t.props.children)):n(t)}var km={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Em=["top","right","bottom","left"],ze=Math.min,ge=Math.max,wn=Math.round,nn=Math.floor,Pe=e=>({x:e,y:e}),Rm={left:"right",right:"left",bottom:"top",top:"bottom"},Pm={start:"end",end:"start"};function wr(e,t,n){return ge(e,ze(t,n))}function De(e,t){return typeof e=="function"?e(t):e}function Me(e){return e.split("-")[0]}function Ct(e){return e.split("-")[1]}function Qr(e){return e==="x"?"y":"x"}function Jr(e){return e==="y"?"height":"width"}const Am=new Set(["top","bottom"]);function Re(e){return Am.has(Me(e))?"y":"x"}function Zr(e){return Qr(Re(e))}function Tm(e,t,n){n===void 0&&(n=!1);const r=Ct(e),o=Zr(e),a=Jr(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Nn(i)),[i,Nn(i)]}function Om(e){const t=Nn(e);return[Nr(e),t,Nr(t)]}function Nr(e){return e.replace(/start|end/g,t=>Pm[t])}const Ys=["left","right"],Xs=["right","left"],Im=["top","bottom"],Dm=["bottom","top"];function Mm(e,t,n){switch(e){case"top":case"bottom":return n?t?Xs:Ys:t?Ys:Xs;case"left":case"right":return t?Im:Dm;default:return[]}}function Lm(e,t,n,r){const o=Ct(e);let a=Mm(Me(e),n==="start",r);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(Nr)))),a}function Nn(e){return e.replace(/left|right|bottom|top/g,t=>Rm[t])}function $m(e){return{top:0,right:0,bottom:0,left:0,...e}}function Da(e){return typeof e!="number"?$m(e):{top:e,right:e,bottom:e,left:e}}function jn(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function Qs(e,t,n){let{reference:r,floating:o}=e;const a=Re(t),i=Zr(t),c=Jr(i),d=Me(t),u=a==="y",m=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,g=r[c]/2-o[c]/2;let v;switch(d){case"top":v={x:m,y:r.y-o.height};break;case"bottom":v={x:m,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-o.width,y:f};break;default:v={x:r.x,y:r.y}}switch(Ct(t)){case"start":v[i]-=g*(n&&u?-1:1);break;case"end":v[i]+=g*(n&&u?-1:1);break}return v}async function _m(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:a,rects:i,elements:c,strategy:d}=e,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:g=!1,padding:v=0}=De(t,e),x=Da(v),p=c[g?f==="floating"?"reference":"floating":f],b=jn(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(p)))==null||n?p:p.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:u,rootBoundary:m,strategy:d})),y=f==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),N=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},S=jn(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:w,strategy:d}):y);return{top:(b.top-S.top+x.top)/N.y,bottom:(S.bottom-b.bottom+x.bottom)/N.y,left:(b.left-S.left+x.left)/N.x,right:(S.right-b.right+x.right)/N.x}}const Fm=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,c=a.filter(Boolean),d=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:m,y:f}=Qs(u,r,d),g=r,v={},x=0;for(let p=0;p<c.length;p++){var h;const{name:b,fn:y}=c[p],{x:w,y:N,data:S,reset:C}=await y({x:m,y:f,initialPlacement:r,placement:g,strategy:o,middlewareData:v,rects:u,platform:{...i,detectOverflow:(h=i.detectOverflow)!=null?h:_m},elements:{reference:e,floating:t}});m=w??m,f=N??f,v={...v,[b]:{...v[b],...S}},C&&x<=50&&(x++,typeof C=="object"&&(C.placement&&(g=C.placement),C.rects&&(u=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):C.rects),{x:m,y:f}=Qs(u,g,d)),p=-1)}return{x:m,y:f,placement:g,strategy:o,middlewareData:v}},Wm=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:a,platform:i,elements:c,middlewareData:d}=t,{element:u,padding:m=0}=De(e,t)||{};if(u==null)return{};const f=Da(m),g={x:n,y:r},v=Zr(o),x=Jr(v),h=await i.getDimensions(u),p=v==="y",b=p?"top":"left",y=p?"bottom":"right",w=p?"clientHeight":"clientWidth",N=a.reference[x]+a.reference[v]-g[v]-a.floating[x],S=g[v]-a.reference[v],C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let j=C?C[w]:0;(!j||!await(i.isElement==null?void 0:i.isElement(C)))&&(j=c.floating[w]||a.floating[x]);const R=N/2-S/2,D=j/2-h[x]/2-1,F=ze(f[b],D),I=ze(f[y],D),B=F,z=j-h[x]-I,E=j/2-h[x]/2+R,O=wr(B,E,z),T=!d.arrow&&Ct(o)!=null&&E!==O&&a.reference[x]/2-(E<B?F:I)-h[x]/2<0,L=T?E<B?E-B:E-z:0;return{[v]:g[v]+L,data:{[v]:O,centerOffset:E-O-L,...T&&{alignmentOffset:L}},reset:T}}}),Vm=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:c,platform:d,elements:u}=t,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:h=!0,...p}=De(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=Me(o),y=Re(c),w=Me(c)===c,N=await(d.isRTL==null?void 0:d.isRTL(u.floating)),S=g||(w||!h?[Nn(c)]:Om(c)),C=x!=="none";!g&&C&&S.push(...Lm(c,h,x,N));const j=[c,...S],R=await d.detectOverflow(t,p),D=[];let F=((r=a.flip)==null?void 0:r.overflows)||[];if(m&&D.push(R[b]),f){const E=Tm(o,i,N);D.push(R[E[0]],R[E[1]])}if(F=[...F,{placement:o,overflows:D}],!D.every(E=>E<=0)){var I,B;const E=(((I=a.flip)==null?void 0:I.index)||0)+1,O=j[E];if(O&&(!(f==="alignment"?y!==Re(O):!1)||F.every(A=>Re(A.placement)===y?A.overflows[0]>0:!0)))return{data:{index:E,overflows:F},reset:{placement:O}};let T=(B=F.filter(L=>L.overflows[0]<=0).sort((L,A)=>L.overflows[1]-A.overflows[1])[0])==null?void 0:B.placement;if(!T)switch(v){case"bestFit":{var z;const L=(z=F.filter(A=>{if(C){const G=Re(A.placement);return G===y||G==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(G=>G>0).reduce((G,U)=>G+U,0)]).sort((A,G)=>A[1]-G[1])[0])==null?void 0:z[0];L&&(T=L);break}case"initialPlacement":T=c;break}if(o!==T)return{reset:{placement:T}}}return{}}}};function Js(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Zs(e){return Em.some(t=>e[t]>=0)}const Bm=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,{strategy:o="referenceHidden",...a}=De(e,t);switch(o){case"referenceHidden":{const i=await r.detectOverflow(t,{...a,elementContext:"reference"}),c=Js(i,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Zs(c)}}}case"escaped":{const i=await r.detectOverflow(t,{...a,altBoundary:!0}),c=Js(i,n.floating);return{data:{escapedOffsets:c,escaped:Zs(c)}}}default:return{}}}}},Ma=new Set(["left","top"]);async function zm(e,t){const{placement:n,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Me(n),c=Ct(n),d=Re(n)==="y",u=Ma.has(i)?-1:1,m=a&&d?-1:1,f=De(t,e);let{mainAxis:g,crossAxis:v,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return c&&typeof x=="number"&&(v=c==="end"?x*-1:x),d?{x:v*m,y:g*u}:{x:g*u,y:v*m}}const Gm=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:a,placement:i,middlewareData:c}=t,d=await zm(t,e);return i===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+d.x,y:a+d.y,data:{...d,placement:i}}}}},Hm=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o,platform:a}=t,{mainAxis:i=!0,crossAxis:c=!1,limiter:d={fn:b=>{let{x:y,y:w}=b;return{x:y,y:w}}},...u}=De(e,t),m={x:n,y:r},f=await a.detectOverflow(t,u),g=Re(Me(o)),v=Qr(g);let x=m[v],h=m[g];if(i){const b=v==="y"?"top":"left",y=v==="y"?"bottom":"right",w=x+f[b],N=x-f[y];x=wr(w,x,N)}if(c){const b=g==="y"?"top":"left",y=g==="y"?"bottom":"right",w=h+f[b],N=h-f[y];h=wr(w,h,N)}const p=d.fn({...t,[v]:x,[g]:h});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[v]:i,[g]:c}}}}}},Um=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:a,middlewareData:i}=t,{offset:c=0,mainAxis:d=!0,crossAxis:u=!0}=De(e,t),m={x:n,y:r},f=Re(o),g=Qr(f);let v=m[g],x=m[f];const h=De(c,t),p=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(d){const w=g==="y"?"height":"width",N=a.reference[g]-a.floating[w]+p.mainAxis,S=a.reference[g]+a.reference[w]-p.mainAxis;v<N?v=N:v>S&&(v=S)}if(u){var b,y;const w=g==="y"?"width":"height",N=Ma.has(Me(o)),S=a.reference[f]-a.floating[w]+(N&&((b=i.offset)==null?void 0:b[f])||0)+(N?0:p.crossAxis),C=a.reference[f]+a.reference[w]+(N?0:((y=i.offset)==null?void 0:y[f])||0)-(N?p.crossAxis:0);x<S?x=S:x>C&&(x=C)}return{[g]:v,[f]:x}}}},Km=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:a,platform:i,elements:c}=t,{apply:d=()=>{},...u}=De(e,t),m=await i.detectOverflow(t,u),f=Me(o),g=Ct(o),v=Re(o)==="y",{width:x,height:h}=a.floating;let p,b;f==="top"||f==="bottom"?(p=f,b=g===(await(i.isRTL==null?void 0:i.isRTL(c.floating))?"start":"end")?"left":"right"):(b=f,p=g==="end"?"top":"bottom");const y=h-m.top-m.bottom,w=x-m.left-m.right,N=ze(h-m[p],y),S=ze(x-m[b],w),C=!t.middlewareData.shift;let j=N,R=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(R=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(j=y),C&&!g){const F=ge(m.left,0),I=ge(m.right,0),B=ge(m.top,0),z=ge(m.bottom,0);v?R=x-2*(F!==0||I!==0?F+I:ge(m.left,m.right)):j=h-2*(B!==0||z!==0?B+z:ge(m.top,m.bottom))}await d({...t,availableWidth:R,availableHeight:j});const D=await i.getDimensions(c.floating);return x!==D.width||h!==D.height?{reset:{rects:!0}}:{}}}};function $n(){return typeof window<"u"}function kt(e){return La(e)?(e.nodeName||"").toLowerCase():"#document"}function ve(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Oe(e){var t;return(t=(La(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function La(e){return $n()?e instanceof Node||e instanceof ve(e).Node:!1}function je(e){return $n()?e instanceof Element||e instanceof ve(e).Element:!1}function Te(e){return $n()?e instanceof HTMLElement||e instanceof ve(e).HTMLElement:!1}function eo(e){return!$n()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ve(e).ShadowRoot}const qm=new Set(["inline","contents"]);function Gt(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=Se(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!qm.has(o)}const Ym=new Set(["table","td","th"]);function Xm(e){return Ym.has(kt(e))}const Qm=[":popover-open",":modal"];function _n(e){return Qm.some(t=>{try{return e.matches(t)}catch{return!1}})}const Jm=["transform","translate","scale","rotate","perspective"],Zm=["transform","translate","scale","rotate","perspective","filter"],eh=["paint","layout","strict","content"];function es(e){const t=ts(),n=je(e)?Se(e):e;return Jm.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Zm.some(r=>(n.willChange||"").includes(r))||eh.some(r=>(n.contain||"").includes(r))}function th(e){let t=Ge(e);for(;Te(t)&&!wt(t);){if(es(t))return t;if(_n(t))return null;t=Ge(t)}return null}function ts(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const nh=new Set(["html","body","#document"]);function wt(e){return nh.has(kt(e))}function Se(e){return ve(e).getComputedStyle(e)}function Fn(e){return je(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ge(e){if(kt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||eo(e)&&e.host||Oe(e);return eo(t)?t.host:t}function $a(e){const t=Ge(e);return wt(t)?e.ownerDocument?e.ownerDocument.body:e.body:Te(t)&&Gt(t)?t:$a(t)}function Wt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=$a(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),i=ve(o);if(a){const c=jr(i);return t.concat(i,i.visualViewport||[],Gt(o)?o:[],c&&n?Wt(c):[])}return t.concat(o,Wt(o,[],n))}function jr(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _a(e){const t=Se(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Te(e),a=o?e.offsetWidth:n,i=o?e.offsetHeight:r,c=wn(n)!==a||wn(r)!==i;return c&&(n=a,r=i),{width:n,height:r,$:c}}function ns(e){return je(e)?e:e.contextElement}function vt(e){const t=ns(e);if(!Te(t))return Pe(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:a}=_a(t);let i=(a?wn(n.width):n.width)/r,c=(a?wn(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!c||!Number.isFinite(c))&&(c=1),{x:i,y:c}}const rh=Pe(0);function Fa(e){const t=ve(e);return!ts()||!t.visualViewport?rh:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function sh(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ve(e)?!1:t}function st(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=ns(e);let i=Pe(1);t&&(r?je(r)&&(i=vt(r)):i=vt(e));const c=sh(a,n,r)?Fa(a):Pe(0);let d=(o.left+c.x)/i.x,u=(o.top+c.y)/i.y,m=o.width/i.x,f=o.height/i.y;if(a){const g=ve(a),v=r&&je(r)?ve(r):r;let x=g,h=jr(x);for(;h&&r&&v!==x;){const p=vt(h),b=h.getBoundingClientRect(),y=Se(h),w=b.left+(h.clientLeft+parseFloat(y.paddingLeft))*p.x,N=b.top+(h.clientTop+parseFloat(y.paddingTop))*p.y;d*=p.x,u*=p.y,m*=p.x,f*=p.y,d+=w,u+=N,x=ve(h),h=jr(x)}}return jn({width:m,height:f,x:d,y:u})}function Wn(e,t){const n=Fn(e).scrollLeft;return t?t.left+n:st(Oe(e)).left+n}function Wa(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Wn(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function oh(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const a=o==="fixed",i=Oe(r),c=t?_n(t.floating):!1;if(r===i||c&&a)return n;let d={scrollLeft:0,scrollTop:0},u=Pe(1);const m=Pe(0),f=Te(r);if((f||!f&&!a)&&((kt(r)!=="body"||Gt(i))&&(d=Fn(r)),Te(r))){const v=st(r);u=vt(r),m.x=v.x+r.clientLeft,m.y=v.y+r.clientTop}const g=i&&!f&&!a?Wa(i,d):Pe(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-d.scrollLeft*u.x+m.x+g.x,y:n.y*u.y-d.scrollTop*u.y+m.y+g.y}}function ah(e){return Array.from(e.getClientRects())}function ih(e){const t=Oe(e),n=Fn(e),r=e.ownerDocument.body,o=ge(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=ge(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Wn(e);const c=-n.scrollTop;return Se(r).direction==="rtl"&&(i+=ge(t.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:c}}const to=25;function ch(e,t){const n=ve(e),r=Oe(e),o=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,c=0,d=0;if(o){a=o.width,i=o.height;const m=ts();(!m||m&&t==="fixed")&&(c=o.offsetLeft,d=o.offsetTop)}const u=Wn(r);if(u<=0){const m=r.ownerDocument,f=m.body,g=getComputedStyle(f),v=m.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,x=Math.abs(r.clientWidth-f.clientWidth-v);x<=to&&(a-=x)}else u<=to&&(a+=u);return{width:a,height:i,x:c,y:d}}const lh=new Set(["absolute","fixed"]);function dh(e,t){const n=st(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,a=Te(e)?vt(e):Pe(1),i=e.clientWidth*a.x,c=e.clientHeight*a.y,d=o*a.x,u=r*a.y;return{width:i,height:c,x:d,y:u}}function no(e,t,n){let r;if(t==="viewport")r=ch(e,n);else if(t==="document")r=ih(Oe(e));else if(je(t))r=dh(t,n);else{const o=Fa(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return jn(r)}function Va(e,t){const n=Ge(e);return n===t||!je(n)||wt(n)?!1:Se(n).position==="fixed"||Va(n,t)}function uh(e,t){const n=t.get(e);if(n)return n;let r=Wt(e,[],!1).filter(c=>je(c)&&kt(c)!=="body"),o=null;const a=Se(e).position==="fixed";let i=a?Ge(e):e;for(;je(i)&&!wt(i);){const c=Se(i),d=es(i);!d&&c.position==="fixed"&&(o=null),(a?!d&&!o:!d&&c.position==="static"&&!!o&&lh.has(o.position)||Gt(i)&&!d&&Va(e,i))?r=r.filter(m=>m!==i):o=c,i=Ge(i)}return t.set(e,r),r}function fh(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?_n(t)?[]:uh(t,this._c):[].concat(n),r],c=i[0],d=i.reduce((u,m)=>{const f=no(t,m,o);return u.top=ge(f.top,u.top),u.right=ze(f.right,u.right),u.bottom=ze(f.bottom,u.bottom),u.left=ge(f.left,u.left),u},no(t,c,o));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function mh(e){const{width:t,height:n}=_a(e);return{width:t,height:n}}function hh(e,t,n){const r=Te(t),o=Oe(t),a=n==="fixed",i=st(e,!0,a,t);let c={scrollLeft:0,scrollTop:0};const d=Pe(0);function u(){d.x=Wn(o)}if(r||!r&&!a)if((kt(t)!=="body"||Gt(o))&&(c=Fn(t)),r){const v=st(t,!0,a,t);d.x=v.x+t.clientLeft,d.y=v.y+t.clientTop}else o&&u();a&&!r&&o&&u();const m=o&&!r&&!a?Wa(o,c):Pe(0),f=i.left+c.scrollLeft-d.x-m.x,g=i.top+c.scrollTop-d.y-m.y;return{x:f,y:g,width:i.width,height:i.height}}function ir(e){return Se(e).position==="static"}function ro(e,t){if(!Te(e)||Se(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Oe(e)===n&&(n=n.ownerDocument.body),n}function Ba(e,t){const n=ve(e);if(_n(e))return n;if(!Te(e)){let o=Ge(e);for(;o&&!wt(o);){if(je(o)&&!ir(o))return o;o=Ge(o)}return n}let r=ro(e,t);for(;r&&Xm(r)&&ir(r);)r=ro(r,t);return r&&wt(r)&&ir(r)&&!es(r)?n:r||th(e)||n}const ph=async function(e){const t=this.getOffsetParent||Ba,n=this.getDimensions,r=await n(e.floating);return{reference:hh(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gh(e){return Se(e).direction==="rtl"}const xh={convertOffsetParentRelativeRectToViewportRelativeRect:oh,getDocumentElement:Oe,getClippingRect:fh,getOffsetParent:Ba,getElementRects:ph,getClientRects:ah,getDimensions:mh,getScale:vt,isElement:je,isRTL:gh};function za(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function vh(e,t){let n=null,r;const o=Oe(e);function a(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function i(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),a();const u=e.getBoundingClientRect(),{left:m,top:f,width:g,height:v}=u;if(c||t(),!g||!v)return;const x=nn(f),h=nn(o.clientWidth-(m+g)),p=nn(o.clientHeight-(f+v)),b=nn(m),w={rootMargin:-x+"px "+-h+"px "+-p+"px "+-b+"px",threshold:ge(0,ze(1,d))||1};let N=!0;function S(C){const j=C[0].intersectionRatio;if(j!==d){if(!N)return i();j?i(!1,j):r=setTimeout(()=>{i(!1,1e-7)},1e3)}j===1&&!za(u,e.getBoundingClientRect())&&i(),N=!1}try{n=new IntersectionObserver(S,{...w,root:o.ownerDocument})}catch{n=new IntersectionObserver(S,w)}n.observe(e)}return i(!0),a}function bh(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,u=ns(e),m=o||a?[...u?Wt(u):[],...Wt(t)]:[];m.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const f=u&&c?vh(u,n):null;let g=-1,v=null;i&&(v=new ResizeObserver(b=>{let[y]=b;y&&y.target===u&&v&&(v.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var w;(w=v)==null||w.observe(t)})),n()}),u&&!d&&v.observe(u),v.observe(t));let x,h=d?st(e):null;d&&p();function p(){const b=st(e);h&&!za(h,b)&&n(),h=b,x=requestAnimationFrame(p)}return n(),()=>{var b;m.forEach(y=>{o&&y.removeEventListener("scroll",n),a&&y.removeEventListener("resize",n)}),f==null||f(),(b=v)==null||b.disconnect(),v=null,d&&cancelAnimationFrame(x)}}const yh=Gm,wh=Hm,Nh=Vm,jh=Km,Sh=Bm,so=Wm,Ch=Um,kh=(e,t,n)=>{const r=new Map,o={platform:xh,...n},a={...o.platform,_c:r};return Fm(e,t,{...o,platform:a})};var Eh=typeof document<"u",Rh=function(){},mn=Eh?l.useLayoutEffect:Rh;function Sn(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Sn(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!Sn(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Ga(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function oo(e,t){const n=Ga(e);return Math.round(t*n)/n}function cr(e){const t=l.useRef(e);return mn(()=>{t.current=e}),t}function Ph(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:c=!0,whileElementsMounted:d,open:u}=e,[m,f]=l.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,v]=l.useState(r);Sn(g,r)||v(r);const[x,h]=l.useState(null),[p,b]=l.useState(null),y=l.useCallback(A=>{A!==C.current&&(C.current=A,h(A))},[]),w=l.useCallback(A=>{A!==j.current&&(j.current=A,b(A))},[]),N=a||x,S=i||p,C=l.useRef(null),j=l.useRef(null),R=l.useRef(m),D=d!=null,F=cr(d),I=cr(o),B=cr(u),z=l.useCallback(()=>{if(!C.current||!j.current)return;const A={placement:t,strategy:n,middleware:g};I.current&&(A.platform=I.current),kh(C.current,j.current,A).then(G=>{const U={...G,isPositioned:B.current!==!1};E.current&&!Sn(R.current,U)&&(R.current=U,En.flushSync(()=>{f(U)}))})},[g,t,n,I,B]);mn(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(A=>({...A,isPositioned:!1})))},[u]);const E=l.useRef(!1);mn(()=>(E.current=!0,()=>{E.current=!1}),[]),mn(()=>{if(N&&(C.current=N),S&&(j.current=S),N&&S){if(F.current)return F.current(N,S,z);z()}},[N,S,z,F,D]);const O=l.useMemo(()=>({reference:C,floating:j,setReference:y,setFloating:w}),[y,w]),T=l.useMemo(()=>({reference:N,floating:S}),[N,S]),L=l.useMemo(()=>{const A={position:n,left:0,top:0};if(!T.floating)return A;const G=oo(T.floating,m.x),U=oo(T.floating,m.y);return c?{...A,transform:"translate("+G+"px, "+U+"px)",...Ga(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:U}},[n,c,T.floating,m.x,m.y]);return l.useMemo(()=>({...m,update:z,refs:O,elements:T,floatingStyles:L}),[m,z,O,T,L])}const Ah=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?so({element:r.current,padding:o}).fn(n):{}:r?so({element:r,padding:o}).fn(n):{}}}},Th=(e,t)=>({...yh(e),options:[e,t]}),Oh=(e,t)=>({...wh(e),options:[e,t]}),Ih=(e,t)=>({...Ch(e),options:[e,t]}),Dh=(e,t)=>({...Nh(e),options:[e,t]}),Mh=(e,t)=>({...jh(e),options:[e,t]}),Lh=(e,t)=>({...Sh(e),options:[e,t]}),$h=(e,t)=>({...Ah(e),options:[e,t]});var _h="Arrow",Ha=l.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...a}=e;return s.jsx(Z.svg,{...a,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ha.displayName=_h;var Fh=Ha;function Ua(e){const[t,n]=l.useState(void 0);return fe(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,c;if("borderBoxSize"in a){const d=a.borderBoxSize,u=Array.isArray(d)?d[0]:d;i=u.inlineSize,c=u.blockSize}else i=e.offsetWidth,c=e.offsetHeight;n({width:i,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var rs="Popper",[Ka,Vn]=He(rs),[Wh,qa]=Ka(rs),Ya=e=>{const{__scopePopper:t,children:n}=e,[r,o]=l.useState(null);return s.jsx(Wh,{scope:t,anchor:r,onAnchorChange:o,children:n})};Ya.displayName=rs;var Xa="PopperAnchor",Qa=l.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,a=qa(Xa,n),i=l.useRef(null),c=ce(t,i),d=l.useRef(null);return l.useEffect(()=>{const u=d.current;d.current=(r==null?void 0:r.current)||i.current,u!==d.current&&a.onAnchorChange(d.current)}),r?null:s.jsx(Z.div,{...o,ref:c})});Qa.displayName=Xa;var ss="PopperContent",[Vh,Bh]=Ka(ss),Ja=l.forwardRef((e,t)=>{var $,Y,Q,J,ee,se;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:m=0,sticky:f="partial",hideWhenDetached:g=!1,updatePositionStrategy:v="optimized",onPlaced:x,...h}=e,p=qa(ss,n),[b,y]=l.useState(null),w=ce(t,pe=>y(pe)),[N,S]=l.useState(null),C=Ua(N),j=(C==null?void 0:C.width)??0,R=(C==null?void 0:C.height)??0,D=r+(a!=="center"?"-"+a:""),F=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},I=Array.isArray(u)?u:[u],B=I.length>0,z={padding:F,boundary:I.filter(Gh),altBoundary:B},{refs:E,floatingStyles:O,placement:T,isPositioned:L,middlewareData:A}=Ph({strategy:"fixed",placement:D,whileElementsMounted:(...pe)=>bh(...pe,{animationFrame:v==="always"}),elements:{reference:p.anchor},middleware:[Th({mainAxis:o+R,alignmentAxis:i}),d&&Oh({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Ih():void 0,...z}),d&&Dh({...z}),Mh({...z,apply:({elements:pe,rects:ke,availableWidth:Rt,availableHeight:Pt})=>{const{width:At,height:_c}=ke.reference,Kt=pe.floating.style;Kt.setProperty("--radix-popper-available-width",`${Rt}px`),Kt.setProperty("--radix-popper-available-height",`${Pt}px`),Kt.setProperty("--radix-popper-anchor-width",`${At}px`),Kt.setProperty("--radix-popper-anchor-height",`${_c}px`)}}),N&&$h({element:N,padding:c}),Hh({arrowWidth:j,arrowHeight:R}),g&&Lh({strategy:"referenceHidden",...z})]}),[G,U]=ti(T),M=Ve(x);fe(()=>{L&&(M==null||M())},[L,M]);const k=($=A.arrow)==null?void 0:$.x,W=(Y=A.arrow)==null?void 0:Y.y,P=((Q=A.arrow)==null?void 0:Q.centerOffset)!==0,[_,H]=l.useState();return fe(()=>{b&&H(window.getComputedStyle(b).zIndex)},[b]),s.jsx("div",{ref:E.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:L?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_,"--radix-popper-transform-origin":[(J=A.transformOrigin)==null?void 0:J.x,(ee=A.transformOrigin)==null?void 0:ee.y].join(" "),...((se=A.hide)==null?void 0:se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(Vh,{scope:n,placedSide:G,onArrowChange:S,arrowX:k,arrowY:W,shouldHideArrow:P,children:s.jsx(Z.div,{"data-side":G,"data-align":U,...h,ref:w,style:{...h.style,animation:L?void 0:"none"}})})})});Ja.displayName=ss;var Za="PopperArrow",zh={top:"bottom",right:"left",bottom:"top",left:"right"},ei=l.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,a=Bh(Za,r),i=zh[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(Fh,{...o,ref:n,style:{...o.style,display:"block"}})})});ei.displayName=Za;function Gh(e){return e!==null}var Hh=e=>({name:"transformOrigin",options:e,fn(t){var p,b,y;const{placement:n,rects:r,middlewareData:o}=t,i=((p=o.arrow)==null?void 0:p.centerOffset)!==0,c=i?0:e.arrowWidth,d=i?0:e.arrowHeight,[u,m]=ti(n),f={start:"0%",center:"50%",end:"100%"}[m],g=(((b=o.arrow)==null?void 0:b.x)??0)+c/2,v=(((y=o.arrow)==null?void 0:y.y)??0)+d/2;let x="",h="";return u==="bottom"?(x=i?f:`${g}px`,h=`${-d}px`):u==="top"?(x=i?f:`${g}px`,h=`${r.floating.height+d}px`):u==="right"?(x=`${-d}px`,h=i?f:`${v}px`):u==="left"&&(x=`${r.floating.width+d}px`,h=i?f:`${v}px`),{data:{x,y:h}}}});function ti(e){const[t,n="center"]=e.split("-");return[t,n]}var ni=Ya,os=Qa,ri=Ja,si=ei,Bn="Popover",[oi]=He(Bn,[Vn]),Ht=Vn(),[Uh,Ke]=oi(Bn),ai=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!1}=e,c=Ht(t),d=l.useRef(null),[u,m]=l.useState(!1),[f,g]=tt({prop:r,defaultProp:o??!1,onChange:a,caller:Bn});return s.jsx(ni,{...c,children:s.jsx(Uh,{scope:t,contentId:me(),triggerRef:d,open:f,onOpenChange:g,onOpenToggle:l.useCallback(()=>g(v=>!v),[g]),hasCustomAnchor:u,onCustomAnchorAdd:l.useCallback(()=>m(!0),[]),onCustomAnchorRemove:l.useCallback(()=>m(!1),[]),modal:i,children:n})})};ai.displayName=Bn;var ii="PopoverAnchor",Kh=l.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Ke(ii,n),a=Ht(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=o;return l.useEffect(()=>(i(),()=>c()),[i,c]),s.jsx(os,{...a,...r,ref:t})});Kh.displayName=ii;var ci="PopoverTrigger",li=l.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Ke(ci,n),a=Ht(n),i=ce(t,o.triggerRef),c=s.jsx(Z.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":hi(o.open),...r,ref:i,onClick:te(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?c:s.jsx(os,{asChild:!0,...a,children:c})});li.displayName=ci;var as="PopoverPortal",[qh,Yh]=oi(as,{forceMount:void 0}),di=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,a=Ke(as,t);return s.jsx(qh,{scope:t,forceMount:n,children:s.jsx(Ue,{present:n||a.open,children:s.jsx(On,{asChild:!0,container:o,children:r})})})};di.displayName=as;var Nt="PopoverContent",ui=l.forwardRef((e,t)=>{const n=Yh(Nt,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,a=Ke(Nt,e.__scopePopover);return s.jsx(Ue,{present:r||a.open,children:a.modal?s.jsx(Qh,{...o,ref:t}):s.jsx(Jh,{...o,ref:t})})});ui.displayName=Nt;var Xh=yt("PopoverContent.RemoveScroll"),Qh=l.forwardRef((e,t)=>{const n=Ke(Nt,e.__scopePopover),r=l.useRef(null),o=ce(t,r),a=l.useRef(!1);return l.useEffect(()=>{const i=r.current;if(i)return Wr(i)},[]),s.jsx(Dn,{as:Xh,allowPinchZoom:!0,children:s.jsx(fi,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:te(e.onCloseAutoFocus,i=>{var c;i.preventDefault(),a.current||(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:te(e.onPointerDownOutside,i=>{const c=i.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:te(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Jh=l.forwardRef((e,t)=>{const n=Ke(Nt,e.__scopePopover),r=l.useRef(!1),o=l.useRef(!1);return s.jsx(fi,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,c;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var d,u;(d=e.onInteractOutside)==null||d.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),fi=l.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:m,...f}=e,g=Ke(Nt,n),v=Ht(n);return Fr(),s.jsx(Tn,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:s.jsx(An,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:m,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onDismiss:()=>g.onOpenChange(!1),children:s.jsx(ri,{"data-state":hi(g.open),role:"dialog",id:g.contentId,...v,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),mi="PopoverClose",Zh=l.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Ke(mi,n);return s.jsx(Z.button,{type:"button",...r,ref:t,onClick:te(e.onClick,()=>o.onOpenChange(!1))})});Zh.displayName=mi;var ep="PopoverArrow",tp=l.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Ht(n);return s.jsx(si,{...o,...r,ref:t})});tp.displayName=ep;function hi(e){return e?"open":"closed"}var is=ai,cs=li,ls=di,ds=ui;function rn({options:e,value:t,onValueChange:n,placeholder:r="Select...",searchPlaceholder:o="Search...",emptyMessage:a="No results found.",disabled:i=!1,loading:c=!1,className:d,clearable:u=!1,showAllOption:m=!0,allOptionLabel:f="All"}){const[g,v]=l.useState(!1),[x,h]=l.useState(""),p=e.find(S=>S.value===t),b=p?p.count!==void 0?`${p.label} (${p.count})`:p.label:t===""&&m?f:r,y=l.useCallback(S=>{n(S===t?"":S),v(!1),h("")},[n,t]),w=l.useCallback(S=>{S.stopPropagation(),n("")},[n]),N=l.useCallback((S,C)=>{if(!C)return 1;const j=e.find(B=>B.value===S),D=((j==null?void 0:j.label)||S).toLowerCase(),F=C.toLowerCase();if(D===F)return 1;if(D.startsWith(F))return .9;if(D.includes(F))return .8;let I=0;for(let B=0;B<D.length&&I<F.length;B++)D[B]===F[I]&&I++;return I===F.length?.6:0},[e]);return s.jsxs(is,{open:g,onOpenChange:v,children:[s.jsx(cs,{asChild:!0,children:s.jsxs("button",{type:"button",role:"combobox","aria-expanded":g,"aria-haspopup":"listbox",disabled:i||c,className:V("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background","placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",d),children:[s.jsx("span",{className:"truncate text-left flex-1",children:c?"Loading...":b}),s.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[u&&t&&!i&&s.jsx("span",{role:"button",tabIndex:0,onClick:w,onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&w(S)},className:"rounded-sm opacity-50 hover:opacity-100 cursor-pointer",children:s.jsx(vn,{className:"h-3 w-3"})}),s.jsx(qo,{className:"h-4 w-4 shrink-0 opacity-50"})]})]})}),s.jsx(ls,{children:s.jsx(ds,{className:V("z-50 min-w-[var(--radix-popover-trigger-width)] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=top]:slide-in-from-bottom-2"),sideOffset:4,align:"start",children:s.jsxs(Ta,{filter:N,className:"w-full",children:[s.jsx("div",{className:"flex items-center border-b px-3",children:s.jsx(qr,{placeholder:o,value:x,onValueChange:h,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})}),s.jsxs(Yr,{className:"max-h-[300px] overflow-y-auto p-1",children:[s.jsx(Xr,{className:"py-6 text-center text-sm text-muted-foreground",children:a}),s.jsxs(Kr,{children:[m&&s.jsxs(yn,{value:"_all",onSelect:()=>y(""),className:V("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none","data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground","hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(Ft,{className:V("mr-2 h-4 w-4",t===""?"opacity-100":"opacity-0")}),f]}),e.map(S=>s.jsxs(yn,{value:S.value,onSelect:()=>y(S.value),className:V("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none","data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground","hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(Ft,{className:V("mr-2 h-4 w-4",t===S.value?"opacity-100":"opacity-0")}),s.jsx("span",{className:"flex-1 truncate",children:S.label}),S.count!==void 0&&s.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",S.count,")"]})]},S.value))]})]})]})})})]})}function pi(e){const t=l.useRef({value:e,previous:e});return l.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var zn="Checkbox",[np]=He(zn),[rp,us]=np(zn);function sp(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:o,disabled:a,form:i,name:c,onCheckedChange:d,required:u,value:m="on",internal_do_not_use_render:f}=e,[g,v]=tt({prop:n,defaultProp:o??!1,onChange:d,caller:zn}),[x,h]=l.useState(null),[p,b]=l.useState(null),y=l.useRef(!1),w=x?!!i||!!x.closest("form"):!0,N={checked:g,disabled:a,setChecked:v,control:x,setControl:h,name:c,form:i,value:m,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:Fe(o)?!1:o,isFormControl:w,bubbleInput:p,setBubbleInput:b};return s.jsx(rp,{scope:t,...N,children:op(f)?f(N):r})}var gi="CheckboxTrigger",xi=l.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},o)=>{const{control:a,value:i,disabled:c,checked:d,required:u,setControl:m,setChecked:f,hasConsumerStoppedPropagationRef:g,isFormControl:v,bubbleInput:x}=us(gi,e),h=ce(o,m),p=l.useRef(d);return l.useEffect(()=>{const b=a==null?void 0:a.form;if(b){const y=()=>f(p.current);return b.addEventListener("reset",y),()=>b.removeEventListener("reset",y)}},[a,f]),s.jsx(Z.button,{type:"button",role:"checkbox","aria-checked":Fe(d)?"mixed":d,"aria-required":u,"data-state":Ni(d),"data-disabled":c?"":void 0,disabled:c,value:i,...r,ref:h,onKeyDown:te(t,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:te(n,b=>{f(y=>Fe(y)?!0:!y),x&&v&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})})});xi.displayName=gi;var fs=l.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:a,required:i,disabled:c,value:d,onCheckedChange:u,form:m,...f}=e;return s.jsx(sp,{__scopeCheckbox:n,checked:o,defaultChecked:a,disabled:c,required:i,onCheckedChange:u,name:r,form:m,value:d,internal_do_not_use_render:({isFormControl:g})=>s.jsxs(s.Fragment,{children:[s.jsx(xi,{...f,ref:t,__scopeCheckbox:n}),g&&s.jsx(wi,{__scopeCheckbox:n})]})})});fs.displayName=zn;var vi="CheckboxIndicator",bi=l.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,a=us(vi,n);return s.jsx(Ue,{present:r||Fe(a.checked)||a.checked===!0,children:s.jsx(Z.span,{"data-state":Ni(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});bi.displayName=vi;var yi="CheckboxBubbleInput",wi=l.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:a,defaultChecked:i,required:c,disabled:d,name:u,value:m,form:f,bubbleInput:g,setBubbleInput:v}=us(yi,e),x=ce(n,v),h=pi(a),p=Ua(r);l.useEffect(()=>{const y=g;if(!y)return;const w=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(w,"checked").set,C=!o.current;if(h!==a&&S){const j=new Event("click",{bubbles:C});y.indeterminate=Fe(a),S.call(y,Fe(a)?!1:a),y.dispatchEvent(j)}},[g,h,a,o]);const b=l.useRef(Fe(a)?!1:a);return s.jsx(Z.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??b.current,required:c,disabled:d,name:u,value:m,form:f,...t,tabIndex:-1,ref:x,style:{...t.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});wi.displayName=yi;function op(e){return typeof e=="function"}function Fe(e){return e==="indeterminate"}function Ni(e){return Fe(e)?"indeterminate":e?"checked":"unchecked"}const ms=l.forwardRef(({className:e,...t},n)=>s.jsx(fs,{ref:n,className:V("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(bi,{className:V("flex items-center justify-center text-current"),children:s.jsx(Ft,{className:"h-4 w-4"})})}));ms.displayName=fs.displayName;function ji({presets:e,selectedPreset:t,onPresetSelect:n,onCustomRangeApply:r,customStart:o,customEnd:a,disabled:i=!1,className:c,displayLabel:d}){const[u,m]=l.useState(!1),[f,g]=l.useState(!1),[v,x]=l.useState(o||""),[h,p]=l.useState(a||"");l.useEffect(()=>{o&&x(o),a&&p(a)},[o,a]);const b=e.find(j=>j.key===t),y=d||(b==null?void 0:b.label)||"Select time range",w=j=>{n(j),g(!1),m(!1)},N=()=>{g(!0)},S=()=>{v&&h&&(r(v,h),g(!1),m(!1))},C=()=>{g(!1)};return s.jsxs(is,{open:u,onOpenChange:m,children:[s.jsx(cs,{asChild:!0,children:s.jsxs("button",{type:"button",disabled:i,className:V("flex h-10 items-center gap-2 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background","hover:bg-accent hover:text-accent-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",c),children:[s.jsx(gu,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"whitespace-nowrap",children:y}),s.jsx(_r,{className:"h-4 w-4 text-muted-foreground"})]})}),s.jsx(ls,{children:s.jsx(ds,{className:V("z-50 min-w-[200px] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=top]:slide-in-from-bottom-2"),sideOffset:4,align:"end",children:f?s.jsxs("div",{className:"p-4 min-w-[280px]",children:[s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx(ie,{htmlFor:"time-range-start",className:"text-xs text-muted-foreground font-semibold uppercase tracking-tight",children:"Start"}),s.jsx(he,{id:"time-range-start",type:"datetime-local",value:v,onChange:j=>x(j.target.value),className:"w-full",disabled:i})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx(ie,{htmlFor:"time-range-end",className:"text-xs text-muted-foreground font-semibold uppercase tracking-tight",children:"End"}),s.jsx(he,{id:"time-range-end",type:"datetime-local",value:h,onChange:j=>p(j.target.value),className:"w-full",disabled:i})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-3 border-t border-border",children:[s.jsx(X,{type:"button",variant:"ghost",size:"sm",onClick:C,children:"Back"}),s.jsx(X,{type:"button",size:"sm",onClick:S,disabled:!v||!h,children:"Apply"})]})]}):s.jsxs("div",{className:"p-1",children:[e.map(j=>s.jsx("button",{type:"button",onClick:()=>w(j.key),className:V("relative flex w-full cursor-pointer select-none items-center rounded-sm px-3 py-2 text-sm outline-none","hover:bg-accent hover:text-accent-foreground",t===j.key&&"bg-accent text-accent-foreground font-medium"),children:j.label},j.key)),s.jsx("div",{className:"my-1 h-px bg-border"}),s.jsx("button",{type:"button",onClick:N,className:V("relative flex w-full cursor-pointer select-none items-center rounded-sm px-3 py-2 text-sm outline-none","hover:bg-accent hover:text-accent-foreground",t==="custom"&&"bg-accent text-accent-foreground font-medium"),children:"Custom range..."})]})})})]})}const sn=[{key:"last15min",label:"Last 15 min",getValue:()=>({start:oe(Uo(new Date)),end:oe(new Date)})},{key:"last1hour",label:"Last hour",getValue:()=>({start:oe(et(new Date,1)),end:oe(new Date)})},{key:"last6hours",label:"Last 6 hours",getValue:()=>({start:oe(et(new Date,6)),end:oe(new Date)})},{key:"last24hours",label:"Last 24 hours",getValue:()=>({start:oe(et(new Date,24)),end:oe(new Date)})},{key:"last7days",label:"Last 7 days",getValue:()=>({start:oe(bt(new Date,7)),end:oe(new Date)})},{key:"last30days",label:"Last 30 days",getValue:()=>({start:oe(bt(new Date,30)),end:oe(new Date)})}],ap=300,ao=e=>{const t=new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return`${n}-${r}-${o}T${a}:${i}`};function ip({client:e,onFilterChange:t,initialLimit:n=100,className:r="",disabled:o=!1}){const[a,i]=l.useState(!1),[c,d]=l.useState({verb:"",resourceType:"",namespace:"",resourceName:"",username:""}),[u,m]=l.useState(n),[f,g]=l.useState(""),[v,x]=l.useState(!1),[h,p]=l.useState("last24hours"),[b,y]=l.useState(null),[w,N]=l.useState(()=>ao(oe(bt(new Date,1)))),[S,C]=l.useState(()=>ao(oe(new Date))),{verbs:j,resources:R,namespaces:D,usernames:F,isLoading:I,error:B}=Hl(e,b);B&&console.error("Failed to load audit log facets:",B);const z=l.useRef(null),E=l.useRef(!0);l.useEffect(()=>{var _;const P=(_=sn.find(H=>H.key==="last24hours"))==null?void 0:_.getValue();P&&y(P)},[]);const O=l.useCallback(()=>{const P=[];return c.verb&&P.push(`verb == "${c.verb}"`),c.resourceType&&P.push(`objectRef.resource == "${c.resourceType}"`),c.namespace&&P.push(`objectRef.namespace == "${c.namespace}"`),c.resourceName&&P.push(`objectRef.name.contains("${c.resourceName}")`),c.username&&P.push(`user.username.contains("${c.username}")`),P.join(" && ")},[c]),T=l.useCallback(()=>{if(!b||o)return;const P=v?f:O();t({filter:P,limit:u,startTime:b.start,endTime:b.end})},[v,f,O,t,u,b,o]);l.useEffect(()=>{if(E.current){E.current=!1;return}z.current&&clearTimeout(z.current),T()},[c.verb,c.resourceType,b,u,v]),l.useEffect(()=>{if(!(E.current||!b))return z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{T()},ap),()=>{z.current&&clearTimeout(z.current)}},[c.namespace,c.resourceName,c.username,f]);const L=l.useCallback((P,_)=>{d(H=>({...H,[P]:_}))},[]),A=l.useCallback(P=>{const _=sn.find(H=>H.key===P);_&&(p(P),y(_.getValue()))},[]),G=l.useCallback((P,_)=>{p("custom"),N(P),C(_),y({start:new Date(P).toISOString(),end:new Date(_).toISOString()})},[]),U=l.useCallback(P=>{const _=Math.min(Math.max(1,P),1e3);m(_)},[]),M=l.useCallback(()=>{a||g(O()),i(!a)},[a,O]),k=l.useCallback(P=>{x(P===!0)},[]),W=()=>{if(h==="custom"){if(b!=null&&b.start&&(b!=null&&b.end)){const _=new Date(b.start),H=new Date(b.end);return`${_.toLocaleDateString()} - ${H.toLocaleDateString()}`}return"Custom"}const P=sn.find(_=>_.key===h);return(P==null?void 0:P.label)||"Select time range"};return s.jsxs("div",{className:`mb-6 pb-6 border-b border-border ${r}`,children:[s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Action"}),s.jsx(rn,{options:j.filter(P=>P.value).map(P=>({value:P.value,label:P.value,count:P.count})),value:c.verb,onValueChange:P=>L("verb",P),placeholder:"All",searchPlaceholder:"Search actions...",allOptionLabel:"All",disabled:o||v,loading:I,className:"min-w-[130px]"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Resource"}),s.jsx(rn,{options:R.filter(P=>P.value).map(P=>({value:P.value,label:P.value,count:P.count})),value:c.resourceType,onValueChange:P=>L("resourceType",P),placeholder:"All",searchPlaceholder:"Search resources...",allOptionLabel:"All",disabled:o||v,loading:I,className:"min-w-[130px]"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Namespace"}),s.jsx(rn,{options:D.filter(P=>P.value).map(P=>({value:P.value,label:P.value,count:P.count})),value:c.namespace,onValueChange:P=>L("namespace",P),placeholder:"All",searchPlaceholder:"Search namespaces...",allOptionLabel:"All",disabled:o||v,loading:I,className:"min-w-[130px]"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"User"}),s.jsx(rn,{options:F.filter(P=>P.value).map(P=>({value:P.value,label:P.value,count:P.count})),value:c.username,onValueChange:P=>L("username",P),placeholder:"All",searchPlaceholder:"Search users...",allOptionLabel:"All",disabled:o||v,loading:I,className:"min-w-[130px]"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Name"}),s.jsx(he,{type:"text",value:c.resourceName,onChange:P=>L("resourceName",P.target.value),placeholder:"Filter by name...",className:"min-w-[140px]",disabled:o||v})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Limit"}),s.jsx(he,{type:"number",value:u,onChange:P=>U(parseInt(P.target.value)||100),min:1,max:1e3,className:"w-[80px]",disabled:o})]}),s.jsx(X,{type:"button",variant:"ghost",size:"sm",className:"whitespace-nowrap text-muted-foreground hover:text-foreground",onClick:M,"aria-expanded":a,children:a?"- CEL":"+ CEL"}),s.jsxs("div",{className:"flex flex-col gap-2 ml-auto",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Time Range"}),s.jsx(ji,{presets:sn.map(P=>({key:P.key,label:P.label})),selectedPreset:h,onPresetSelect:A,onCustomRangeApply:G,customStart:w,customEnd:S,disabled:o,displayLabel:W()})]})]}),a&&s.jsxs("div",{className:"mt-4 pt-4",children:[s.jsx($r,{className:"mb-4"}),s.jsx("div",{className:"mb-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ms,{id:"use-cel-expression",checked:v,onCheckedChange:k,disabled:o}),s.jsx(ie,{htmlFor:"use-cel-expression",className:"text-sm font-medium text-foreground cursor-pointer",children:"Use CEL Expression"})]})}),v&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"m-0 mb-2 text-[13px] text-muted-foreground",children:"Write your query using CEL syntax for complex filters"}),s.jsx($t,{value:f,onChange:P=>g(P.target.value),placeholder:'Example: verb == "delete" && objectRef.namespace == "production"',rows:3,className:"w-full font-mono resize-y",disabled:o})]})]})]})}function cp({events:e,className:t="",onEventSelect:n}){const[r,o]=l.useState(null),[a,i]=l.useState(new Set),c=f=>{const g=new Set(a);a.has(f)?g.delete(f):g.add(f),i(g)},d=f=>{o(f),n&&n(f)},u=f=>{if(!f)return"N/A";try{return Bt(new Date(f),"yyyy-MM-dd HH:mm:ss")}catch{return f}},m=f=>{switch(f==null?void 0:f.toLowerCase()){case"create":return"success";case"update":case"patch":return"warning";case"delete":return"destructive";case"get":case"list":case"watch":return"default";default:return"secondary"}};return e.length===0?s.jsx("div",{className:`bg-muted rounded-lg border border-border ${t}`,children:s.jsx("div",{className:"p-12 text-center text-muted-foreground text-sm",children:"No events found"})}):s.jsx("div",{className:`bg-muted rounded-lg border border-border ${t}`,children:s.jsx("div",{className:"p-4",children:e.map(f=>{var x,h,p,b,y;const g=f.auditID||"",v=a.has(g);return s.jsxs(ue,{className:`p-5 mb-3 cursor-pointer transition-all hover:border-primary/50 hover:shadow-sm hover:-translate-y-px ${(r==null?void 0:r.auditID)===g?"border-primary bg-primary/5 shadow-md":""}`,onClick:()=>d(f),children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-3 items-center flex-1",children:[s.jsx(le,{variant:m(f.verb),className:"px-3 py-1",children:((x=f.verb)==null?void 0:x.toUpperCase())||"UNKNOWN"}),s.jsx("span",{className:"font-semibold",children:((h=f.objectRef)==null?void 0:h.resource)||"N/A"}),((p=f.objectRef)==null?void 0:p.namespace)&&s.jsxs("span",{className:"text-muted-foreground text-sm",children:["ns: ",f.objectRef.namespace]}),((b=f.objectRef)==null?void 0:b.name)&&s.jsx("span",{className:"text-foreground/80 text-sm",children:f.objectRef.name})]}),s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsx("span",{className:"text-foreground/80 text-sm",children:((y=f.user)==null?void 0:y.username)||"N/A"}),s.jsx("span",{className:"text-muted-foreground text-sm font-mono",children:u(f.stageTimestamp)}),s.jsx(X,{variant:"ghost",size:"sm",onClick:w=>{w.stopPropagation(),c(g)},className:"text-primary",children:v?"":""})]})]}),v&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"mt-0 mb-2 text-base text-foreground/80",children:"Event Information"}),s.jsxs("dl",{className:"grid grid-cols-[auto_1fr] gap-2 m-0",children:[s.jsx("dt",{className:"font-semibold text-foreground/80",children:"Audit ID:"}),s.jsx("dd",{className:"m-0 text-foreground",children:f.auditID||"N/A"}),s.jsx("dt",{className:"font-semibold text-foreground/80",children:"Stage:"}),s.jsx("dd",{className:"m-0 text-foreground",children:f.stage||"N/A"}),s.jsx("dt",{className:"font-semibold text-foreground/80",children:"Level:"}),s.jsx("dd",{className:"m-0 text-foreground",children:f.level||"N/A"}),s.jsx("dt",{className:"font-semibold text-foreground/80",children:"Request URI:"}),s.jsx("dd",{className:"m-0 text-foreground font-mono text-sm break-all",children:f.requestURI||"N/A"}),f.userAgent&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"font-semibold text-foreground/80",children:"User Agent:"}),s.jsx("dd",{className:"m-0 text-foreground font-mono text-sm break-all",children:f.userAgent})]}),f.sourceIPs&&f.sourceIPs.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"font-semibold text-foreground/80",children:"Source IPs:"}),s.jsx("dd",{className:"m-0 text-foreground",children:f.sourceIPs.join(", ")})]})]})]}),f.user&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"mt-0 mb-2 text-base text-foreground/80",children:"User Information"}),s.jsxs("dl",{className:"grid grid-cols-[auto_1fr] gap-2 m-0",children:[s.jsx("dt",{className:"font-semibold text-foreground/80",children:"Username:"}),s.jsx("dd",{className:"m-0 text-foreground",children:f.user.username||"N/A"}),s.jsx("dt",{className:"font-semibold text-foreground/80",children:"UID:"}),s.jsx("dd",{className:"m-0 text-foreground",children:f.user.uid||"N/A"}),f.user.groups&&f.user.groups.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"font-semibold text-foreground/80",children:"Groups:"}),s.jsx("dd",{className:"m-0 text-foreground",children:f.user.groups.join(", ")})]})]})]}),f.responseStatus&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"mt-0 mb-2 text-base text-foreground/80",children:"Response Status"}),s.jsxs("dl",{className:"grid grid-cols-[auto_1fr] gap-2 m-0",children:[s.jsx("dt",{className:"font-semibold text-foreground/80",children:"Code:"}),s.jsx("dd",{className:"m-0 text-foreground",children:f.responseStatus.code||"N/A"}),s.jsx("dt",{className:"font-semibold text-foreground/80",children:"Status:"}),s.jsx("dd",{className:"m-0 text-foreground",children:f.responseStatus.status||"N/A"}),f.responseStatus.message&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"font-semibold text-foreground/80",children:"Message:"}),s.jsx("dd",{className:"m-0 text-foreground",children:f.responseStatus.message})]})]})]}),f.annotations&&Object.keys(f.annotations).length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"mt-0 mb-2 text-base text-foreground/80",children:"Annotations"}),s.jsx("dl",{className:"grid grid-cols-[auto_1fr] gap-2 m-0",children:Object.entries(f.annotations).map(([w,N])=>s.jsxs("div",{className:"contents",children:[s.jsxs("dt",{className:"font-semibold text-foreground/80",children:[w,":"]}),s.jsx("dd",{className:"m-0 text-foreground",children:N})]},w))})]}),f.requestObject||f.responseObject?s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"mt-0 mb-2 text-base text-foreground/80",children:"Request/Response Data"}),f.requestObject?s.jsxs("details",{className:"mt-2",children:[s.jsx("summary",{className:"cursor-pointer font-semibold p-2 bg-muted rounded",children:"Request Object"}),s.jsx("pre",{className:"mt-2 p-4 bg-muted rounded overflow-x-auto text-sm",children:JSON.stringify(f.requestObject,null,2)})]}):null,f.responseObject?s.jsxs("details",{className:"mt-2",children:[s.jsx("summary",{className:"cursor-pointer font-semibold p-2 bg-muted rounded",children:"Response Object"}),s.jsx("pre",{className:"mt-2 p-4 bg-muted rounded overflow-x-auto text-sm",children:JSON.stringify(f.responseObject,null,2)})]}):null]}):null]})]},g)})})})}function lp({client:e,autoExecute:t=!1}){var h;const[n,r]=l.useState(null),[o,a]=l.useState([]),[i,c]=l.useState(!1),[d,u]=l.useState(null),[m,f]=l.useState(null),g=l.useCallback(async p=>{var b,y,w,N,S;c(!0),u(null),f(p);try{const C=`query-${Date.now()}`,j=await e.createQuery(C,p);console.log("[useAuditLogQuery] Query response:",{resultCount:(y=(b=j.status)==null?void 0:b.results)==null?void 0:y.length,continueAfter:(w=j.status)==null?void 0:w.continueAfter,phase:(N=j.status)==null?void 0:N.phase}),r(j),a(((S=j.status)==null?void 0:S.results)||[])}catch(C){u(C instanceof Error?C:new Error(String(C)))}finally{c(!1)}},[e]),v=l.useCallback(async()=>{var p,b,y,w,N,S,C;if(!((p=n==null?void 0:n.status)!=null&&p.continueAfter)||!m){console.log("[useAuditLogQuery] loadMore skipped:",{hasContinueAfter:!!((b=n==null?void 0:n.status)!=null&&b.continueAfter),hasCurrentSpec:!!m});return}console.log("[useAuditLogQuery] Loading more with continueAfter:",n.status.continueAfter),c(!0),u(null);try{const j={...m,continueAfter:n.status.continueAfter},R=`query-${Date.now()}`,D=await e.createQuery(R,j);console.log("[useAuditLogQuery] loadMore response:",{resultCount:(w=(y=D.status)==null?void 0:y.results)==null?void 0:w.length,continueAfter:(N=D.status)==null?void 0:N.continueAfter,totalEvents:o.length+(((C=(S=D.status)==null?void 0:S.results)==null?void 0:C.length)||0)}),r(D),a(F=>{var I;return[...F,...((I=D.status)==null?void 0:I.results)||[]]})}catch(j){u(j instanceof Error?j:new Error(String(j)))}finally{c(!1)}},[e,n,m,o.length]),x=l.useCallback(()=>{r(null),a([]),u(null),f(null)},[]);return{query:n,events:o,isLoading:i,error:d,hasMore:!!((h=n==null?void 0:n.status)!=null&&h.continueAfter),executeQuery:g,loadMore:v,reset:x}}const dp=Rn("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",warning:"border-amber-200 bg-amber-50 text-amber-900 [&>svg]:text-amber-600 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-200 dark:[&>svg]:text-amber-400",success:"border-green-200 bg-green-50 text-green-900 [&>svg]:text-green-600 dark:border-green-800 dark:bg-green-950/50 dark:text-green-200 dark:[&>svg]:text-green-400"}},defaultVariants:{variant:"default"}}),be=l.forwardRef(({className:e,variant:t,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:V(dp({variant:t}),e),...n}));be.displayName="Alert";const up=l.forwardRef(({className:e,...t},n)=>s.jsx("h5",{ref:n,className:V("mb-1 font-medium leading-none tracking-tight",e),...t}));up.displayName="AlertTitle";const ye=l.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:V("text-sm [&_p]:leading-relaxed",e),...t}));ye.displayName="AlertDescription";function sx({client:e,className:t="",onEventSelect:n,initialFilter:r,initialLimit:o}){const[a,i]=l.useState({filter:r||"",limit:o||100}),{events:c,isLoading:d,error:u,hasMore:m,executeQuery:f,loadMore:g}=lp({client:e}),v=l.useRef(null);return l.useEffect(()=>{if(!v.current)return;const x=new IntersectionObserver(h=>{h[0].isIntersecting&&m&&!d&&g()},{rootMargin:"200px",threshold:0});return x.observe(v.current),()=>{x.disconnect()}},[m,d,g]),s.jsxs(ue,{className:`flex flex-col p-6 ${t}`,children:[s.jsx(ip,{client:e,onFilterChange:async x=>{i(x),await f(x)},initialLimit:a.limit,disabled:d}),u&&s.jsx(be,{variant:"destructive",className:"my-6",children:s.jsxs(ye,{children:[s.jsx("strong",{children:"Error:"})," ",u.message]})}),d&&c.length===0&&s.jsxs("div",{className:"flex items-center justify-center gap-3 p-8 text-muted-foreground text-sm",children:[s.jsx("div",{className:"w-5 h-5 border-[3px] border-muted border-t-[hsl(var(--datum-canyon-clay))] rounded-full animate-spin"}),s.jsx("span",{children:"Searching audit logs..."})]}),!d&&c.length===0&&!u&&s.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[s.jsx("p",{className:"m-0",children:"No audit events found"}),s.jsx("p",{className:"text-sm text-muted-foreground/70 mt-2",children:"Adjust your filters or time range and search again"})]}),c.length>0&&s.jsxs("div",{children:[s.jsx(cp,{events:c,onEventSelect:n}),m&&s.jsx("div",{ref:v,className:"h-px mt-4"}),d&&s.jsxs("div",{className:"flex items-center justify-center gap-3 p-8 text-muted-foreground text-sm",children:[s.jsx("div",{className:"w-5 h-5 border-[3px] border-muted border-t-[hsl(var(--datum-canyon-clay))] rounded-full animate-spin"}),s.jsx("span",{children:"Loading more events..."})]}),!m&&c.length>0&&s.jsx("div",{className:"text-center p-8 text-muted-foreground text-sm border-t border-border mt-4",children:"End of results"})]})]})}const Mt={last15min:{label:"Last 15 minutes",getValue:()=>({start:oe(Uo(new Date)),end:oe(new Date)})},last1hour:{label:"Last 1 hour",getValue:()=>({start:oe(et(new Date,1)),end:oe(new Date)})},last6hours:{label:"Last 6 hours",getValue:()=>({start:oe(et(new Date,6)),end:oe(new Date)})},last24hours:{label:"Last 24 hours",getValue:()=>({start:oe(et(new Date,24)),end:oe(new Date)})},last7days:{label:"Last 7 days",getValue:()=>({start:oe(bt(new Date,7)),end:oe(new Date)})},last30days:{label:"Last 30 days",getValue:()=>({start:oe(bt(new Date,30)),end:oe(new Date)})},today:{label:"Today",getValue:()=>({start:oe(gr(new Date)),end:oe(Vo(new Date))})},custom:{label:"Custom range",getValue:()=>({start:oe(et(new Date,1)),end:oe(new Date)})}},on=e=>{const t=new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return`${n}-${r}-${o}T${a}:${i}`};function fp({onChange:e,initialRange:t,className:n=""}){const[r,o]=l.useState("last24hours"),[a,i]=l.useState(""),[c,d]=l.useState(""),[u,m]=l.useState(!1);l.useEffect(()=>{if(t)i(on(t.start)),d(on(t.end)),m(!0),o("custom");else{const h=Mt.last24hours.getValue();e(h)}},[]);const f=h=>{if(o(h),h==="custom"){if(m(!0),!a||!c){const p=Mt.last24hours.getValue();i(on(p.start)),d(on(p.end))}}else{m(!1);const p=Mt[h].getValue();e(p)}},g=()=>{if(a&&c){const h={start:new Date(a).toISOString(),end:new Date(c).toISOString()};e(h)}},v=h=>{i(h)},x=h=>{d(h)};return s.jsxs("div",{className:`mb-6 p-4 bg-muted border border-border rounded-lg ${n}`,children:[s.jsx("div",{className:"flex flex-wrap gap-2 mb-4 max-sm:flex-col",children:Object.keys(Mt).map(h=>s.jsx(X,{type:"button",variant:r===h?"default":"outline",className:"max-sm:w-full",onClick:()=>f(h),children:Mt[h].label},h))}),u&&s.jsx(ue,{className:"mt-4",children:s.jsxs(xe,{className:"flex flex-col gap-4 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{htmlFor:"custom-start",children:s.jsx("strong",{children:"Start time"})}),s.jsx(he,{id:"custom-start",type:"datetime-local",value:a,onChange:h=>v(h.target.value)})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{htmlFor:"custom-end",children:s.jsx("strong",{children:"End time"})}),s.jsx(he,{id:"custom-end",type:"datetime-local",value:c,onChange:h=>x(h.target.value)})]}),s.jsx(X,{type:"button",onClick:g,className:"self-start",disabled:!a||!c,children:"Apply Custom Range"})]})})]})}const lr=300;function mp(e){const t=[];if(e.changeSource&&e.changeSource!=="all"&&t.push(`spec.changeSource == "${e.changeSource}"`),e.resourceUid&&t.push(`spec.resource.uid == "${e.resourceUid}"`),e.resourceKinds&&e.resourceKinds.length>0)if(e.resourceKinds.length===1)t.push(`spec.resource.kind == "${e.resourceKinds[0]}"`);else{const n=e.resourceKinds.map(r=>`spec.resource.kind == "${r}"`);t.push(`(${n.join(" || ")})`)}if(e.actorNames&&e.actorNames.length>0)if(e.actorNames.length===1)t.push(`spec.actor.name == "${e.actorNames[0]}"`);else{const n=e.actorNames.map(r=>`spec.actor.name == "${r}"`);t.push(`(${n.join(" || ")})`)}if(e.apiGroups&&e.apiGroups.length>0)if(e.apiGroups.length===1)t.push(`spec.resource.apiGroup == "${e.apiGroups[0]}"`);else{const n=e.apiGroups.map(r=>`spec.resource.apiGroup == "${r}"`);t.push(`(${n.join(" || ")})`)}if(e.resourceName&&t.push(`spec.resource.name.contains("${e.resourceName}")`),e.resourceNamespaces&&e.resourceNamespaces.length>0)if(e.resourceNamespaces.length===1)t.push(`spec.resource.namespace == "${e.resourceNamespaces[0]}"`);else{const n=e.resourceNamespaces.map(r=>`spec.resource.namespace == "${r}"`);t.push(`(${n.join(" || ")})`)}return e.customFilter&&t.push(e.customFilter),t.length>0?t.join(" && "):void 0}function Si({client:e,initialFilters:t={},initialTimeRange:n={start:"now-7d"},pageSize:r=30,enableStreaming:o=!1,autoStartStreaming:a=!0}){const[i,c]=l.useState([]),[d,u]=l.useState(!1),[m,f]=l.useState(null),[g,v]=l.useState(),[x,h]=l.useState(t),[p,b]=l.useState(n),[y,w]=l.useState(!1),[N,S]=l.useState(0),C=l.useRef(),j=l.useRef(null),R=l.useRef(!1),D=l.useRef(!1),F=l.useRef(null),I=l.useCallback(M=>({filter:mp(x),search:x.search,start:p.start,end:p.end,limit:r,continue:M}),[x,p,r]),B=l.useCallback(M=>{var k,W;if(M.type==="ERROR"){console.error("Watch error:",M.object);return}if(M.type==="BOOKMARK"){(k=M.object.metadata)!=null&&k.resourceVersion&&(C.current=M.object.metadata.resourceVersion);return}(W=M.object.metadata)!=null&&W.resourceVersion&&(C.current=M.object.metadata.resourceVersion),M.type==="ADDED"?(c(P=>P.some(H=>{var $,Y;return(($=H.metadata)==null?void 0:$.name)===((Y=M.object.metadata)==null?void 0:Y.name)})?P:[M.object,...P]),S(P=>P+1)):M.type==="MODIFIED"?c(P=>P.map(_=>{var H,$;return((H=_.metadata)==null?void 0:H.name)===(($=M.object.metadata)==null?void 0:$.name)?M.object:_})):M.type==="DELETED"&&c(P=>P.filter(_=>{var H,$;return((H=_.metadata)==null?void 0:H.name)!==(($=M.object.metadata)==null?void 0:$.name)}))},[]),z=l.useCallback(()=>{if(j.current)return;const M=I(),{stop:k}=e.watchActivities(M,{resourceVersion:C.current,onEvent:B,onError:W=>{console.error("Watch stream error:",W),f(W),w(!1),j.current=null},onClose:()=>{w(!1),j.current=null}});j.current=k,w(!0),S(0)},[e,I,B]),E=l.useCallback(()=>{j.current&&(j.current(),j.current=null),w(!1)},[]),O=l.useCallback(async()=>{var M,k;u(!0),f(null),S(0);try{const W=I(),P=await e.listActivities(W);c(P.items||[]),v((M=P.metadata)==null?void 0:M.continue),(k=P.metadata)!=null&&k.resourceVersion&&(C.current=P.metadata.resourceVersion),D.current=!0,R.current&&o&&(R.current=!1,setTimeout(()=>{j.current},0))}catch(W){f(W instanceof Error?W:new Error(String(W))),R.current=!1}finally{u(!1)}},[e,I,o]),T=l.useCallback(async()=>{var M;if(!(!g||d)){u(!0),f(null);try{const k=I(g),W=await e.listActivities(k);c(P=>[...P,...W.items||[]]),v((M=W.metadata)==null?void 0:M.continue)}catch(k){f(k instanceof Error?k:new Error(String(k)))}finally{u(!1)}}},[e,I,g,d]),L=l.useCallback(M=>{y&&(R.current=!0,E()),h(M),c([]),v(void 0),C.current=void 0,F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{F.current=null},lr)},[E,y]),A=l.useCallback(M=>{y&&(R.current=!0,E()),b(M),c([]),v(void 0),C.current=void 0,F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{F.current=null},lr)},[E,y]),G=l.useCallback(()=>{E(),c([]),f(null),v(void 0),h(t),b(n),S(0),C.current=void 0},[t,n,E]);l.useEffect(()=>{if(D.current)return F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{F.current=null,O()},lr),()=>{F.current&&(clearTimeout(F.current),F.current=null)}},[x,p]),l.useEffect(()=>{o&&a&&i.length>0&&!y&&!d&&z()},[o,a,i.length,y,d,z]),l.useEffect(()=>{o&&R.current&&i.length>0&&!y&&!d&&(R.current=!1,z())},[o,i.length,y,d,z]),l.useEffect(()=>()=>{j.current&&j.current(),F.current&&clearTimeout(F.current)},[]);const U=l.useMemo(()=>!!g,[g]);return{activities:i,isLoading:d,error:m,hasMore:U,filters:x,timeRange:p,refresh:O,loadMore:T,setFilters:L,setTimeRange:A,reset:G,isStreaming:y,startStreaming:z,stopStreaming:E,newActivitiesCount:N}}function hp(e,t,n){if(!t||t.length===0)return[e];const r=[...t].sort((c,d)=>d.marker.length-c.marker.length),o=[];for(const c of r){let d=0,u=e.indexOf(c.marker,d);for(;u!==-1;){const m=u+c.marker.length;o.some(g=>u<g.end&&m>g.start)||o.push({start:u,end:m,link:c}),d=u+1,u=e.indexOf(c.marker,d)}}o.sort((c,d)=>c.start-d.start);const a=[];let i=0;for(let c=0;c<o.length;c++){const d=o[c];d.start>i&&a.push(e.substring(i,d.start));const u=n?m=>{m.preventDefault(),m.stopPropagation(),n(d.link.resource)}:void 0;a.push(s.jsx("button",{type:"button",className:"bg-transparent border-none p-0 cursor-pointer underline underline-offset-2 text-primary hover:text-primary/80",onClick:u,title:`${d.link.resource.kind}: ${d.link.resource.name}`,children:d.link.marker},`link-${c}`)),i=d.end}return i<e.length&&a.push(e.substring(i)),a}function Cn({summary:e,links:t,onResourceClick:n,className:r=""}){const o=hp(e,t,n);return s.jsx("span",{className:`text-[0.9375rem] text-foreground leading-normal break-words ${r}`,children:o})}function pp(e){if(!e)return"Unknown time";try{return Bt(new Date(e),"yyyy-MM-dd HH:mm:ss")}catch{return e}}function io({activity:e}){const{spec:t,metadata:n}=e,{actor:r,resource:o,origin:a,changes:i}=t,c=n==null?void 0:n.creationTimestamp;return s.jsxs("div",{className:"mt-4 pt-4 border-t border-border space-y-4",children:[i&&i.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"m-0 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Changes"}),s.jsx("div",{className:"flex flex-col gap-2",children:i.map((d,u)=>s.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[s.jsx("span",{className:"block font-semibold text-foreground mb-1 font-mono text-xs",children:d.field}),d.old&&s.jsxs("span",{className:"block ml-2 text-red-600 dark:text-red-400 text-xs",children:[s.jsx("span",{className:"font-medium mr-1",children:""}),s.jsx("span",{className:"line-through",children:d.old})]}),d.new&&s.jsxs("span",{className:"block ml-2 text-green-600 dark:text-green-400 text-xs",children:[s.jsx("span",{className:"font-medium mr-1",children:"+"}),d.new]})]},u))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"m-0 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Timestamp"}),s.jsx("p",{className:"m-0 text-foreground text-xs",children:pp(c)})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"m-0 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Actor"}),s.jsxs("dl",{className:"grid grid-cols-[auto_1fr] gap-x-3 gap-y-1 m-0 text-sm",children:[s.jsx("dt",{className:"text-muted-foreground text-xs",children:"Name:"}),s.jsx("dd",{className:"m-0 text-foreground text-xs break-all",children:r.name}),s.jsx("dt",{className:"text-muted-foreground text-xs",children:"Type:"}),s.jsx("dd",{className:"m-0 text-foreground text-xs",children:r.type}),r.email&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-muted-foreground text-xs",children:"Email:"}),s.jsx("dd",{className:"m-0 text-foreground text-xs break-all",children:r.email})]}),s.jsx("dt",{className:"text-muted-foreground text-xs",children:"UID:"}),s.jsx("dd",{className:"m-0 font-mono text-xs text-muted-foreground break-all",children:r.uid})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"m-0 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Resource"}),s.jsxs("dl",{className:"grid grid-cols-[auto_1fr] gap-x-3 gap-y-1 m-0 text-sm",children:[s.jsx("dt",{className:"text-muted-foreground text-xs",children:"Kind:"}),s.jsx("dd",{className:"m-0 text-foreground text-xs",children:o.kind}),s.jsx("dt",{className:"text-muted-foreground text-xs",children:"Name:"}),s.jsx("dd",{className:"m-0 text-foreground text-xs",children:o.name}),o.namespace&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-muted-foreground text-xs",children:"Namespace:"}),s.jsx("dd",{className:"m-0 text-foreground text-xs",children:o.namespace})]}),o.apiGroup&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-muted-foreground text-xs",children:"API Group:"}),s.jsx("dd",{className:"m-0 text-foreground text-xs",children:o.apiGroup})]}),o.uid&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-muted-foreground text-xs",children:"UID:"}),s.jsx("dd",{className:"m-0 font-mono text-xs text-muted-foreground break-all",children:o.uid})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"m-0 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Origin"}),s.jsxs("dl",{className:"grid grid-cols-[auto_1fr] gap-x-3 gap-y-1 m-0 text-sm",children:[s.jsx("dt",{className:"text-muted-foreground text-xs",children:"Type:"}),s.jsx("dd",{className:"m-0 text-foreground text-xs",children:a.type}),s.jsx("dt",{className:"text-muted-foreground text-xs",children:"ID:"}),s.jsx("dd",{className:"m-0 font-mono text-xs text-muted-foreground break-all",children:a.id})]})]})]})}function co(e){if(!e)return"Unknown time";try{const t=new Date(e);return Ho(t,{addSuffix:!0})}catch{return e}}function lo(e){if(!e)return"Unknown time";try{return Bt(new Date(e),"yyyy-MM-dd HH:mm:ss")}catch{return e}}function gp(e){const t=e.split(/[@\s.]+/).filter(Boolean);return t.length===0?"?":t.length===1?t[0].charAt(0).toUpperCase():(t[0].charAt(0)+t[t.length-1].charAt(0)).toUpperCase()}function xp(e,t){const n=V("rounded-full flex items-center justify-center shrink-0 font-semibold",t?"w-8 h-8 text-xs":"w-10 h-10 text-sm");switch(e){case"user":return V(n,"bg-lime-200 text-slate-900 dark:bg-lime-800 dark:text-lime-100");case"controller":return V(n,"bg-rose-300 text-slate-900 dark:bg-rose-800 dark:text-rose-100");case"machine account":return V(n,"bg-muted text-muted-foreground");default:return V(n,"bg-muted text-muted-foreground")}}function vp(e){const t=e.split(/\s+/);return t.length>=2?t[1].toLowerCase():"unknown"}function bp(e){const t=e.toLowerCase();return t.includes("create")||t.includes("add")?"create":t.includes("delete")||t.includes("remove")?"delete":t.includes("update")||t.includes("patch")||t.includes("modify")||t.includes("change")||t.includes("edit")?"update":"other"}function yp(e){switch(bp(e)){case"create":return"bg-green-500";case"update":return"bg-amber-500";case"delete":return"bg-red-500";default:return"bg-muted-foreground"}}function Ci({activity:e,onResourceClick:t,onActivityClick:n,isSelected:r=!1,className:o="",compact:a=!1,isNew:i=!1,variant:c="feed",isFirst:d=!1,isLast:u=!1,defaultExpanded:m=!1}){const[f,g]=l.useState(m),{spec:v,metadata:x}=e,{actor:h,summary:p,changeSource:b,resource:y,links:w}=v,N=()=>{n==null||n(e)},S=D=>{D.stopPropagation(),g(!f)},C=x==null?void 0:x.creationTimestamp,j=vp(p);return c==="timeline"?s.jsxs("div",{className:V("relative cursor-pointer group flex",a?"pl-7":"pl-9",o),onClick:N,children:[s.jsxs("div",{className:V("absolute left-0 top-0 bottom-0 flex flex-col items-center",a?"w-7":"w-9"),children:[s.jsx("div",{className:V("w-0.5 flex-1",d?"bg-transparent":"bg-border"),style:{minHeight:a?12:16}}),s.jsx("div",{className:V("rounded-full shrink-0 z-10",a?"w-2.5 h-2.5":"w-3 h-3",yp(j))}),s.jsx("div",{className:V("w-0.5 flex-1",u?"bg-transparent":"bg-border")})]}),s.jsxs("div",{className:V("flex-1 border border-border rounded-lg transition-all duration-200","hover:border-rose-300 hover:shadow-sm dark:hover:border-rose-600",a?"p-3 mb-3":"p-4 mb-4",r&&"border-rose-300 bg-rose-50/50 dark:border-rose-600 dark:bg-rose-950/30"),children:[s.jsxs("div",{className:"flex justify-between items-start gap-4 mb-2",children:[s.jsx("div",{className:V("leading-relaxed",a?"text-sm":"text-[0.9375rem]"),children:s.jsx(Cn,{summary:p,links:w,onResourceClick:t})}),s.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",title:lo(C),children:co(C)})]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[s.jsxs("span",{className:V("inline-flex items-center gap-1",b==="human"?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:[b==="human"?s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}):s.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),b]}),s.jsx(X,{variant:"ghost",size:"sm",className:"ml-auto h-auto py-0 px-1 text-xs text-muted-foreground hover:text-foreground",onClick:S,"aria-expanded":f,children:f?" Less":" More"})]}),f&&s.jsx(io,{activity:e})]})]}):s.jsxs(ue,{className:V("cursor-pointer transition-all duration-200","hover:border-rose-300 hover:shadow-sm hover:-translate-y-px dark:hover:border-rose-600",a?"p-3 mb-2":"p-4 mb-3",r&&"border-rose-300 bg-rose-50 shadow-md dark:border-rose-600 dark:bg-rose-950/50",i&&"border-l-4 border-l-green-500 bg-green-50/50 dark:border-l-green-400 dark:bg-green-950/30",o),onClick:N,children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:xp(h.type,a),title:h.name,children:h.type==="controller"?s.jsx("span",{className:a?"text-base":"text-xl",children:""}):h.type==="machine account"?s.jsx("span",{className:a?"text-base":"text-xl",children:""}):s.jsx("span",{className:"uppercase",children:gp(h.name)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-start gap-4 mb-2",children:[s.jsx("div",{className:V("leading-relaxed",a?"text-sm":"text-[0.9375rem]"),children:s.jsx(Cn,{summary:p,links:w,onResourceClick:t})}),s.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",title:lo(C),children:co(C)})]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[s.jsxs("span",{className:V("inline-flex items-center gap-1",b==="human"?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:[b==="human"?s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}):s.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),b]}),s.jsx(X,{variant:"ghost",size:"sm",className:"ml-auto h-auto py-0 px-1 text-xs text-muted-foreground hover:text-foreground",onClick:S,"aria-expanded":f,children:f?" Less":" More"})]})]})]}),f&&s.jsx(io,{activity:e})]})}function wp(e){const t=[];if(e.changeSource&&e.changeSource!=="all"&&t.push(`spec.changeSource == "${e.changeSource}"`),e.resourceUid&&t.push(`spec.resource.uid == "${e.resourceUid}"`),e.resourceKinds&&e.resourceKinds.length>0)if(e.resourceKinds.length===1)t.push(`spec.resource.kind == "${e.resourceKinds[0]}"`);else{const n=e.resourceKinds.map(r=>`spec.resource.kind == "${r}"`);t.push(`(${n.join(" || ")})`)}if(e.actorNames&&e.actorNames.length>0)if(e.actorNames.length===1)t.push(`spec.actor.name == "${e.actorNames[0]}"`);else{const n=e.actorNames.map(r=>`spec.actor.name == "${r}"`);t.push(`(${n.join(" || ")})`)}if(e.apiGroups&&e.apiGroups.length>0)if(e.apiGroups.length===1)t.push(`spec.resource.apiGroup == "${e.apiGroups[0]}"`);else{const n=e.apiGroups.map(r=>`spec.resource.apiGroup == "${r}"`);t.push(`(${n.join(" || ")})`)}if(e.resourceNamespaces&&e.resourceNamespaces.length>0)if(e.resourceNamespaces.length===1)t.push(`spec.resource.namespace == "${e.resourceNamespaces[0]}"`);else{const n=e.resourceNamespaces.map(r=>`spec.resource.namespace == "${r}"`);t.push(`(${n.join(" || ")})`)}return e.customFilter&&t.push(`(${e.customFilter})`),t.length>0?t.join(" && "):void 0}function Np(e,t,n={}){const[r,o]=l.useState([]),[a,i]=l.useState([]),[c,d]=l.useState([]),[u,m]=l.useState([]),[f,g]=l.useState(!1),[v,x]=l.useState(null),h=l.useRef(null),p=l.useCallback(async()=>{var N;const y=wp(n),w=`${t.start}-${t.end||"now"}-${y||""}`;if(h.current!==w){g(!0),x(null);try{const C=((N=(await e.queryFacets({timeRange:{start:t.start,end:t.end},filter:y,facets:[{field:"spec.resource.kind",limit:50},{field:"spec.actor.name",limit:50},{field:"spec.resource.apiGroup",limit:50},{field:"spec.resource.namespace",limit:50}]})).status)==null?void 0:N.facets)||[],j=C.find(I=>I.field==="spec.resource.kind");o((j==null?void 0:j.values)||[]);const R=C.find(I=>I.field==="spec.actor.name");i((R==null?void 0:R.values)||[]);const D=C.find(I=>I.field==="spec.resource.apiGroup");d((D==null?void 0:D.values)||[]);const F=C.find(I=>I.field==="spec.resource.namespace");m((F==null?void 0:F.values)||[]),h.current=w}catch(S){x(S instanceof Error?S:new Error(String(S)))}finally{g(!1)}}},[e,t.start,t.end,n]);l.useEffect(()=>{p()},[p]);const b=l.useCallback(async()=>{h.current=null,await p()},[p]);return{resourceKinds:r,actorNames:a,apiGroups:c,resourceNamespaces:u,isLoading:f,error:v,refresh:b}}const uo=[{value:"all",label:"All",description:"Show all activities"},{value:"human",label:"Human",description:"Show only human-initiated activities"},{value:"system",label:"System",description:"Show only system-initiated activities"}];function jp({value:e,onChange:t,className:n="",disabled:r=!1}){return s.jsx("div",{className:V("inline-flex border border-input rounded-md overflow-hidden",n),role:"group","aria-label":"Filter by change source",children:uo.map((o,a)=>s.jsx(X,{type:"button",variant:"ghost",className:V("rounded-none px-4 py-2 text-sm font-medium transition-all duration-200",a<uo.length-1&&"border-r border-input",e===o.value?"bg-[#BF9595] text-[#0C1D31] hover:bg-[#BF9595]/90":"bg-muted text-foreground hover:bg-muted/80"),onClick:()=>t(o.value),disabled:r,"aria-pressed":e===o.value,title:o.description,children:o.label},o.value))})}function an({options:e,values:t,onValuesChange:n,placeholder:r="Select...",searchPlaceholder:o="Search...",emptyMessage:a="No results found.",disabled:i=!1,loading:c=!1,className:d,maxDisplayed:u=2}){const[m,f]=l.useState(!1),[g,v]=l.useState(""),x=e.filter(N=>t.includes(N.value)),h=l.useMemo(()=>c?"Loading...":x.length===0?r:x.length<=u?x.map(N=>N.label).join(", "):`${x.slice(0,u).map(N=>N.label).join(", ")} +${x.length-u} more`,[c,x,r,u]),p=l.useCallback(N=>{t.includes(N)?n(t.filter(S=>S!==N)):n([...t,N])},[n,t]),b=l.useCallback(N=>{N.stopPropagation(),n([])},[n]),y=l.useCallback((N,S)=>{N.stopPropagation(),n(t.filter(C=>C!==S))},[n,t]),w=l.useCallback((N,S)=>{if(!S)return 1;const C=e.find(I=>I.value===N),R=((C==null?void 0:C.label)||N).toLowerCase(),D=S.toLowerCase();if(R===D)return 1;if(R.startsWith(D))return .9;if(R.includes(D))return .8;let F=0;for(let I=0;I<R.length&&F<D.length;I++)R[I]===D[F]&&F++;return F===D.length?.6:0},[e]);return s.jsxs(is,{open:m,onOpenChange:f,children:[s.jsx(cs,{asChild:!0,children:s.jsxs("button",{type:"button",role:"combobox","aria-expanded":m,"aria-haspopup":"listbox",disabled:i||c,className:V("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background","placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",d),children:[s.jsx("span",{className:"truncate text-left flex-1",children:h}),s.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!i&&s.jsx("span",{role:"button",tabIndex:0,onClick:b,onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&b(N)},className:"rounded-sm opacity-50 hover:opacity-100 cursor-pointer",children:s.jsx(vn,{className:"h-3 w-3"})}),s.jsx(qo,{className:"h-4 w-4 shrink-0 opacity-50"})]})]})}),s.jsx(ls,{children:s.jsx(ds,{className:V("z-50 min-w-[var(--radix-popover-trigger-width)] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=top]:slide-in-from-bottom-2"),sideOffset:4,align:"start",children:s.jsxs(Ta,{filter:w,className:"w-full",children:[s.jsx("div",{className:"flex items-center border-b px-3",children:s.jsx(qr,{placeholder:o,value:g,onValueChange:v,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})}),t.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 p-2 border-b",children:x.map(N=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md bg-secondary text-secondary-foreground text-xs",children:[N.label,s.jsx("button",{type:"button",onClick:S=>y(S,N.value),className:"rounded-sm hover:bg-secondary-foreground/20",children:s.jsx(vn,{className:"h-3 w-3"})})]},N.value))}),s.jsxs(Yr,{className:"max-h-[300px] overflow-y-auto p-1",children:[s.jsx(Xr,{className:"py-6 text-center text-sm text-muted-foreground",children:a}),s.jsx(Kr,{children:e.map(N=>s.jsxs(yn,{value:N.value,onSelect:()=>p(N.value),className:V("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none","data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground","hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(Ft,{className:V("mr-2 h-4 w-4",t.includes(N.value)?"opacity-100":"opacity-0")}),s.jsx("span",{className:"flex-1 truncate",children:N.label}),N.count!==void 0&&s.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",N.count,")"]})]},N.value))})]})]})})})]})}const fo=300,Sr=[{key:"now-1h",label:"Last hour"},{key:"now-24h",label:"Last 24 hours"},{key:"now-7d",label:"Last 7 days"},{key:"now-30d",label:"Last 30 days"}],cn=e=>{const t=new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return`${n}-${r}-${o}T${a}:${i}`},Sp=e=>{const t=Sr.find(n=>e.start===n.key);return t?t.key:"custom"};function Cp({client:e,filters:t,timeRange:n,onFiltersChange:r,onTimeRangeChange:o,disabled:a=!1,className:i="",showSearch:c=!0}){const{resourceKinds:d,actorNames:u,apiGroups:m,resourceNamespaces:f,isLoading:g,error:v}=Np(e,n,t);v&&console.error("Failed to load facets:",v);const[x,h]=l.useState(t.search||""),[p,b]=l.useState(t.resourceName||""),y=l.useRef(null),w=l.useRef(null),N=Sp(n),[S,C]=l.useState(()=>cn(N==="custom"?n.start:oe(bt(new Date,1)))),[j,R]=l.useState(()=>N==="custom"&&n.end?cn(n.end):cn(oe(new Date)));l.useEffect(()=>{t.search!==x&&h(t.search||"")},[t.search]),l.useEffect(()=>{t.resourceName!==p&&b(t.resourceName||"")},[t.resourceName]),l.useEffect(()=>()=>{y.current&&clearTimeout(y.current),w.current&&clearTimeout(w.current)},[]);const D=l.useCallback(M=>{r({...t,changeSource:M})},[t,r]),F=l.useCallback(M=>{o({start:M,end:void 0})},[o]),I=l.useCallback((M,k)=>{C(M),R(k),o({start:new Date(M).toISOString(),end:new Date(k).toISOString()})},[o]),B=l.useCallback(M=>{const k=M.target.value;h(k),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{y.current=null,r({...t,search:k||void 0})},fo)},[t,r]),z=l.useCallback(()=>{y.current&&(clearTimeout(y.current),y.current=null),h(""),r({...t,search:void 0})},[t,r]),E=M=>{r({...t,resourceKinds:M.length>0?M:void 0})},O=M=>{r({...t,actorNames:M.length>0?M:void 0})},T=M=>{r({...t,apiGroups:M.length>0?M:void 0})},L=M=>{r({...t,resourceNamespaces:M.length>0?M:void 0})},A=l.useCallback(M=>{const k=M.target.value;b(k),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{w.current=null,r({...t,resourceName:k||void 0})},fo)},[t,r]),G=l.useCallback(()=>{w.current&&(clearTimeout(w.current),w.current=null),b(""),r({...t,resourceName:void 0})},[t,r]),U=()=>{const M=Sr.find(k=>k.key===N);if(M)return M.label;if(N==="custom"&&n.start&&n.end){const k=new Date(n.start),W=new Date(n.end);return`${k.toLocaleDateString()} - ${W.toLocaleDateString()}`}return"Select time range"};return s.jsx("div",{className:`mb-6 pb-6 border-b border-border ${i}`,children:s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Source"}),s.jsx(jp,{value:t.changeSource||"all",onChange:D,disabled:a})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Kind"}),s.jsx(an,{options:d.filter(M=>M.value).map(M=>({value:M.value,label:M.value,count:M.count})),values:t.resourceKinds||[],onValuesChange:E,placeholder:"All",searchPlaceholder:"Search kinds...",disabled:a,loading:g,className:"min-w-[140px]"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Actor"}),s.jsx(an,{options:u.filter(M=>M.value).map(M=>({value:M.value,label:M.value,count:M.count})),values:t.actorNames||[],onValuesChange:O,placeholder:"All",searchPlaceholder:"Search actors...",disabled:a,loading:g,className:"min-w-[140px]"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Namespace"}),s.jsx(an,{options:f.filter(M=>M.value).map(M=>({value:M.value,label:M.value,count:M.count})),values:t.resourceNamespaces||[],onValuesChange:L,placeholder:"All",searchPlaceholder:"Search namespaces...",disabled:a,loading:g,className:"min-w-[140px]"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"API Group"}),s.jsx(an,{options:m.filter(M=>M.value).map(M=>({value:M.value,label:M.value,count:M.count})),values:t.apiGroups||[],onValuesChange:T,placeholder:"All",searchPlaceholder:"Search API groups...",disabled:a,loading:g,className:"min-w-[140px]"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(he,{type:"text",value:p,onChange:A,placeholder:"Filter by name...",className:"min-w-[140px] pr-8",disabled:a}),p&&s.jsx(X,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6",onClick:G,disabled:a,"aria-label":"Clear resource name",children:""})]})]}),c&&s.jsxs("div",{className:"flex flex-col gap-2 flex-1 min-w-[180px]",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(he,{type:"text",value:x,onChange:B,placeholder:"Search activities...",className:"pr-8",disabled:a}),x&&s.jsx(X,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6",onClick:z,disabled:a,"aria-label":"Clear search",children:""})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 ml-auto",children:[s.jsx(ie,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Time Range"}),s.jsx(ji,{presets:Sr,selectedPreset:N,onPresetSelect:F,onCustomRangeApply:I,customStart:S,customEnd:j,disabled:a,displayLabel:U()})]})]})})}function ox({client:e,initialFilters:t={changeSource:"human"},initialTimeRange:n={start:"now-7d"},pageSize:r=30,onResourceClick:o,onActivityClick:a,compact:i=!1,resourceUid:c,showFilters:d=!0,className:u="",infiniteScroll:m=!0,loadMoreThreshold:f=200,onCreatePolicy:g,enableStreaming:v=!1}){const x={...t,resourceUid:c||t.resourceUid},{activities:h,isLoading:p,error:b,hasMore:y,filters:w,timeRange:N,refresh:S,loadMore:C,setFilters:j,setTimeRange:R,isStreaming:D,startStreaming:F,stopStreaming:I,newActivitiesCount:B}=Si({client:e,initialFilters:x,initialTimeRange:n,pageSize:r,enableStreaming:v,autoStartStreaming:!0}),z=l.useRef(null),E=l.useRef(null),[O,T]=l.useState(null),[L,A]=l.useState(!0);l.useEffect(()=>{(async()=>{var H;try{const $=await e.listPolicies();T((((H=$.items)==null?void 0:H.length)??0)>0)}catch{T(!0)}finally{A(!1)}})()},[e]),l.useEffect(()=>{S()},[]),l.useEffect(()=>{if(!m||!E.current)return;const _=new IntersectionObserver(H=>{H[0].isIntersecting&&y&&!p&&C()},{root:z.current,rootMargin:`${f}px`,threshold:0});return _.observe(E.current),()=>{_.disconnect()}},[m,y,p,C,f]);const G=l.useCallback(_=>{j(_)},[j]),U=l.useCallback(_=>{R(_)},[R]),M=l.useCallback(()=>{C()},[C]),k=l.useCallback(()=>{D?I():F()},[D,F,I]),W=i?`p-4 shadow-none border-border ${u}`:`p-6 ${u}`,P=i?"max-h-[40vh] overflow-y-auto pr-2":"max-h-[60vh] overflow-y-auto pr-2";return s.jsxs(ue,{className:W,children:[v&&s.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h3",{className:"text-sm font-medium text-foreground m-0",children:"Activity Feed"}),D&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"relative flex h-2 w-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 dark:bg-green-500 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500 dark:bg-green-400"})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Live"})]}),B>0&&s.jsxs(le,{variant:"secondary",className:"text-xs",children:["+",B," new"]})]}),s.jsx(X,{variant:"ghost",size:"sm",onClick:k,className:"text-xs",children:D?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),s.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),"Pause"]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("polygon",{points:"5,3 19,12 5,21",fill:"currentColor"})}),"Resume"]})})]}),d&&s.jsx(Cp,{client:e,filters:w,timeRange:N,onFiltersChange:G,onTimeRangeChange:U,disabled:p,showSearch:!i,showAdvancedFilters:!1}),b&&s.jsxs(be,{variant:"destructive",className:"mb-4 flex justify-between items-center gap-4",children:[s.jsx(ye,{className:"text-sm",children:b.message}),s.jsx(X,{variant:"outline",size:"sm",onClick:S,children:"Retry"})]}),!L&&O===!1&&s.jsxs("div",{className:"flex flex-col items-center py-12 px-8 text-center bg-muted border border-dashed border-border rounded-xl mb-4",children:[s.jsx("div",{className:"flex justify-center mb-4 text-muted-foreground",children:s.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"}),s.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),s.jsx("path",{d:"M9 12h6"}),s.jsx("path",{d:"M9 16h6"})]})}),s.jsx("h3",{className:"m-0 mb-2 text-lg font-semibold text-foreground leading-snug",children:"Get started with activity logging"}),s.jsx("p",{className:"m-0 mb-6 text-sm leading-relaxed text-muted-foreground max-w-[400px]",children:"Activity policies define which resources to track and how to summarize changes. Create your first policy to start seeing activity logs here."}),g&&s.jsx(X,{onClick:g,children:"Create Policy"})]}),s.jsxs("div",{className:P,ref:z,children:[h.length===0&&!p&&O!==!1&&s.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[s.jsx("p",{className:"m-0",children:"No activities found"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2 m-0",children:"Try adjusting your filters or time range"})]}),h.map((_,H)=>{var $,Y;return s.jsx(Ci,{activity:_,onResourceClick:o,onActivityClick:a,compact:i,isNew:v&&H<B},(($=_.metadata)==null?void 0:$.uid)||((Y=_.metadata)==null?void 0:Y.name))}),m&&y&&s.jsx("div",{ref:E,className:"h-px mt-4"}),p&&s.jsxs("div",{className:"flex items-center justify-center gap-3 py-8 text-muted-foreground text-sm",children:[s.jsx("div",{className:"w-5 h-5 border-[3px] border-muted border-t-primary rounded-full animate-spin"}),s.jsx("span",{children:"Loading activities..."})]}),!m&&y&&!p&&s.jsx("div",{className:"flex justify-center p-4 mt-4",children:s.jsx(X,{onClick:M,children:"Load more"})}),!y&&h.length>0&&!p&&s.jsx("div",{className:"text-center py-6 text-muted-foreground text-sm border-t border-border mt-4",children:"No more activities to load"})]})]})}function kp(e){if(e.uid)return`Resource History (UID: ${e.uid.substring(0,8)}...)`;const t=[];return e.kind&&t.push(e.kind),e.name&&t.push(e.name),e.namespace&&t.push(`in ${e.namespace}`),e.apiGroup&&t.push(`(${e.apiGroup})`),t.length>0?t.join(" "):"Resource History"}function ax({client:e,resourceFilter:t,startTime:n="now-30d",limit:r=50,showHeader:o=!0,compact:a=!1,onActivityClick:i,onResourceClick:c,className:d}){const u=l.useMemo(()=>{const N={};return t.uid?N.resourceUid=t.uid:(t.apiGroup&&(N.apiGroups=[t.apiGroup]),t.kind&&(N.resourceKinds=[t.kind]),t.namespace&&(N.resourceNamespaces=[t.namespace]),t.name&&(N.resourceName=t.name)),N},[t]),m=l.useMemo(()=>JSON.stringify(t),[t]),{activities:f,isLoading:g,error:v,hasMore:x,refresh:h,loadMore:p}=Si({client:e,initialFilters:u,initialTimeRange:{start:n},pageSize:r,enableStreaming:!1});l.useEffect(()=>{h()},[m]);const b=l.useCallback(()=>{p()},[p]),y=kp(t),w=t.uid||t.apiGroup||t.kind||t.namespace||t.name;return s.jsxs(ue,{className:V(a?"p-0 shadow-none border-0":"",d),children:[o&&s.jsx(it,{className:V(a?"px-0 pt-0 pb-3":"pb-4"),children:s.jsxs(Pn,{className:"text-base font-semibold text-foreground flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),y]})}),s.jsxs(xe,{className:V(a?"p-0":""),children:[!w&&s.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("p",{className:"m-0 text-sm",children:"No resource filter specified"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1 m-0",children:"Provide at least one filter criterion to view resource history"})]}),w&&v&&s.jsx(be,{variant:"destructive",className:"mb-4",children:s.jsxs(ye,{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{className:"text-sm",children:v.message}),s.jsx(X,{variant:"outline",size:"sm",onClick:h,children:"Retry"})]})}),w&&g&&f.length===0&&s.jsxs("div",{className:"flex items-center justify-center gap-3 py-12 text-muted-foreground text-sm",children:[s.jsx("div",{className:"w-5 h-5 border-[3px] border-muted border-t-primary rounded-full animate-spin"}),s.jsx("span",{children:"Loading history..."})]}),w&&!g&&f.length===0&&!v&&s.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("p",{className:"m-0 text-sm",children:"No history found for this resource"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1 m-0",children:"Changes will appear here once activity policies are configured"})]}),w&&f.length>0&&s.jsxs("div",{className:"relative",children:[f.map((N,S)=>{var j,R;const C=((j=N.metadata)==null?void 0:j.uid)||((R=N.metadata)==null?void 0:R.name)||String(S);return s.jsx(Ci,{activity:N,variant:"timeline",compact:a,isFirst:S===0,isLast:S===f.length-1&&!x,onActivityClick:i,onResourceClick:c},C)}),g&&f.length>0&&s.jsx("div",{className:V("relative",a?"pl-8":"pl-10"),children:s.jsxs("div",{className:"flex items-center gap-3 py-4 text-muted-foreground text-sm",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-muted border-t-primary rounded-full animate-spin"}),s.jsx("span",{children:"Loading more..."})]})}),x&&!g&&s.jsxs("div",{className:V("relative",a?"pl-8":"pl-10"),children:[s.jsx("div",{className:V("absolute w-0.5 bg-border",a?"left-[11px] top-0 h-4":"left-[15px] top-0 h-5")}),s.jsx(X,{variant:"ghost",size:"sm",onClick:b,className:"text-muted-foreground hover:text-foreground mt-2",children:"Load more history"})]})]}),w&&f.length>0&&s.jsxs("div",{className:V("text-xs text-muted-foreground mt-4 pt-3 border-t border-border",""),children:["Showing ",f.length," event",f.length!==1?"s":"",x&&" (more available)"]})]})]})}const dr=300;function Ep(e){const t=[];return e.eventType&&e.eventType!=="all"&&t.push(`type=${e.eventType}`),e.involvedKinds&&e.involvedKinds.length===1&&t.push(`involvedObject.kind=${e.involvedKinds[0]}`),e.involvedName&&t.push(`involvedObject.name=${e.involvedName}`),e.reasons&&e.reasons.length===1&&t.push(`reason=${e.reasons[0]}`),e.sourceComponents&&e.sourceComponents.length===1&&t.push(`source.component=${e.sourceComponents[0]}`),e.namespaces&&e.namespaces.length===1&&t.push(`metadata.namespace=${e.namespaces[0]}`),t.length>0?t.join(","):void 0}function ur(e,t){return e.filter(n=>{var r,o,a;return!(t.involvedKinds&&t.involvedKinds.length>1&&!t.involvedKinds.includes(((r=n.involvedObject)==null?void 0:r.kind)||"")||t.reasons&&t.reasons.length>1&&!t.reasons.includes(n.reason||"")||t.sourceComponents&&t.sourceComponents.length>1&&!t.sourceComponents.includes(((o=n.source)==null?void 0:o.component)||"")||t.namespaces&&t.namespaces.length>1&&!t.namespaces.includes(((a=n.metadata)==null?void 0:a.namespace)||""))})}function Rp({client:e,initialFilters:t={},initialTimeRange:n={start:"now-24h"},pageSize:r=50,namespace:o,enableStreaming:a=!1,autoStartStreaming:i=!0}){const[c,d]=l.useState([]),[u,m]=l.useState(!1),[f,g]=l.useState(null),[v,x]=l.useState(),[h,p]=l.useState(t),[b,y]=l.useState(n),[w,N]=l.useState(!1),[S,C]=l.useState(0),j=l.useRef(),R=l.useRef(null),D=l.useRef(!1),F=l.useRef(!1),I=l.useRef(null),B=l.useCallback(k=>({namespace:o,fieldSelector:Ep(h),limit:r,continue:k}),[h,o,r]),z=l.useCallback(k=>{var P,_;if(k.type==="ERROR"){console.error("Watch error:",k.object);return}if(k.type==="BOOKMARK"){(P=k.object.metadata)!=null&&P.resourceVersion&&(j.current=k.object.metadata.resourceVersion);return}(_=k.object.metadata)!=null&&_.resourceVersion&&(j.current=k.object.metadata.resourceVersion),ur([k.object],h).length>0&&(k.type==="ADDED"?(d(H=>H.some(Y=>{var Q,J,ee,se;return((Q=Y.metadata)==null?void 0:Q.name)===((J=k.object.metadata)==null?void 0:J.name)&&((ee=Y.metadata)==null?void 0:ee.namespace)===((se=k.object.metadata)==null?void 0:se.namespace)})?H:[k.object,...H]),C(H=>H+1)):k.type==="MODIFIED"?d(H=>H.map($=>{var Y,Q,J,ee;return((Y=$.metadata)==null?void 0:Y.name)===((Q=k.object.metadata)==null?void 0:Q.name)&&((J=$.metadata)==null?void 0:J.namespace)===((ee=k.object.metadata)==null?void 0:ee.namespace)?k.object:$})):k.type==="DELETED"&&d(H=>H.filter($=>{var Y,Q,J,ee;return!(((Y=$.metadata)==null?void 0:Y.name)===((Q=k.object.metadata)==null?void 0:Q.name)&&((J=$.metadata)==null?void 0:J.namespace)===((ee=k.object.metadata)==null?void 0:ee.namespace))})))},[h]),E=l.useCallback(()=>{if(R.current)return;const k=B(),{stop:W}=e.watchEvents(k,{resourceVersion:j.current,onEvent:z,onError:P=>{console.error("Watch stream error:",P),g(P),N(!1),R.current=null},onClose:()=>{N(!1),R.current=null}});R.current=W,N(!0),C(0)},[e,B,z]),O=l.useCallback(()=>{R.current&&(R.current(),R.current=null),N(!1)},[]),T=l.useCallback(async()=>{var k,W;m(!0),g(null),C(0);try{const P=B(),_=await e.listEvents(P),H=ur(_.items||[],h);d(H),x((k=_.metadata)==null?void 0:k.continue),(W=_.metadata)!=null&&W.resourceVersion&&(j.current=_.metadata.resourceVersion),F.current=!0,D.current&&a&&(D.current=!1,setTimeout(()=>{R.current},0))}catch(P){g(P instanceof Error?P:new Error(String(P))),D.current=!1}finally{m(!1)}},[e,B,h,a]),L=l.useCallback(async()=>{var k;if(!(!v||u)){m(!0),g(null);try{const W=B(v),P=await e.listEvents(W),_=ur(P.items||[],h);d(H=>[...H,..._]),x((k=P.metadata)==null?void 0:k.continue)}catch(W){g(W instanceof Error?W:new Error(String(W)))}finally{m(!1)}}},[e,B,v,u,h]),A=l.useCallback(k=>{w&&(D.current=!0,O()),p(k),d([]),x(void 0),j.current=void 0,I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{I.current=null},dr)},[O,w]),G=l.useCallback(k=>{w&&(D.current=!0,O()),y(k),d([]),x(void 0),j.current=void 0,I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{I.current=null},dr)},[O,w]),U=l.useCallback(()=>{O(),d([]),g(null),x(void 0),p(t),y(n),C(0),j.current=void 0},[t,n,O]);l.useEffect(()=>{if(F.current)return I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{I.current=null,T()},dr),()=>{I.current&&(clearTimeout(I.current),I.current=null)}},[h,b]),l.useEffect(()=>{a&&i&&c.length>0&&!w&&!u&&E()},[a,i,c.length,w,u,E]),l.useEffect(()=>{a&&D.current&&c.length>0&&!w&&!u&&(D.current=!1,E())},[a,c.length,w,u,E]),l.useEffect(()=>()=>{R.current&&R.current(),I.current&&clearTimeout(I.current)},[]);const M=l.useMemo(()=>!!v,[v]);return{events:c,isLoading:u,error:f,hasMore:M,filters:h,timeRange:b,refresh:T,loadMore:L,setFilters:A,setTimeRange:G,reset:U,isStreaming:w,startStreaming:E,stopStreaming:O,newEventsCount:S}}function Pp(e){if(!e)return"Unknown time";try{const t=new Date(e);return Ho(t,{addSuffix:!0})}catch{return e}}function fr(e){if(!e)return"Unknown time";try{return Bt(new Date(e),"yyyy-MM-dd HH:mm:ss")}catch{return e}}function Ap(e){return e==="Warning"?{variant:"default",className:"bg-amber-500 hover:bg-amber-500/80 text-white"}:{variant:"default",className:"bg-green-500 hover:bg-green-500/80 text-white"}}function Tp(e){if(!e)return"Unknown";const t=[e.kind,e.namespace,e.name].filter(Boolean);return e.namespace&&e.name?`${e.kind||"Object"} ${e.namespace}/${e.name}`:e.name?`${e.kind||"Object"} ${e.name}`:t.join("/")||"Unknown"}function Op({event:e,onObjectClick:t,onEventClick:n,isSelected:r=!1,className:o="",compact:a=!1,isNew:i=!1}){const[c,d]=l.useState(!1),{involvedObject:u,reason:m,message:f,type:g,source:v,count:x,firstTimestamp:h,lastTimestamp:p,metadata:b}=e,y=Ap(g),w=()=>{n==null||n(e)},N=j=>{j.stopPropagation(),u&&t&&t(u)},S=j=>{j.stopPropagation(),d(!c)},C=p||h||(b==null?void 0:b.creationTimestamp);return s.jsxs(ue,{className:V("cursor-pointer transition-all duration-200","hover:border-rose-300 hover:shadow-sm hover:-translate-y-px dark:hover:border-rose-600",a?"p-3 mb-2":"p-4 mb-3",r&&"border-rose-300 bg-rose-50 shadow-md dark:border-rose-600 dark:bg-rose-950/50",i&&"border-l-4 border-l-green-500 bg-green-50/50 dark:border-l-green-400 dark:bg-green-950/30",o),onClick:w,children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"shrink-0",children:s.jsx(le,{variant:y.variant,className:V("text-xs font-medium",y.className),children:g||"Normal"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-start gap-4 mb-2",children:[s.jsx("div",{className:V("leading-relaxed text-foreground",a?"text-sm":"text-[0.9375rem]"),children:f||"No message"}),s.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",title:fr(C),children:Pp(C)})]}),s.jsxs("div",{className:"flex items-center flex-wrap gap-x-3 gap-y-1 text-xs text-muted-foreground",children:[m&&s.jsx(le,{variant:"outline",className:"text-xs font-normal",children:m}),s.jsx("button",{type:"button",onClick:N,className:"text-primary hover:underline cursor-pointer bg-transparent border-none p-0",children:Tp(u)}),(v==null?void 0:v.component)&&s.jsxs("span",{className:"text-muted-foreground",children:["via ",v.component]}),x&&x>1&&s.jsxs("span",{className:"text-muted-foreground",children:["(",x," times)"]}),s.jsx(X,{variant:"ghost",size:"sm",className:"ml-auto h-auto py-0 px-1 text-xs text-muted-foreground hover:text-foreground",onClick:S,"aria-expanded":c,children:c?" Less":" More"})]})]})]}),c&&s.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:s.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[(b==null?void 0:b.namespace)&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground",children:"Namespace:"}),s.jsx("span",{className:"font-mono text-foreground",children:b.namespace})]}),(b==null?void 0:b.name)&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground",children:"Event Name:"}),s.jsx("span",{className:"font-mono text-foreground truncate",title:b.name,children:b.name})]}),(u==null?void 0:u.uid)&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground",children:"Object UID:"}),s.jsx("span",{className:"font-mono text-foreground truncate",title:u.uid,children:u.uid})]}),(u==null?void 0:u.fieldPath)&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground",children:"Field Path:"}),s.jsx("span",{className:"font-mono text-foreground",children:u.fieldPath})]}),(v==null?void 0:v.host)&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground",children:"Source Host:"}),s.jsx("span",{className:"font-mono text-foreground",children:v.host})]}),h&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground",children:"First Seen:"}),s.jsx("span",{className:"text-foreground",children:fr(h)})]}),p&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground",children:"Last Seen:"}),s.jsx("span",{className:"text-foreground",children:fr(p)})]})]})})]})}function Ip(e,t,n={}){const[r,o]=l.useState([]),[a,i]=l.useState([]),[c,d]=l.useState([]),[u,m]=l.useState([]),[f,g]=l.useState([]),[v,x]=l.useState(!1),[h,p]=l.useState(null),b=l.useRef(null),y=l.useCallback(async()=>{var S;const N=`${t.start}-${t.end||"now"}`;if(b.current!==N){x(!0),p(null);try{const j=((S=(await e.queryEventFacets({timeRange:{start:t.start,end:t.end},facets:[{field:"involvedObject.kind",limit:50},{field:"reason",limit:50},{field:"type",limit:10},{field:"source.component",limit:50},{field:"namespace",limit:50}]})).status)==null?void 0:S.facets)||[],R=j.find(z=>z.field==="involvedObject.kind");o((R==null?void 0:R.values)||[]);const D=j.find(z=>z.field==="reason");i((D==null?void 0:D.values)||[]);const F=j.find(z=>z.field==="type");d((F==null?void 0:F.values)||[]);const I=j.find(z=>z.field==="source.component");m((I==null?void 0:I.values)||[]);const B=j.find(z=>z.field==="namespace");g((B==null?void 0:B.values)||[]),b.current=N}catch(C){p(C instanceof Error?C:new Error(String(C)))}finally{x(!1)}}},[e,t.start,t.end]);l.useEffect(()=>{y()},[y]);const w=l.useCallback(async()=>{b.current=null,await y()},[y]);return{involvedKinds:r,reasons:a,eventTypes:c,sourceComponents:u,namespaces:f,isLoading:v,error:h,refresh:w}}const mo=[{value:"all",label:"All",description:"Show all events"},{value:"Normal",label:"Normal",description:"Show only normal events"},{value:"Warning",label:"Warning",description:"Show only warning events"}];function Dp({value:e,onChange:t,className:n="",disabled:r=!1}){return s.jsx("div",{className:V("inline-flex border border-input rounded-md overflow-hidden",n),role:"group","aria-label":"Filter by event type",children:mo.map((o,a)=>s.jsx(X,{type:"button",variant:"ghost",className:V("rounded-none px-4 py-2 text-sm font-medium transition-all duration-200",a<mo.length-1&&"border-r border-input",e===o.value?o.value==="Warning"?"bg-amber-500 text-white hover:bg-amber-500/90":o.value==="Normal"?"bg-green-500 text-white hover:bg-green-500/90":"bg-[#BF9595] text-[#0C1D31] hover:bg-[#BF9595]/90":"bg-muted text-foreground hover:bg-muted/80"),onClick:()=>t(o.value),disabled:r,"aria-pressed":e===o.value,title:o.description,children:o.label},o.value))})}function Mp({client:e,filters:t,timeRange:n,onFiltersChange:r,onTimeRangeChange:o,disabled:a=!1,className:i=""}){const{involvedKinds:c,reasons:d,sourceComponents:u,namespaces:m,isLoading:f}=Ip(e,n,t),g=l.useCallback(x=>{r({...t,eventType:x==="all"?void 0:x})},[t,r]),v=l.useCallback((x,h)=>{o({start:x,end:h})},[o]);return s.jsxs("div",{className:V("space-y-4 mb-4",i),children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsx(Dp,{value:t.eventType||"all",onChange:g,disabled:a}),s.jsx(fp,{initialRange:{start:n.start,end:n.end||""},onChange:x=>v(x.start,x.end||void 0)})]}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Namespace"}),s.jsx("select",{multiple:!0,className:V("min-w-[150px] h-[80px] text-sm rounded-md border border-input bg-background px-2 py-1","focus:outline-none focus:ring-2 focus:ring-ring",a&&"opacity-50 cursor-not-allowed"),disabled:a||f,value:t.namespaces||[],onChange:x=>{const h=Array.from(x.target.selectedOptions).map(p=>p.value);r({...t,namespaces:h.length>0?h:void 0})},children:m.map(x=>s.jsxs("option",{value:x.value,children:[x.value," (",x.count,")"]},x.value))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Involved Kind"}),s.jsx("select",{multiple:!0,className:V("min-w-[150px] h-[80px] text-sm rounded-md border border-input bg-background px-2 py-1","focus:outline-none focus:ring-2 focus:ring-ring",a&&"opacity-50 cursor-not-allowed"),disabled:a||f,value:t.involvedKinds||[],onChange:x=>{const h=Array.from(x.target.selectedOptions).map(p=>p.value);r({...t,involvedKinds:h.length>0?h:void 0})},children:c.map(x=>s.jsxs("option",{value:x.value,children:[x.value," (",x.count,")"]},x.value))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Reason"}),s.jsx("select",{multiple:!0,className:V("min-w-[150px] h-[80px] text-sm rounded-md border border-input bg-background px-2 py-1","focus:outline-none focus:ring-2 focus:ring-ring",a&&"opacity-50 cursor-not-allowed"),disabled:a||f,value:t.reasons||[],onChange:x=>{const h=Array.from(x.target.selectedOptions).map(p=>p.value);r({...t,reasons:h.length>0?h:void 0})},children:d.map(x=>s.jsxs("option",{value:x.value,children:[x.value," (",x.count,")"]},x.value))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Source"}),s.jsx("select",{multiple:!0,className:V("min-w-[150px] h-[80px] text-sm rounded-md border border-input bg-background px-2 py-1","focus:outline-none focus:ring-2 focus:ring-ring",a&&"opacity-50 cursor-not-allowed"),disabled:a||f,value:t.sourceComponents||[],onChange:x=>{const h=Array.from(x.target.selectedOptions).map(p=>p.value);r({...t,sourceComponents:h.length>0?h:void 0})},children:u.map(x=>s.jsxs("option",{value:x.value,children:[x.value," (",x.count,")"]},x.value))})]})]})]})}function ix({client:e,initialFilters:t={},initialTimeRange:n={start:"now-24h"},pageSize:r=50,onObjectClick:o,onEventClick:a,compact:i=!1,namespace:c,showFilters:d=!0,className:u="",infiniteScroll:m=!0,loadMoreThreshold:f=200,enableStreaming:g=!1}){const{events:v,isLoading:x,error:h,hasMore:p,filters:b,timeRange:y,refresh:w,loadMore:N,setFilters:S,setTimeRange:C,isStreaming:j,startStreaming:R,stopStreaming:D,newEventsCount:F}=Rp({client:e,initialFilters:t,initialTimeRange:n,pageSize:r,namespace:c,enableStreaming:g,autoStartStreaming:!0}),I=l.useRef(null),B=l.useRef(null);l.useEffect(()=>{w()},[]),l.useEffect(()=>{if(!m||!B.current)return;const G=new IntersectionObserver(U=>{U[0].isIntersecting&&p&&!x&&N()},{root:I.current,rootMargin:`${f}px`,threshold:0});return G.observe(B.current),()=>{G.disconnect()}},[m,p,x,N,f]);const z=l.useCallback(G=>{S(G)},[S]),E=l.useCallback(G=>{C(G)},[C]),O=l.useCallback(()=>{N()},[N]),T=l.useCallback(()=>{j?D():R()},[j,R,D]),L=i?`p-4 shadow-none border-border ${u}`:`p-6 ${u}`,A=i?"max-h-[40vh] overflow-y-auto pr-2":"max-h-[60vh] overflow-y-auto pr-2";return s.jsxs(ue,{className:L,children:[g&&s.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h3",{className:"text-sm font-medium text-foreground m-0",children:"Events Feed"}),j&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"relative flex h-2 w-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 dark:bg-green-500 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500 dark:bg-green-400"})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Live"})]}),F>0&&s.jsxs(le,{variant:"secondary",className:"text-xs",children:["+",F," new"]})]}),s.jsx(X,{variant:"ghost",size:"sm",onClick:T,className:"text-xs",children:j?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),s.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),"Pause"]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("polygon",{points:"5,3 19,12 5,21",fill:"currentColor"})}),"Resume"]})})]}),d&&s.jsx(Mp,{client:e,filters:b,timeRange:y,onFiltersChange:z,onTimeRangeChange:E,disabled:x}),h&&s.jsxs(be,{variant:"destructive",className:"mb-4 flex justify-between items-center gap-4",children:[s.jsx(ye,{className:"text-sm",children:h.message}),s.jsx(X,{variant:"outline",size:"sm",onClick:w,children:"Retry"})]}),s.jsxs("div",{className:A,ref:I,children:[v.length===0&&!x&&s.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[s.jsx("p",{className:"m-0",children:"No events found"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2 m-0",children:"Try adjusting your filters or time range"})]}),v.map((G,U)=>{var M,k,W;return s.jsx(Op,{event:G,onObjectClick:o,onEventClick:a,compact:i,isNew:g&&U<F},`${(M=G.metadata)==null?void 0:M.namespace}-${(k=G.metadata)==null?void 0:k.name}-${(W=G.metadata)==null?void 0:W.uid}`)}),m&&p&&s.jsx("div",{ref:B,className:"h-px mt-4"}),x&&s.jsxs("div",{className:"flex items-center justify-center gap-3 py-8 text-muted-foreground text-sm",children:[s.jsx("div",{className:"w-5 h-5 border-[3px] border-muted border-t-primary rounded-full animate-spin"}),s.jsx("span",{children:"Loading events..."})]}),!m&&p&&!x&&s.jsx("div",{className:"flex justify-center p-4 mt-4",children:s.jsx(X,{onClick:O,children:"Load more"})}),!p&&v.length>0&&!x&&s.jsx("div",{className:"text-center py-6 text-muted-foreground text-sm border-t border-border mt-4",children:"No more events to load"})]})]})}function Lp(e){const t=new Map;for(const r of e){const o=r.spec.resource.apiGroup||"(core)",a=t.get(o)||[];a.push(r),t.set(o,a)}return Array.from(t.entries()).sort(([r],[o])=>r.localeCompare(o)).map(([r,o])=>({apiGroup:r,policies:o.sort((a,i)=>{var d,u;const c=a.spec.resource.kind.localeCompare(i.spec.resource.kind);return c!==0?c:(((d=a.metadata)==null?void 0:d.name)||"").localeCompare(((u=i.metadata)==null?void 0:u.name)||"")})}))}function $p({client:e,groupByApiGroup:t=!0}){const[n,r]=l.useState([]),[o,a]=l.useState(!1),[i,c]=l.useState(!1),[d,u]=l.useState(null),m=l.useMemo(()=>t?Lp(n):[{apiGroup:"All Policies",policies:n}],[n,t]),f=l.useCallback(async()=>{a(!0),u(null);try{const v=await e.listPolicies();r(v.items||[])}catch(v){u(v instanceof Error?v:new Error(String(v)))}finally{a(!1)}},[e]),g=l.useCallback(async v=>{c(!0),u(null);try{await e.deletePolicy(v),r(x=>x.filter(h=>{var p;return((p=h.metadata)==null?void 0:p.name)!==v}))}catch(x){throw u(x instanceof Error?x:new Error(String(x))),x}finally{c(!1)}},[e]);return{policies:n,groups:m,isLoading:o,error:d,refresh:f,deletePolicy:g,isDeleting:i}}const _p=Na,Fp=ja,ki=l.forwardRef(({className:e,...t},n)=>s.jsx(Gr,{ref:n,className:V("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ki.displayName=Gr.displayName;const Ei=l.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(Fp,{children:[s.jsx(ki,{}),s.jsxs(Hr,{ref:r,className:V("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(gm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(vn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ei.displayName=Hr.displayName;const Ri=({className:e,...t})=>s.jsx("div",{className:V("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ri.displayName="DialogHeader";const Pi=({className:e,...t})=>s.jsx("div",{className:V("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Pi.displayName="DialogFooter";const Ai=l.forwardRef(({className:e,...t},n)=>s.jsx(Sa,{ref:n,className:V("text-lg font-semibold leading-none tracking-tight",e),...t}));Ai.displayName=Sa.displayName;const Ti=l.forwardRef(({className:e,...t},n)=>s.jsx(Ca,{ref:n,className:V("text-sm text-muted-foreground",e),...t}));Ti.displayName=Ca.displayName;function cx({client:e,onEditPolicy:t,onCreatePolicy:n,groupByApiGroup:r=!0,className:o=""}){const a=$p({client:e,groupByApiGroup:r}),[i,c]=l.useState({isOpen:!1,policyName:""}),[d,u]=l.useState(new Set);l.useEffect(()=>{a.refresh()},[]),l.useEffect(()=>{a.groups.length>0&&d.size===0&&u(new Set(a.groups.map(p=>p.apiGroup)))},[a.groups]);const m=l.useCallback(p=>{u(b=>{const y=new Set(b);return y.has(p)?y.delete(p):y.add(p),y})},[]),f=p=>{c({isOpen:!0,policyName:p})},g=async()=>{const{policyName:p}=i;c({isOpen:!1,policyName:""});try{await a.deletePolicy(p)}catch(b){console.error("Failed to delete policy:",b)}},v=()=>{c({isOpen:!1,policyName:""})},x=p=>{var b,y;return{audit:((b=p.spec.auditRules)==null?void 0:b.length)||0,event:((y=p.spec.eventRules)==null?void 0:y.length)||0}},h=p=>{var w;const b=(w=p.status)==null?void 0:w.conditions;if(!b||b.length===0)return{status:"pending",message:"Status not yet available"};const y=b.find(N=>N.type==="Ready");return y?y.status==="True"?{status:"ready",message:y.message||"All rules compiled successfully"}:y.status==="False"?{status:"error",message:y.message||y.reason||"Rule compilation failed"}:{status:"pending",message:y.message||"Status unknown"}:{status:"pending",message:"Status not yet available"}};return s.jsxs(ue,{className:`rounded-xl ${o}`,children:[s.jsxs(it,{className:"pb-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Pn,{children:"Activity Policies"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(X,{variant:"outline",size:"icon",onClick:a.refresh,disabled:a.isLoading,title:"Refresh policy list",children:a.isLoading?s.jsx("span",{className:"w-3.5 h-3.5 border-2 border-border border-t-primary rounded-full animate-spin"}):""}),n&&s.jsx(X,{onClick:n,className:"bg-[#BF9595] text-[#0C1D31] hover:bg-[#A88080]",children:"+ Create Policy"})]})]}),s.jsx($r,{className:"mt-4"})]}),s.jsxs(xe,{children:[a.error&&s.jsxs("div",{className:"p-4 bg-red-50 text-red-800 border border-red-200 dark:bg-red-950/50 dark:text-red-200 dark:border-red-800 rounded-lg mb-4 flex justify-between items-center",children:[s.jsx("strong",{children:"Error:"})," ",a.error.message,s.jsx(X,{variant:"outline",size:"sm",onClick:a.refresh,children:"Retry"})]}),a.isLoading&&a.policies.length===0&&s.jsxs("div",{className:"flex items-center justify-center gap-3 py-12 text-muted-foreground",children:[s.jsx("span",{className:"w-5 h-5 border-[3px] border-border border-t-[#BF9595] rounded-full animate-spin"}),"Loading policies..."]}),!a.isLoading&&!a.error&&a.policies.length===0&&s.jsxs("div",{className:"text-center py-12 px-8 text-muted-foreground",children:[s.jsx("div",{className:"text-5xl mb-4",children:""}),s.jsx("h3",{className:"m-0 mb-2 text-foreground",children:"No policies found"}),s.jsx("p",{className:"m-0 mb-6 max-w-[400px] mx-auto",children:"Activity policies define how audit events and Kubernetes events are translated into human-readable activity summaries."}),n&&s.jsx(X,{onClick:n,className:"bg-[#BF9595] text-[#0C1D31] hover:bg-[#A88080]",children:"Create your first policy"})]}),a.groups.length>0&&s.jsx("div",{className:"flex flex-col gap-4",children:a.groups.map(p=>s.jsxs("div",{className:"border border-input rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",className:"w-full flex items-center gap-3 px-4 py-3 bg-muted border-none cursor-pointer text-left text-[0.9375rem] font-medium text-foreground transition-colors duration-200 hover:bg-accent",onClick:()=>m(p.apiGroup),children:[s.jsx("span",{className:`text-xs text-muted-foreground transition-transform duration-200 ${d.has(p.apiGroup)?"rotate-90":""}`,children:""}),s.jsx("span",{className:"flex-1 font-mono",children:p.apiGroup}),s.jsx(le,{variant:"secondary",className:"rounded-full",children:p.policies.length})]}),d.has(p.apiGroup)&&s.jsx("div",{className:"p-2",children:s.jsxs("table",{className:"w-full border-collapse text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3 bg-muted text-muted-foreground font-medium border-b border-input",children:"Name"}),s.jsx("th",{className:"text-left px-4 py-3 bg-muted text-muted-foreground font-medium border-b border-input",children:"Status"}),s.jsx("th",{className:"text-left px-4 py-3 bg-muted text-muted-foreground font-medium border-b border-input",children:"Kind"}),s.jsx("th",{className:"text-left px-4 py-3 bg-muted text-muted-foreground font-medium border-b border-input",children:"Audit Rules"}),s.jsx("th",{className:"text-left px-4 py-3 bg-muted text-muted-foreground font-medium border-b border-input",children:"Event Rules"}),s.jsx("th",{className:"text-left px-4 py-3 bg-muted text-muted-foreground font-medium border-b border-input",children:"Actions"})]})}),s.jsx("tbody",{children:p.policies.map(b=>{var N,S;const y=x(b),w=h(b);return s.jsxs("tr",{className:"hover:bg-muted",children:[s.jsx("td",{className:"px-4 py-3 border-b border-border last:border-b-0 font-medium text-foreground",children:((N=b.metadata)==null?void 0:N.name)||"unnamed"}),s.jsx("td",{className:"px-4 py-3 border-b border-border last:border-b-0",children:s.jsx(le,{variant:w.status==="ready"?"success":w.status==="error"?"destructive":"secondary",className:w.status==="pending"?"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400":"",title:w.message,children:w.status==="ready"?"Ready":w.status==="error"?"Error":"Pending"})}),s.jsx("td",{className:"px-4 py-3 border-b border-border last:border-b-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(le,{className:"bg-[#E6F59F] text-[#0C1D31] hover:bg-[#E6F59F]",children:b.spec.resource.kind}),b.spec.resource.kindLabel&&s.jsxs("span",{className:"text-muted-foreground text-xs",children:["(",b.spec.resource.kindLabel,")"]})]})}),s.jsx("td",{className:"px-4 py-3 border-b border-border last:border-b-0 text-center",children:s.jsx(le,{variant:y.audit>0?"success":"secondary",className:y.audit===0?"bg-gray-100 text-gray-400 dark:bg-gray-800 dark:text-gray-500":"",children:y.audit})}),s.jsx("td",{className:"px-4 py-3 border-b border-border last:border-b-0 text-center",children:s.jsx(le,{variant:y.event>0?"success":"secondary",className:y.event===0?"bg-gray-100 text-gray-400 dark:bg-gray-800 dark:text-gray-500":"",children:y.event})}),s.jsx("td",{className:"px-4 py-3 border-b border-border last:border-b-0",children:s.jsxs("div",{className:"flex gap-2",children:[t&&s.jsx(X,{variant:"outline",size:"sm",onClick:()=>{var C;return t(((C=b.metadata)==null?void 0:C.name)||"")},title:"Edit policy",children:"Edit"}),s.jsx(X,{variant:"outline",size:"sm",onClick:()=>{var C;return f(((C=b.metadata)==null?void 0:C.name)||"")},disabled:a.isDeleting,title:"Delete policy",className:"text-red-600 border-red-200 hover:bg-red-50 hover:border-red-400 hover:text-red-600 dark:text-red-400 dark:border-red-800 dark:hover:bg-red-950/50 dark:hover:border-red-600 dark:hover:text-red-400",children:"Delete"})]})})]},(S=b.metadata)==null?void 0:S.name)})})]})})]},p.apiGroup))})]}),s.jsx(_p,{open:i.isOpen,onOpenChange:p=>!p&&v(),children:s.jsxs(Ei,{className:"max-w-[400px]",children:[s.jsxs(Ri,{children:[s.jsx(Ai,{children:"Delete Policy"}),s.jsxs(Ti,{children:["Are you sure you want to delete the policy"," ",s.jsx("strong",{children:i.policyName}),"?"]})]}),s.jsx("p",{className:"text-sm text-red-700 bg-red-50 dark:text-red-200 dark:bg-red-950/50 p-3 rounded-md",children:"This action cannot be undone. Activities already generated by this policy will remain, but no new activities will be created."}),s.jsxs(Pi,{children:[s.jsx(X,{variant:"outline",onClick:v,children:"Cancel"}),s.jsx(X,{variant:"destructive",onClick:g,children:"Delete Policy"})]})]})})]})}function ln(){return{resource:{apiGroup:"",kind:""},auditRules:[],eventRules:[]}}function ho(){return{match:"",summary:""}}function Wp(e,t){return JSON.stringify(e)===JSON.stringify(t)}function Vp({client:e,initialPolicyName:t}){const[n,r]=l.useState(null),[o,a]=l.useState(t||""),[i,c]=l.useState(ln()),[d,u]=l.useState(ln()),[m,f]=l.useState(t||""),[g,v]=l.useState(!1),[x,h]=l.useState(!1),[p,b]=l.useState(null),y=n===null,w=l.useMemo(()=>y&&o!==m?!0:!Wp(i,d),[i,d,o,m,y]),N=l.useCallback(L=>{c(A=>({...A,resource:L}))},[]),S=l.useCallback(L=>{c(A=>({...A,auditRules:L}))},[]),C=l.useCallback(L=>{c(A=>({...A,eventRules:L}))},[]),j=l.useCallback(()=>{c(L=>({...L,auditRules:[...L.auditRules||[],ho()]}))},[]),R=l.useCallback(()=>{c(L=>({...L,eventRules:[...L.eventRules||[],ho()]}))},[]),D=l.useCallback((L,A)=>{c(G=>{const U=[...G.auditRules||[]];return U[L]=A,{...G,auditRules:U}})},[]),F=l.useCallback((L,A)=>{c(G=>{const U=[...G.eventRules||[]];return U[L]=A,{...G,eventRules:U}})},[]),I=l.useCallback(L=>{c(A=>({...A,auditRules:(A.auditRules||[]).filter((G,U)=>U!==L)}))},[]),B=l.useCallback(L=>{c(A=>({...A,eventRules:(A.eventRules||[]).filter((G,U)=>U!==L)}))},[]),z=l.useCallback(async L=>{var A,G;v(!0),b(null);try{const U=await e.getPolicy(L);r(U),a(((A=U.metadata)==null?void 0:A.name)||L),c(U.spec),u(U.spec),f(((G=U.metadata)==null?void 0:G.name)||L)}catch(U){throw b(U instanceof Error?U:new Error(String(U))),U}finally{v(!1)}},[e]),E=l.useCallback(async L=>{var A,G;if(!o.trim())throw new Error("Policy name is required");h(!0),b(null);try{let U;return y?U=await e.createPolicy(o,i,L):U=await e.updatePolicy(o,i,L,(A=n==null?void 0:n.metadata)==null?void 0:A.resourceVersion),L||(r(U),u(U.spec),f(((G=U.metadata)==null?void 0:G.name)||o)),U}catch(U){const M=U instanceof Error?U:new Error(String(U));throw b(M),M}finally{h(!1)}},[e,o,i,y,n]),O=l.useCallback(()=>{c(d),a(m),b(null)},[d,m]),T=l.useCallback(()=>{r(null),a(""),c(ln()),u(ln()),f(""),b(null)},[]);return{policy:n,spec:i,name:o,isDirty:w,isLoading:g,isSaving:x,error:p,isNew:y,setName:a,setSpec:c,setResource:N,setAuditRules:S,setEventRules:C,addAuditRule:j,addEventRule:R,updateAuditRule:D,updateEventRule:F,removeAuditRule:I,removeEventRule:B,save:E,load:z,reset:O,clear:T}}function Oi(){return{level:"RequestResponse",auditID:"preview-"+Date.now(),stage:"ResponseComplete",requestURI:"/apis/example.com/v1/namespaces/default/examples/my-example",verb:"create",user:{username:"alice@example.com",uid:"user-123",groups:["users","developers"]},objectRef:{apiGroup:"example.com",apiVersion:"v1",resource:"examples",namespace:"default",name:"my-example",uid:"resource-456"},responseStatus:{code:201,status:"Success"},requestReceivedTimestamp:new Date().toISOString(),stageTimestamp:new Date().toISOString()}}function Bp(){return{type:"Normal",reason:"Created",message:"Example resource was created successfully",involvedObject:{apiVersion:"example.com/v1",kind:"Example",name:"my-example",namespace:"default",uid:"resource-456"},source:{component:"example-controller"},firstTimestamp:new Date().toISOString(),lastTimestamp:new Date().toISOString(),count:1,metadata:{name:"my-example.123abc",namespace:"default"}}}function zp(){return{type:"audit",audit:Oi()}}function Gp({client:e}){const[t,n]=l.useState([]),[r,o]=l.useState(new Set),[a,i]=l.useState(null),[c,d]=l.useState(!1),[u,m]=l.useState(null),f=l.useCallback(E=>{n(E),o(new Set(E.map((O,T)=>T))),i(null),m(null)},[]),g=l.useCallback(E=>{n(O=>{const T=[...O,E];return o(L=>new Set([...L,T.length-1])),T})},[]),v=l.useCallback(E=>{n(O=>O.filter((T,L)=>L!==E)),o(O=>{const T=new Set;return O.forEach(L=>{L<E?T.add(L):L>E&&T.add(L-1)}),T})},[]),x=l.useCallback(E=>{o(O=>{const T=new Set(O);return T.has(E)?T.delete(E):T.add(E),T})},[]),h=l.useCallback(()=>{o(new Set(t.map((E,O)=>O)))},[t]),p=l.useCallback(()=>{o(new Set)},[]),b=l.useCallback(E=>{const O=E.map(T=>({type:"audit",audit:T}));f(O)},[f]),y=l.useCallback(E=>{const O=E.map(T=>({type:"event",event:T}));f(O)},[f]),w=l.useCallback(()=>t.filter((E,O)=>r.has(O)),[t,r]),N=l.useCallback(()=>{const E=w();if(E.length===0)return"[]";if(E.length===1){const O=E[0],T=O.type==="audit"?O.audit:O.event;return JSON.stringify(T,null,2)}return JSON.stringify(E,null,2)},[w]),S=l.useCallback(async(E,O,T)=>{const L=w();if(L.length===0){const A=new Error("No inputs selected for preview");throw m(A),A}d(!0),m(null);try{const A={policy:E,inputs:L,kindLabel:O,kindLabelPlural:T},U=(await e.createPolicyPreview(A)).status||{activities:[],results:[],error:"No status returned from server"};return i(U),U}catch(A){const G=A instanceof Error?A:new Error(String(A));throw m(G),i({activities:[],results:[],error:G.message}),G}finally{d(!1)}},[e,w]),C=l.useCallback(()=>{i(null),m(null)},[]),j=l.useCallback(()=>{n([]),o(new Set),i(null),m(null)},[]),R=t[0]||zp(),D=l.useCallback(E=>{f([E])},[f]),F=l.useCallback(E=>{f([{type:"audit",audit:E}])},[f]),I=l.useCallback(E=>{f([{type:"event",event:E}])},[f]),B=l.useCallback(E=>{try{const O=JSON.parse(E);if(Array.isArray(O))f(O);else{const T=O.verb?"audit":"event";f(T==="audit"?[{type:"audit",audit:O}]:[{type:"event",event:O}])}}catch(O){m(new Error(`Invalid JSON: ${O instanceof Error?O.message:String(O)}`))}},[f]),z=l.useCallback(E=>{f(E==="audit"?[{type:"audit",audit:Oi()}]:[{type:"event",event:Bp()}])},[f]);return{inputs:t,selectedIndices:r,result:a,isLoading:c,error:u,setInputs:f,addInput:g,removeInput:v,toggleSelection:x,selectAll:h,deselectAll:p,setAuditInputs:b,setEventInputs:y,runPreview:S,clearResult:C,reset:j,getSelectedInputs:w,hasSelection:r.size>0,input:R,setInput:D,setAuditInput:F,setEventInput:I,setInputFromJson:B,setInputType:z,getInputJson:N}}function po(e,[t,n]){return Math.min(n,Math.max(t,e))}function Ii(e){const t=e+"CollectionProvider",[n,r]=He(t),[o,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=h=>{const{scope:p,children:b}=h,y=Xe.useRef(null),w=Xe.useRef(new Map).current;return s.jsx(o,{scope:p,itemMap:w,collectionRef:y,children:b})};i.displayName=t;const c=e+"CollectionSlot",d=yt(c),u=Xe.forwardRef((h,p)=>{const{scope:b,children:y}=h,w=a(c,b),N=ce(p,w.collectionRef);return s.jsx(d,{ref:N,children:y})});u.displayName=c;const m=e+"CollectionItemSlot",f="data-radix-collection-item",g=yt(m),v=Xe.forwardRef((h,p)=>{const{scope:b,children:y,...w}=h,N=Xe.useRef(null),S=ce(p,N),C=a(m,b);return Xe.useEffect(()=>(C.itemMap.set(N,{ref:N,...w}),()=>void C.itemMap.delete(N))),s.jsx(g,{[f]:"",ref:S,children:y})});v.displayName=m;function x(h){const p=a(e+"CollectionConsumer",h);return Xe.useCallback(()=>{const y=p.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(p.itemMap.values()).sort((C,j)=>w.indexOf(C.ref.current)-w.indexOf(j.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:i,Slot:u,ItemSlot:v},x,r]}var Hp=l.createContext(void 0);function hs(e){const t=l.useContext(Hp);return e||t||"ltr"}var Di=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Up="VisuallyHidden",Kp=l.forwardRef((e,t)=>s.jsx(Z.span,{...e,ref:t,style:{...Di,...e.style}}));Kp.displayName=Up;var qp=[" ","Enter","ArrowUp","ArrowDown"],Yp=[" ","Enter"],ot="Select",[Gn,Hn,Xp]=Ii(ot),[Et]=He(ot,[Xp,Vn]),Un=Vn(),[Qp,qe]=Et(ot),[Jp,Zp]=Et(ot),Mi=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:c,onValueChange:d,dir:u,name:m,autoComplete:f,disabled:g,required:v,form:x}=e,h=Un(t),[p,b]=l.useState(null),[y,w]=l.useState(null),[N,S]=l.useState(!1),C=hs(u),[j,R]=tt({prop:r,defaultProp:o??!1,onChange:a,caller:ot}),[D,F]=tt({prop:i,defaultProp:c,onChange:d,caller:ot}),I=l.useRef(null),B=p?x||!!p.closest("form"):!0,[z,E]=l.useState(new Set),O=Array.from(z).map(T=>T.props.value).join(";");return s.jsx(ni,{...h,children:s.jsxs(Qp,{required:v,scope:t,trigger:p,onTriggerChange:b,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:N,onValueNodeHasChildrenChange:S,contentId:me(),value:D,onValueChange:F,open:j,onOpenChange:R,dir:C,triggerPointerDownPosRef:I,disabled:g,children:[s.jsx(Gn.Provider,{scope:t,children:s.jsx(Jp,{scope:e.__scopeSelect,onNativeOptionAdd:l.useCallback(T=>{E(L=>new Set(L).add(T))},[]),onNativeOptionRemove:l.useCallback(T=>{E(L=>{const A=new Set(L);return A.delete(T),A})},[]),children:n})}),B?s.jsxs(oc,{"aria-hidden":!0,required:v,tabIndex:-1,name:m,autoComplete:f,value:D,onChange:T=>F(T.target.value),disabled:g,form:x,children:[D===void 0?s.jsx("option",{value:""}):null,Array.from(z)]},O):null]})})};Mi.displayName=ot;var Li="SelectTrigger",$i=l.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=Un(n),i=qe(Li,n),c=i.disabled||r,d=ce(t,i.onTriggerChange),u=Hn(n),m=l.useRef("touch"),[f,g,v]=ic(h=>{const p=u().filter(w=>!w.disabled),b=p.find(w=>w.value===i.value),y=cc(p,h,b);y!==void 0&&i.onValueChange(y.value)}),x=h=>{c||(i.onOpenChange(!0),v()),h&&(i.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return s.jsx(os,{asChild:!0,...a,children:s.jsx(Z.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":ac(i.value)?"":void 0,...o,ref:d,onClick:te(o.onClick,h=>{h.currentTarget.focus(),m.current!=="mouse"&&x(h)}),onPointerDown:te(o.onPointerDown,h=>{m.current=h.pointerType;const p=h.target;p.hasPointerCapture(h.pointerId)&&p.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(x(h),h.preventDefault())}),onKeyDown:te(o.onKeyDown,h=>{const p=f.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&g(h.key),!(p&&h.key===" ")&&qp.includes(h.key)&&(x(),h.preventDefault())})})})});$i.displayName=Li;var _i="SelectValue",Fi=l.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:i="",...c}=e,d=qe(_i,n),{onValueNodeHasChildrenChange:u}=d,m=a!==void 0,f=ce(t,d.onValueNodeChange);return fe(()=>{u(m)},[u,m]),s.jsx(Z.span,{...c,ref:f,style:{pointerEvents:"none"},children:ac(d.value)?s.jsx(s.Fragment,{children:i}):a})});Fi.displayName=_i;var eg="SelectIcon",Wi=l.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return s.jsx(Z.span,{"aria-hidden":!0,...o,ref:t,children:r||""})});Wi.displayName=eg;var tg="SelectPortal",Vi=e=>s.jsx(On,{asChild:!0,...e});Vi.displayName=tg;var at="SelectContent",Bi=l.forwardRef((e,t)=>{const n=qe(at,e.__scopeSelect),[r,o]=l.useState();if(fe(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?En.createPortal(s.jsx(zi,{scope:e.__scopeSelect,children:s.jsx(Gn.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx(Gi,{...e,ref:t})});Bi.displayName=at;var Ne=10,[zi,Ye]=Et(at),ng="SelectContentImpl",rg=yt("SelectContent.RemoveScroll"),Gi=l.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:c,sideOffset:d,align:u,alignOffset:m,arrowPadding:f,collisionBoundary:g,collisionPadding:v,sticky:x,hideWhenDetached:h,avoidCollisions:p,...b}=e,y=qe(at,n),[w,N]=l.useState(null),[S,C]=l.useState(null),j=ce(t,$=>N($)),[R,D]=l.useState(null),[F,I]=l.useState(null),B=Hn(n),[z,E]=l.useState(!1),O=l.useRef(!1);l.useEffect(()=>{if(w)return Wr(w)},[w]),Fr();const T=l.useCallback($=>{const[Y,...Q]=B().map(se=>se.ref.current),[J]=Q.slice(-1),ee=document.activeElement;for(const se of $)if(se===ee||(se==null||se.scrollIntoView({block:"nearest"}),se===Y&&S&&(S.scrollTop=0),se===J&&S&&(S.scrollTop=S.scrollHeight),se==null||se.focus(),document.activeElement!==ee))return},[B,S]),L=l.useCallback(()=>T([R,w]),[T,R,w]);l.useEffect(()=>{z&&L()},[z,L]);const{onOpenChange:A,triggerPointerDownPosRef:G}=y;l.useEffect(()=>{if(w){let $={x:0,y:0};const Y=J=>{var ee,se;$={x:Math.abs(Math.round(J.pageX)-(((ee=G.current)==null?void 0:ee.x)??0)),y:Math.abs(Math.round(J.pageY)-(((se=G.current)==null?void 0:se.y)??0))}},Q=J=>{$.x<=10&&$.y<=10?J.preventDefault():w.contains(J.target)||A(!1),document.removeEventListener("pointermove",Y),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",Q,{capture:!0})}}},[w,A,G]),l.useEffect(()=>{const $=()=>A(!1);return window.addEventListener("blur",$),window.addEventListener("resize",$),()=>{window.removeEventListener("blur",$),window.removeEventListener("resize",$)}},[A]);const[U,M]=ic($=>{const Y=B().filter(ee=>!ee.disabled),Q=Y.find(ee=>ee.ref.current===document.activeElement),J=cc(Y,$,Q);J&&setTimeout(()=>J.ref.current.focus())}),k=l.useCallback(($,Y,Q)=>{const J=!O.current&&!Q;(y.value!==void 0&&y.value===Y||J)&&(D($),J&&(O.current=!0))},[y.value]),W=l.useCallback(()=>w==null?void 0:w.focus(),[w]),P=l.useCallback(($,Y,Q)=>{const J=!O.current&&!Q;(y.value!==void 0&&y.value===Y||J)&&I($)},[y.value]),_=r==="popper"?Cr:Hi,H=_===Cr?{side:c,sideOffset:d,align:u,alignOffset:m,arrowPadding:f,collisionBoundary:g,collisionPadding:v,sticky:x,hideWhenDetached:h,avoidCollisions:p}:{};return s.jsx(zi,{scope:n,content:w,viewport:S,onViewportChange:C,itemRefCallback:k,selectedItem:R,onItemLeave:W,itemTextRefCallback:P,focusSelectedItem:L,selectedItemText:F,position:r,isPositioned:z,searchRef:U,children:s.jsx(Dn,{as:rg,allowPinchZoom:!0,children:s.jsx(Tn,{asChild:!0,trapped:y.open,onMountAutoFocus:$=>{$.preventDefault()},onUnmountAutoFocus:te(o,$=>{var Y;(Y=y.trigger)==null||Y.focus({preventScroll:!0}),$.preventDefault()}),children:s.jsx(An,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:$=>$.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(_,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:$=>$.preventDefault(),...b,...H,onPlaced:()=>E(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:te(b.onKeyDown,$=>{const Y=$.ctrlKey||$.altKey||$.metaKey;if($.key==="Tab"&&$.preventDefault(),!Y&&$.key.length===1&&M($.key),["ArrowUp","ArrowDown","Home","End"].includes($.key)){let J=B().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);if(["ArrowUp","End"].includes($.key)&&(J=J.slice().reverse()),["ArrowUp","ArrowDown"].includes($.key)){const ee=$.target,se=J.indexOf(ee);J=J.slice(se+1)}setTimeout(()=>T(J)),$.preventDefault()}})})})})})})});Gi.displayName=ng;var sg="SelectItemAlignedPosition",Hi=l.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=qe(at,n),i=Ye(at,n),[c,d]=l.useState(null),[u,m]=l.useState(null),f=ce(t,j=>m(j)),g=Hn(n),v=l.useRef(!1),x=l.useRef(!0),{viewport:h,selectedItem:p,selectedItemText:b,focusSelectedItem:y}=i,w=l.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&u&&h&&p&&b){const j=a.trigger.getBoundingClientRect(),R=u.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),F=b.getBoundingClientRect();if(a.dir!=="rtl"){const ee=F.left-R.left,se=D.left-ee,pe=j.left-se,ke=j.width+pe,Rt=Math.max(ke,R.width),Pt=window.innerWidth-Ne,At=po(se,[Ne,Math.max(Ne,Pt-Rt)]);c.style.minWidth=ke+"px",c.style.left=At+"px"}else{const ee=R.right-F.right,se=window.innerWidth-D.right-ee,pe=window.innerWidth-j.right-se,ke=j.width+pe,Rt=Math.max(ke,R.width),Pt=window.innerWidth-Ne,At=po(se,[Ne,Math.max(Ne,Pt-Rt)]);c.style.minWidth=ke+"px",c.style.right=At+"px"}const I=g(),B=window.innerHeight-Ne*2,z=h.scrollHeight,E=window.getComputedStyle(u),O=parseInt(E.borderTopWidth,10),T=parseInt(E.paddingTop,10),L=parseInt(E.borderBottomWidth,10),A=parseInt(E.paddingBottom,10),G=O+T+z+A+L,U=Math.min(p.offsetHeight*5,G),M=window.getComputedStyle(h),k=parseInt(M.paddingTop,10),W=parseInt(M.paddingBottom,10),P=j.top+j.height/2-Ne,_=B-P,H=p.offsetHeight/2,$=p.offsetTop+H,Y=O+T+$,Q=G-Y;if(Y<=P){const ee=I.length>0&&p===I[I.length-1].ref.current;c.style.bottom="0px";const se=u.clientHeight-h.offsetTop-h.offsetHeight,pe=Math.max(_,H+(ee?W:0)+se+L),ke=Y+pe;c.style.height=ke+"px"}else{const ee=I.length>0&&p===I[0].ref.current;c.style.top="0px";const pe=Math.max(P,O+h.offsetTop+(ee?k:0)+H)+Q;c.style.height=pe+"px",h.scrollTop=Y-P+h.offsetTop}c.style.margin=`${Ne}px 0`,c.style.minHeight=U+"px",c.style.maxHeight=B+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[g,a.trigger,a.valueNode,c,u,h,p,b,a.dir,r]);fe(()=>w(),[w]);const[N,S]=l.useState();fe(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const C=l.useCallback(j=>{j&&x.current===!0&&(w(),y==null||y(),x.current=!1)},[w,y]);return s.jsx(ag,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:v,onScrollButtonChange:C,children:s.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(Z.div,{...o,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Hi.displayName=sg;var og="SelectPopperPosition",Cr=l.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Ne,...a}=e,i=Un(n);return s.jsx(ri,{...i,...a,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Cr.displayName=og;var[ag,ps]=Et(at,{}),kr="SelectViewport",Ui=l.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,a=Ye(kr,n),i=ps(kr,n),c=ce(t,a.onViewportChange),d=l.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Gn.Slot,{scope:n,children:s.jsx(Z.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:te(o.onScroll,u=>{const m=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:g}=i;if(g!=null&&g.current&&f){const v=Math.abs(d.current-m.scrollTop);if(v>0){const x=window.innerHeight-Ne*2,h=parseFloat(f.style.minHeight),p=parseFloat(f.style.height),b=Math.max(h,p);if(b<x){const y=b+v,w=Math.min(x,y),N=y-w;f.style.height=w+"px",f.style.bottom==="0px"&&(m.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});Ui.displayName=kr;var Ki="SelectGroup",[ig,cg]=Et(Ki),lg=l.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=me();return s.jsx(ig,{scope:n,id:o,children:s.jsx(Z.div,{role:"group","aria-labelledby":o,...r,ref:t})})});lg.displayName=Ki;var qi="SelectLabel",Yi=l.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=cg(qi,n);return s.jsx(Z.div,{id:o.id,...r,ref:t})});Yi.displayName=qi;var kn="SelectItem",[dg,Xi]=Et(kn),Qi=l.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...i}=e,c=qe(kn,n),d=Ye(kn,n),u=c.value===r,[m,f]=l.useState(a??""),[g,v]=l.useState(!1),x=ce(t,y=>{var w;return(w=d.itemRefCallback)==null?void 0:w.call(d,y,r,o)}),h=me(),p=l.useRef("touch"),b=()=>{o||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(dg,{scope:n,value:r,disabled:o,textId:h,isSelected:u,onItemTextChange:l.useCallback(y=>{f(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(Gn.ItemSlot,{scope:n,value:r,disabled:o,textValue:m,children:s.jsx(Z.div,{role:"option","aria-labelledby":h,"data-highlighted":g?"":void 0,"aria-selected":u&&g,"data-state":u?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:x,onFocus:te(i.onFocus,()=>v(!0)),onBlur:te(i.onBlur,()=>v(!1)),onClick:te(i.onClick,()=>{p.current!=="mouse"&&b()}),onPointerUp:te(i.onPointerUp,()=>{p.current==="mouse"&&b()}),onPointerDown:te(i.onPointerDown,y=>{p.current=y.pointerType}),onPointerMove:te(i.onPointerMove,y=>{var w;p.current=y.pointerType,o?(w=d.onItemLeave)==null||w.call(d):p.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:te(i.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=d.onItemLeave)==null||w.call(d))}),onKeyDown:te(i.onKeyDown,y=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&y.key===" "||(Yp.includes(y.key)&&b(),y.key===" "&&y.preventDefault())})})})})});Qi.displayName=kn;var Lt="SelectItemText",Ji=l.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,i=qe(Lt,n),c=Ye(Lt,n),d=Xi(Lt,n),u=Zp(Lt,n),[m,f]=l.useState(null),g=ce(t,b=>f(b),d.onItemTextChange,b=>{var y;return(y=c.itemTextRefCallback)==null?void 0:y.call(c,b,d.value,d.disabled)}),v=m==null?void 0:m.textContent,x=l.useMemo(()=>s.jsx("option",{value:d.value,disabled:d.disabled,children:v},d.value),[d.disabled,d.value,v]),{onNativeOptionAdd:h,onNativeOptionRemove:p}=u;return fe(()=>(h(x),()=>p(x)),[h,p,x]),s.jsxs(s.Fragment,{children:[s.jsx(Z.span,{id:d.textId,...a,ref:g}),d.isSelected&&i.valueNode&&!i.valueNodeHasChildren?En.createPortal(a.children,i.valueNode):null]})});Ji.displayName=Lt;var Zi="SelectItemIndicator",ec=l.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Xi(Zi,n).isSelected?s.jsx(Z.span,{"aria-hidden":!0,...r,ref:t}):null});ec.displayName=Zi;var Er="SelectScrollUpButton",tc=l.forwardRef((e,t)=>{const n=Ye(Er,e.__scopeSelect),r=ps(Er,e.__scopeSelect),[o,a]=l.useState(!1),i=ce(t,r.onScrollButtonChange);return fe(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollTop>0;a(u)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),o?s.jsx(rc,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});tc.displayName=Er;var Rr="SelectScrollDownButton",nc=l.forwardRef((e,t)=>{const n=Ye(Rr,e.__scopeSelect),r=ps(Rr,e.__scopeSelect),[o,a]=l.useState(!1),i=ce(t,r.onScrollButtonChange);return fe(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<u;a(m)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),o?s.jsx(rc,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});nc.displayName=Rr;var rc=l.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=Ye("SelectScrollButton",n),i=l.useRef(null),c=Hn(n),d=l.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return l.useEffect(()=>()=>d(),[d]),fe(()=>{var m;const u=c().find(f=>f.ref.current===document.activeElement);(m=u==null?void 0:u.ref.current)==null||m.scrollIntoView({block:"nearest"})},[c]),s.jsx(Z.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:te(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:te(o.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:te(o.onPointerLeave,()=>{d()})})}),ug="SelectSeparator",sc=l.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(Z.div,{"aria-hidden":!0,...r,ref:t})});sc.displayName=ug;var Pr="SelectArrow",fg=l.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Un(n),a=qe(Pr,n),i=Ye(Pr,n);return a.open&&i.position==="popper"?s.jsx(si,{...o,...r,ref:t}):null});fg.displayName=Pr;var mg="SelectBubbleInput",oc=l.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const o=l.useRef(null),a=ce(r,o),i=pi(t);return l.useEffect(()=>{const c=o.current;if(!c)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(i!==t&&m){const f=new Event("change",{bubbles:!0});m.call(c,t),c.dispatchEvent(f)}},[i,t]),s.jsx(Z.select,{...n,style:{...Di,...n.style},ref:a,defaultValue:t})});oc.displayName=mg;function ac(e){return e===""||e===void 0}function ic(e){const t=Ve(e),n=l.useRef(""),r=l.useRef(0),o=l.useCallback(i=>{const c=n.current+i;t(c),function d(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(c)},[t]),a=l.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function cc(e,t,n){const o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=hg(e,Math.max(a,0));o.length===1&&(i=i.filter(u=>u!==n));const d=i.find(u=>u.textValue.toLowerCase().startsWith(o.toLowerCase()));return d!==n?d:void 0}function hg(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var pg=Mi,lc=$i,gg=Fi,xg=Wi,vg=Vi,dc=Bi,bg=Ui,uc=Yi,fc=Qi,yg=Ji,wg=ec,mc=tc,hc=nc,pc=sc;const go=pg,xo=gg,Ar=l.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(lc,{ref:r,className:V("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(xg,{asChild:!0,children:s.jsx(_r,{className:"h-4 w-4 opacity-50"})})]}));Ar.displayName=lc.displayName;const gc=l.forwardRef(({className:e,...t},n)=>s.jsx(mc,{ref:n,className:V("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Nu,{className:"h-4 w-4"})}));gc.displayName=mc.displayName;const xc=l.forwardRef(({className:e,...t},n)=>s.jsx(hc,{ref:n,className:V("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(_r,{className:"h-4 w-4"})}));xc.displayName=hc.displayName;const Tr=l.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>s.jsx(vg,{children:s.jsxs(dc,{ref:o,className:V("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(gc,{}),s.jsx(bg,{className:V("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(xc,{})]})}));Tr.displayName=dc.displayName;const Ng=l.forwardRef(({className:e,...t},n)=>s.jsx(uc,{ref:n,className:V("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Ng.displayName=uc.displayName;const Ze=l.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(fc,{ref:r,className:V("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(wg,{children:s.jsx(Ft,{className:"h-4 w-4"})})}),s.jsx(yg,{children:t})]}));Ze.displayName=fc.displayName;const jg=l.forwardRef(({className:e,...t},n)=>s.jsx(pc,{ref:n,className:V("-mx-1 my-1 h-px bg-muted",e),...t}));jg.displayName=pc.displayName;function Sg(e){return e?e.replace(/([A-Z]+)([A-Z][a-z])/g,"$1 $2").replace(/([a-z])([A-Z])/g,"$1 $2").trim():""}function Cg(e){if(!e)return"";const t=e.trim();return t.endsWith("y")?t.slice(0,-1)+"ies":t.endsWith("s")||t.endsWith("x")||t.endsWith("z")||t.endsWith("ch")||t.endsWith("sh")?t+"es":t+"s"}function vo(e){if(!e)return"";let t=e;return t.endsWith("ies")?t=t.slice(0,-3)+"y":t.endsWith("es")?t=t.slice(0,-2):t.endsWith("s")&&(t=t.slice(0,-1)),t.charAt(0).toUpperCase()+t.slice(1)}const mt="__custom__";function kg({resource:e,onChange:t,client:n,className:r=""}){var z;const[o,a]=l.useState([]),[i,c]=l.useState([]),[d,u]=l.useState(!1),[m,f]=l.useState(!1),[g,v]=l.useState(!1),[x,h]=l.useState(!1),p=l.useMemo(()=>Sg(e.kind),[e.kind]),b=l.useMemo(()=>Cg(e.kindLabel||p),[e.kindLabel,p]),y=l.useCallback(async()=>{if(n){u(!0);try{const E=await n.getAuditedAPIGroups();a(E.filter(O=>O))}catch(E){console.error("Failed to load API groups:",E)}finally{u(!1)}}},[n]),w=l.useCallback(async()=>{var E;if(!n||!e.apiGroup){c([]);return}f(!0);try{const O=await n.getAuditedResources(e.apiGroup);let T=new Map;try{const A=await n.discoverAPIResources(e.apiGroup);T=new Map(((E=A.resources)==null?void 0:E.map(G=>[G.name,G.kind]))||[])}catch{}const L=O.filter(A=>A).map(A=>({name:A,kind:T.get(A)||vo(A)}));c(L)}catch(O){console.error("Failed to load resources:",O)}finally{f(!1)}},[n,e.apiGroup]);l.useEffect(()=>{n&&y()},[n,y]),l.useEffect(()=>{n&&e.apiGroup&&w()},[n,e.apiGroup,w]),l.useEffect(()=>{e.apiGroup&&o.length>0&&!o.includes(e.apiGroup)&&v(!0)},[e.apiGroup,o]),l.useEffect(()=>{e.kind&&i.length>0&&(i.some(O=>O.kind===e.kind)||h(!0))},[e.kind,i]);const N=E=>{E===mt?v(!0):(v(!1),t({...e,apiGroup:E,kind:""}))},S=E=>{t({...e,apiGroup:E.target.value,kind:""})},C=E=>{if(E===mt)h(!0);else{h(!1);const O=i.find(L=>L.name===E),T=(O==null?void 0:O.kind)||vo(E);t({...e,kind:T})}},j=E=>{t({...e,kind:E.target.value})},R=E=>{t({...e,kindLabel:E.target.value||void 0})},D=E=>{t({...e,kindLabelPlural:E.target.value||void 0})},F=E=>{E==="apiGroup"?(v(!1),t({...e,apiGroup:"",kind:""})):(h(!1),t({...e,kind:""}))},I=o.includes(e.apiGroup),B=((z=i.find(E=>E.kind===e.kind))==null?void 0:z.name)||"";return s.jsxs("div",{className:`rounded-lg bg-muted p-6 ${r}`,children:[s.jsx("h4",{className:"mb-2 text-base font-medium text-foreground",children:"Resource Target"}),s.jsxs("p",{className:"mb-6 text-sm text-muted-foreground",children:["Define which API group and kind this policy applies to.",n&&s.jsxs("span",{className:"italic text-muted-foreground/70",children:[" ","Options based on audit events in your cluster."]})]}),s.jsxs("div",{className:"mb-5 last:mb-0",children:[s.jsxs(ie,{htmlFor:"resource-apiGroup",className:"mb-1.5 block text-foreground/80",children:["API Group ",s.jsx("span",{className:"text-destructive",children:"*"})]}),n&&!g?s.jsx("div",{className:"relative",children:s.jsxs(go,{value:I?e.apiGroup:"",onValueChange:N,disabled:d,children:[s.jsx(Ar,{className:"h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm transition-all duration-200 focus:border-[#BF9595] focus:outline-none focus:ring-[3px] focus:ring-[#BF9595]/10 disabled:cursor-not-allowed disabled:opacity-50",children:s.jsx(xo,{placeholder:d?"Loading...":"Select an API Group..."})}),s.jsxs(Tr,{children:[o.length===0&&!d&&s.jsx(Ze,{value:mt,disabled:!0,className:"italic text-muted-foreground",children:"No API groups found"}),o.map(E=>s.jsx(Ze,{value:E,children:E},E)),s.jsx(Ze,{value:mt,className:"italic text-muted-foreground",children:"Enter custom value..."})]})]})}):s.jsxs("div",{className:"flex gap-2",children:[s.jsx(he,{id:"resource-apiGroup",type:"text",className:"flex-1",value:e.apiGroup,onChange:S,placeholder:"e.g., networking.datumapis.com"}),n&&s.jsx(X,{type:"button",variant:"outline",size:"sm",onClick:()=>F("apiGroup"),title:"Back to select",children:"Back to list"})]})]}),s.jsxs("div",{className:"mb-5 last:mb-0",children:[s.jsxs(ie,{htmlFor:"resource-kind",className:"mb-1.5 block text-foreground/80",children:["Kind ",s.jsx("span",{className:"text-destructive",children:"*"})]}),n&&!x?s.jsx("div",{className:"relative",children:s.jsxs(go,{value:B,onValueChange:C,disabled:m||!e.apiGroup,children:[s.jsx(Ar,{className:"h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm transition-all duration-200 focus:border-[#BF9595] focus:outline-none focus:ring-[3px] focus:ring-[#BF9595]/10 disabled:cursor-not-allowed disabled:opacity-50",children:s.jsx(xo,{placeholder:e.apiGroup?m?"Loading...":"Select a Kind...":"Select API Group first..."})}),s.jsxs(Tr,{children:[i.length===0&&e.apiGroup&&!m&&s.jsx(Ze,{value:mt,disabled:!0,className:"italic text-muted-foreground",children:"No resources found"}),i.map(E=>s.jsx(Ze,{value:E.name,children:E.kind},E.name)),s.jsx(Ze,{value:mt,className:"italic text-muted-foreground",children:"Enter custom value..."})]})]})}):s.jsxs("div",{className:"flex gap-2",children:[s.jsx(he,{id:"resource-kind",type:"text",className:"flex-1",value:e.kind,onChange:j,placeholder:e.apiGroup?"e.g., HTTPProxy":"Select API Group first",disabled:!e.apiGroup}),n&&s.jsx(X,{type:"button",variant:"outline",size:"sm",onClick:()=>F("kind"),title:"Back to select",children:"Back to list"})]}),s.jsx("div",{className:"mt-1.5 text-xs text-muted-foreground",children:"The Kubernetes resource kind (e.g., HTTPProxy, Gateway, Deployment)"})]}),s.jsxs("div",{className:"mb-5 last:mb-0",children:[s.jsx(ie,{htmlFor:"resource-kindLabel",className:"mb-1.5 block text-foreground/80",children:"Kind Label"}),s.jsx(he,{id:"resource-kindLabel",type:"text",value:e.kindLabel||"",onChange:R,placeholder:p||"Auto-derived from Kind"}),s.jsxs("div",{className:"mt-1.5 text-xs text-muted-foreground",children:["Human-readable label for the kind. Used in activity summaries.",p&&!e.kindLabel&&s.jsxs("span",{className:"font-medium text-emerald-600",children:[' Default: "',p,'"']})]})]}),s.jsxs("div",{className:"mb-5 last:mb-0",children:[s.jsx(ie,{htmlFor:"resource-kindLabelPlural",className:"mb-1.5 block text-foreground/80",children:"Kind Label (Plural)"}),s.jsx(he,{id:"resource-kindLabelPlural",type:"text",value:e.kindLabelPlural||"",onChange:D,placeholder:b||"Auto-derived from Kind Label"}),s.jsxs("div",{className:"mt-1.5 text-xs text-muted-foreground",children:["Plural form of the kind label.",b&&!e.kindLabelPlural&&s.jsxs("span",{className:"font-medium text-emerald-600",children:[' Default: "',b,'"']})]})]})]})}const Eg={variables:[{name:"audit.verb",description:"HTTP verb (create, update, patch, delete, get, list, watch)"},{name:"audit.user.username",description:"Username of the actor"},{name:"audit.user.groups",description:"Groups the actor belongs to"},{name:"audit.objectRef.name",description:"Name of the resource"},{name:"audit.objectRef.namespace",description:"Namespace of the resource"},{name:"audit.objectRef.subresource",description:'Subresource (e.g., "status")'},{name:"audit.responseStatus.code",description:"HTTP response status code"}],examples:['audit.verb == "create"','audit.verb in ["create", "update", "patch"]','audit.verb == "update" && audit.objectRef.subresource == "status"',"audit.responseStatus.code >= 200 && audit.responseStatus.code < 300"]},Rg={variables:[{name:"event.type",description:'Event type: "Normal" or "Warning"'},{name:"event.reason",description:'Short reason (e.g., "Created", "Ready", "Failed")'},{name:"event.message",description:"Human-readable message"},{name:"event.involvedObject.name",description:"Name of the involved resource"},{name:"event.involvedObject.namespace",description:"Namespace of the involved resource"},{name:"event.source.component",description:"Component that generated the event"}],examples:['event.reason == "Ready"','event.type == "Warning"','event.reason in ["Created", "Updated", "Deleted"]','event.message.contains("failed")']},mr={variables:[{name:"actor.name",description:"Display name of the actor"},{name:"actor.email",description:"Email of the actor (if available)"},{name:"resource.name",description:"Name of the resource"},{name:"resource.namespace",description:"Namespace of the resource"},{name:"kindLabel",description:'Human-readable kind label (e.g., "HTTP Proxy")'},{name:"kindLabelPlural",description:'Plural kind label (e.g., "HTTP Proxies")'}],examples:["{{ actor.name }} created {{ kindLabel }} {{ resource.name }}","{{ actor.name }} updated the status of {{ kindLabel }} {{ resource.name }}","{{ kindLabel }} {{ resource.name }} is now ready","{{ kindLabel }} {{ resource.name }} failed: {{ event.message }}"]};function bo({rule:e,index:t,ruleType:n,isHighlighted:r=!1,onChange:o,onDelete:a,className:i=""}){const[c,d]=l.useState(!1),[u,m]=l.useState(!1),f=n==="audit"?Eg:Rg,g=p=>{o({...e,match:p.target.value})},v=p=>{o({...e,summary:p.target.value})},x=p=>{o({...e,match:p})},h=p=>{o({...e,summary:p})};return s.jsxs(ue,{className:`mb-4 transition-all duration-200 ${r?"border-emerald-600 bg-emerald-50":"bg-muted"} ${i}`,children:[s.jsxs(it,{className:"flex flex-row justify-between items-center p-4 pb-0",children:[s.jsxs("span",{className:`text-xs font-semibold uppercase tracking-wide ${r?"text-emerald-600":"text-muted-foreground"}`,children:[n==="audit"?"Audit":"Event"," Rule #",t+1]}),s.jsx(X,{type:"button",variant:"ghost",size:"icon",className:"w-6 h-6 text-xl leading-none text-muted-foreground hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-950/50 dark:hover:text-red-400",onClick:a,title:"Delete rule",children:""})]}),s.jsxs(xe,{className:"p-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[s.jsx(ie,{htmlFor:`rule-${t}-match`,children:"Match Expression (CEL)"}),s.jsx(X,{type:"button",variant:"outline",size:"sm",className:"px-2 py-0.5 h-auto text-xs",onClick:()=>d(!c),children:c?"Hide Help":"Show Help"})]}),s.jsx($t,{id:`rule-${t}-match`,className:"font-mono text-sm resize-y min-h-[60px]",value:e.match,onChange:g,placeholder:`e.g., ${f.examples[0]}`,rows:2,spellCheck:!1}),c&&s.jsxs("div",{className:"mt-3 p-4 bg-background border border-border rounded-md text-xs",children:[s.jsxs("div",{className:"mb-4 last:mb-0",children:[s.jsx("strong",{className:"block mb-2 text-foreground",children:"Available Variables:"}),s.jsx("ul",{className:"m-0 pl-5 list-disc",children:f.variables.map(p=>s.jsxs("li",{className:"mb-1",children:[s.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-xs",children:p.name})," - ",p.description]},p.name))})]}),s.jsxs("div",{className:"mb-4 last:mb-0",children:[s.jsx("strong",{className:"block mb-2 text-foreground",children:"Examples:"}),s.jsx("ul",{className:"m-0 p-0 list-none",children:f.examples.map((p,b)=>s.jsxs("li",{className:"flex items-center gap-2 mb-1.5 px-2 py-1.5 bg-muted rounded",children:[s.jsx("code",{className:"flex-1 text-xs break-all",children:p}),s.jsx(X,{type:"button",size:"sm",className:"px-2 py-0.5 h-auto bg-[#E6F59F] border-none text-[0.625rem] font-medium text-[#0C1D31] uppercase hover:bg-[#d9e88c]",onClick:()=>x(p),children:"Use"})]},b))})]})]})]}),s.jsxs("div",{className:"mb-4 last:mb-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[s.jsx(ie,{htmlFor:`rule-${t}-summary`,children:"Summary Template (CEL)"}),s.jsx(X,{type:"button",variant:"outline",size:"sm",className:"px-2 py-0.5 h-auto text-xs",onClick:()=>m(!u),children:u?"Hide Help":"Show Help"})]}),s.jsx($t,{id:`rule-${t}-summary`,className:"font-mono text-sm resize-y min-h-[60px]",value:e.summary,onChange:v,placeholder:`e.g., ${mr.examples[0]}`,rows:2,spellCheck:!1}),u&&s.jsxs("div",{className:"mt-3 p-4 bg-background border border-border rounded-md text-xs",children:[s.jsxs("div",{className:"mb-4 last:mb-0",children:[s.jsx("strong",{className:"block mb-2 text-foreground",children:"Available Variables:"}),s.jsx("ul",{className:"m-0 pl-5 list-disc",children:mr.variables.map(p=>s.jsxs("li",{className:"mb-1",children:[s.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-xs",children:"{{ "+p.name+" }}"})," - ",p.description]},p.name))})]}),s.jsxs("div",{className:"mb-4 last:mb-0",children:[s.jsx("strong",{className:"block mb-2 text-foreground",children:"Examples:"}),s.jsx("ul",{className:"m-0 p-0 list-none",children:mr.examples.map((p,b)=>s.jsxs("li",{className:"flex items-center gap-2 mb-1.5 px-2 py-1.5 bg-muted rounded",children:[s.jsx("code",{className:"flex-1 text-xs break-all",children:p}),s.jsx(X,{type:"button",size:"sm",className:"px-2 py-0.5 h-auto bg-[#E6F59F] border-none text-[0.625rem] font-medium text-[#0C1D31] uppercase hover:bg-[#d9e88c]",onClick:()=>h(p),children:"Use"})]},b))})]})]})]})]})]})}var hr="rovingFocusGroup.onEntryFocus",Pg={bubbles:!1,cancelable:!0},Ut="RovingFocusGroup",[Or,vc,Ag]=Ii(Ut),[Tg,bc]=He(Ut,[Ag]),[Og,Ig]=Tg(Ut),yc=l.forwardRef((e,t)=>s.jsx(Or.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Or.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Dg,{...e,ref:t})})}));yc.displayName=Ut;var Dg=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...f}=e,g=l.useRef(null),v=ce(t,g),x=hs(a),[h,p]=tt({prop:i,defaultProp:c??null,onChange:d,caller:Ut}),[b,y]=l.useState(!1),w=Ve(u),N=vc(n),S=l.useRef(!1),[C,j]=l.useState(0);return l.useEffect(()=>{const R=g.current;if(R)return R.addEventListener(hr,w),()=>R.removeEventListener(hr,w)},[w]),s.jsx(Og,{scope:n,orientation:r,dir:x,loop:o,currentTabStopId:h,onItemFocus:l.useCallback(R=>p(R),[p]),onItemShiftTab:l.useCallback(()=>y(!0),[]),onFocusableItemAdd:l.useCallback(()=>j(R=>R+1),[]),onFocusableItemRemove:l.useCallback(()=>j(R=>R-1),[]),children:s.jsx(Z.div,{tabIndex:b||C===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...e.style},onMouseDown:te(e.onMouseDown,()=>{S.current=!0}),onFocus:te(e.onFocus,R=>{const D=!S.current;if(R.target===R.currentTarget&&D&&!b){const F=new CustomEvent(hr,Pg);if(R.currentTarget.dispatchEvent(F),!F.defaultPrevented){const I=N().filter(T=>T.focusable),B=I.find(T=>T.active),z=I.find(T=>T.id===h),O=[B,z,...I].filter(Boolean).map(T=>T.ref.current);jc(O,m)}}S.current=!1}),onBlur:te(e.onBlur,()=>y(!1))})})}),wc="RovingFocusGroupItem",Nc=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,children:i,...c}=e,d=me(),u=a||d,m=Ig(wc,n),f=m.currentTabStopId===u,g=vc(n),{onFocusableItemAdd:v,onFocusableItemRemove:x,currentTabStopId:h}=m;return l.useEffect(()=>{if(r)return v(),()=>x()},[r,v,x]),s.jsx(Or.ItemSlot,{scope:n,id:u,focusable:r,active:o,children:s.jsx(Z.span,{tabIndex:f?0:-1,"data-orientation":m.orientation,...c,ref:t,onMouseDown:te(e.onMouseDown,p=>{r?m.onItemFocus(u):p.preventDefault()}),onFocus:te(e.onFocus,()=>m.onItemFocus(u)),onKeyDown:te(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){m.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const b=$g(p,m.orientation,m.dir);if(b!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let w=g().filter(N=>N.focusable).map(N=>N.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const N=w.indexOf(p.currentTarget);w=m.loop?_g(w,N+1):w.slice(N+1)}setTimeout(()=>jc(w))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:h!=null}):i})})});Nc.displayName=wc;var Mg={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Lg(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function $g(e,t,n){const r=Lg(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Mg[r]}function jc(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function _g(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Fg=yc,Wg=Nc,Kn="Tabs",[Vg]=He(Kn,[bc]),Sc=bc(),[Bg,gs]=Vg(Kn),Cc=l.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:c,activationMode:d="automatic",...u}=e,m=hs(c),[f,g]=tt({prop:r,onChange:o,defaultProp:a??"",caller:Kn});return s.jsx(Bg,{scope:n,baseId:me(),value:f,onValueChange:g,orientation:i,dir:m,activationMode:d,children:s.jsx(Z.div,{dir:m,"data-orientation":i,...u,ref:t})})});Cc.displayName=Kn;var kc="TabsList",Ec=l.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,a=gs(kc,n),i=Sc(n);return s.jsx(Fg,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(Z.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:t})})});Ec.displayName=kc;var Rc="TabsTrigger",Pc=l.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...a}=e,i=gs(Rc,n),c=Sc(n),d=Oc(i.baseId,r),u=Ic(i.baseId,r),m=r===i.value;return s.jsx(Wg,{asChild:!0,...c,focusable:!o,active:m,children:s.jsx(Z.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:d,...a,ref:t,onMouseDown:te(e.onMouseDown,f=>{!o&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:te(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:te(e.onFocus,()=>{const f=i.activationMode!=="manual";!m&&!o&&f&&i.onValueChange(r)})})})});Pc.displayName=Rc;var Ac="TabsContent",Tc=l.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:a,...i}=e,c=gs(Ac,n),d=Oc(c.baseId,r),u=Ic(c.baseId,r),m=r===c.value,f=l.useRef(m);return l.useEffect(()=>{const g=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(g)},[]),s.jsx(Ue,{present:o||m,children:({present:g})=>s.jsx(Z.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!g,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:g&&a})})});Tc.displayName=Ac;function Oc(e,t){return`${e}-trigger-${t}`}function Ic(e,t){return`${e}-content-${t}`}var zg=Cc,Dc=Ec,Mc=Pc,Lc=Tc;const Gg=zg,$c=l.forwardRef(({className:e,...t},n)=>s.jsx(Dc,{ref:n,className:V("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));$c.displayName=Dc.displayName;const Ir=l.forwardRef(({className:e,...t},n)=>s.jsx(Mc,{ref:n,className:V("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ir.displayName=Mc.displayName;const Dr=l.forwardRef(({className:e,...t},n)=>s.jsx(Lc,{ref:n,className:V("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Dr.displayName=Lc.displayName;function Hg({auditRules:e,eventRules:t,previewResult:n,onAuditRulesChange:r,onEventRulesChange:o,onAddAuditRule:a,onAddEventRule:i,className:c=""}){const d=n!=null&&n.matched&&n.matchedRuleType==="audit"&&n.matchedRuleIndex!==void 0?n.matchedRuleIndex:-1,u=n!=null&&n.matched&&n.matchedRuleType==="event"&&n.matchedRuleIndex!==void 0?n.matchedRuleIndex:-1,m=(x,h)=>{const p=[...e];p[x]=h,r(p)},f=x=>{const h=e.filter((p,b)=>b!==x);r(h)},g=(x,h)=>{const p=[...t];p[x]=h,o(p)},v=x=>{const h=t.filter((p,b)=>b!==x);o(h)};return s.jsx("div",{className:`bg-muted rounded-lg overflow-hidden ${c}`,children:s.jsxs(Gg,{defaultValue:"audit",className:"w-full",children:[s.jsxs($c,{className:"w-full rounded-none border-b border-input bg-muted h-auto p-0",children:[s.jsxs(Ir,{value:"audit",className:"flex-1 gap-2 py-3 px-4 rounded-none data-[state=active]:bg-background data-[state=active]:border-b-2 data-[state=active]:border-[#BF9595] data-[state=active]:shadow-none",children:["Audit Rules",s.jsx(le,{variant:"secondary",className:"data-[state=active]:bg-[#BF9595] data-[state=active]:text-white",children:e.length}),d>=0&&s.jsx("span",{className:"text-emerald-600 font-bold",title:"Rule matched in preview",children:""})]}),s.jsxs(Ir,{value:"event",className:"flex-1 gap-2 py-3 px-4 rounded-none data-[state=active]:bg-background data-[state=active]:border-b-2 data-[state=active]:border-[#BF9595] data-[state=active]:shadow-none",children:["Event Rules",s.jsx(le,{variant:"secondary",className:"data-[state=active]:bg-[#BF9595] data-[state=active]:text-white",children:t.length}),u>=0&&s.jsx("span",{className:"text-emerald-600 font-bold",title:"Rule matched in preview",children:""})]})]}),s.jsxs(Dr,{value:"audit",className:"mt-0 p-4 bg-background",children:[e.map((x,h)=>s.jsx(bo,{rule:x,index:h,ruleType:"audit",isHighlighted:h===d,onChange:p=>m(h,p),onDelete:()=>f(h)},h)),e.length===0&&s.jsxs("div",{className:"text-center py-8 px-8 text-muted-foreground",children:[s.jsx("p",{className:"mb-2",children:"No audit rules defined."}),s.jsx("p",{className:"text-sm",children:"Audit rules match Kubernetes API audit events (create, update, delete, etc.) and generate activity summaries."})]}),s.jsx(X,{type:"button",variant:"outline",className:"w-full py-3 mt-4 border-2 border-dashed border-input bg-muted hover:bg-[#EFEFED] hover:border-[#BF9595] hover:text-foreground",onClick:a,children:"+ Add Audit Rule"})]}),s.jsxs(Dr,{value:"event",className:"mt-0 p-4 bg-background",children:[t.map((x,h)=>s.jsx(bo,{rule:x,index:h,ruleType:"event",isHighlighted:h===u,onChange:p=>g(h,p),onDelete:()=>v(h)},h)),t.length===0&&s.jsxs("div",{className:"text-center py-8 px-8 text-muted-foreground",children:[s.jsx("p",{className:"mb-2",children:"No event rules defined."}),s.jsx("p",{className:"text-sm",children:"Event rules match Kubernetes Events (Ready, Failed, Progressing, etc.) and generate activity summaries from controller status updates."})]}),s.jsx(X,{type:"button",variant:"outline",className:"w-full py-3 mt-4 border-2 border-dashed border-input bg-muted hover:bg-[#EFEFED] hover:border-[#BF9595] hover:text-foreground",onClick:i,children:"+ Add Event Rule"})]})]})})}function Ug(e){return!e||e.length===0?{total:0,matched:0,errors:0}:{total:e.length,matched:e.filter(t=>t.matched).length,errors:e.filter(t=>!!t.error).length}}function Kg(e){return e?e.email?e.email:e.name?e.name:"Unknown":"Unknown"}function qg(e){if(!(e!=null&&e.creationTimestamp))return"";try{return new Date(e.creationTimestamp).toLocaleTimeString()}catch{return""}}function Yg({result:e,onResourceClick:t,className:n=""}){const r=!!e.error,o=e.activities||[],a=e.results||[],i=Ug(a);return!a.length&&(e.matched!==void 0||e.generatedSummary)?s.jsx(ue,{className:n,children:s.jsxs(xe,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r?s.jsxs(le,{variant:"destructive",className:"gap-1",children:[s.jsx(Os,{className:"h-3 w-3"}),"Error"]}):e.matched?s.jsxs(le,{variant:"success",className:"gap-1",children:[s.jsx(ku,{className:"h-3 w-3"}),"Matched"]}):s.jsxs(le,{variant:"secondary",className:"gap-1",children:[s.jsx(Os,{className:"h-3 w-3"}),"No Match"]}),e.matched&&!r&&e.matchedRuleIndex!==void 0&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.matchedRuleType==="audit"?"Audit":"Event"," Rule #",e.matchedRuleIndex+1]})]}),r&&s.jsxs(be,{variant:"destructive",className:"mb-4",children:[s.jsx(gt,{className:"h-4 w-4"}),s.jsx(ye,{children:s.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap",children:e.error})})]}),e.matched&&e.generatedSummary&&!r&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Generated Summary:"}),s.jsx("div",{className:"p-3 rounded-md bg-muted",children:s.jsx(Cn,{summary:e.generatedSummary,links:e.generatedLinks,onResourceClick:t})})]}),!e.matched&&!r&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"No rules matched the provided input. Check your match expressions."})]})}):s.jsxs("div",{className:V("space-y-4",n),children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(le,{variant:i.matched>0?"success":"secondary",children:[i.matched," matched"]}),s.jsx("span",{className:"text-muted-foreground",children:"/"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[i.total," tested"]}),i.errors>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground",children:"/"}),s.jsxs(le,{variant:"destructive",children:[i.errors," errors"]})]})]})}),r&&s.jsxs(be,{variant:"destructive",children:[s.jsx(gt,{className:"h-4 w-4"}),s.jsx(ye,{children:s.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap",children:e.error})})]}),o.length>0&&s.jsxs(ue,{children:[s.jsx(it,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Pn,{className:"text-base",children:"Generated Activity Stream"}),s.jsxs(le,{variant:"outline",children:[o.length," activities"]})]})}),s.jsx(xe,{className:"p-0",children:s.jsx("ul",{className:"divide-y divide-border",children:o.map((d,u)=>{var m,f;return s.jsxs("li",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"font-medium text-sm",children:Kg(d.spec.actor)}),s.jsx(le,{variant:d.spec.changeSource==="system"?"secondary":"outline",className:"text-xs",children:d.spec.changeSource}),((m=d.metadata)==null?void 0:m.creationTimestamp)&&s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Pu,{className:"h-3 w-3"}),qg(d.metadata)]})]}),s.jsx("div",{className:"mb-2",children:s.jsx(Cn,{summary:d.spec.summary,links:d.spec.links,onResourceClick:t})}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[s.jsx("span",{children:d.spec.resource.kind&&s.jsxs(s.Fragment,{children:[d.spec.resource.namespace&&`${d.spec.resource.namespace}/`,d.spec.resource.name]})}),s.jsxs("span",{children:["via ",d.spec.origin.type]})]})]},((f=d.metadata)==null?void 0:f.name)||u)})})})]}),a.length>0&&a.some(d=>!d.matched||d.error)&&s.jsxs("details",{className:"group",children:[s.jsxs("summary",{className:"flex items-center gap-2 cursor-pointer text-sm text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx("span",{className:"group-open:rotate-90 transition-transform",children:""}),i.total-i.matched," inputs did not match",i.errors>0&&` (${i.errors} with errors)`]}),s.jsx(ue,{className:"mt-2",children:s.jsx(xe,{className:"p-0",children:s.jsx("ul",{className:"divide-y divide-border",children:a.filter(d=>!d.matched||d.error).map(d=>s.jsxs("li",{className:V("p-3 flex items-center justify-between text-sm",d.error&&"bg-destructive/10"),children:[s.jsxs("span",{className:"text-muted-foreground",children:["Input #",d.inputIndex+1]}),d.error?s.jsx(le,{variant:"destructive",className:"text-xs",children:d.error}):s.jsx("span",{className:"text-muted-foreground text-xs",children:"No matching rule"})]},d.inputIndex))})})})]}),i.matched===0&&!r&&s.jsxs(be,{children:[s.jsx(gt,{className:"h-4 w-4"}),s.jsxs(ye,{children:["No rules matched any of the ",i.total," input",i.total!==1?"s":"",". Check your match expressions."]})]})]})}function Xg(e){var a,i,c,d;const t=e.verb||"unknown",n=((a=e.objectRef)==null?void 0:a.resource)||"resource",r=((i=e.objectRef)==null?void 0:i.name)||"";return`${((d=(c=e.user)==null?void 0:c.username)==null?void 0:d.split("@")[0])||"unknown"} ${t} ${n}${r?` "${r}"`:""}`}function Qg(e){if(!e)return"";try{return Bt(new Date(e),"MMM d, HH:mm:ss")}catch{return e}}function Jg(e){switch(e){case"create":return"success";case"update":case"patch":return"warning";case"delete":return"destructive";default:return"secondary"}}function Zg({inputs:e,selectedIndices:t,result:n,isLoading:r,error:o,onInputsChange:a,onToggleSelection:i,onSelectAll:c,onDeselectAll:d,onRunPreview:u,onResourceClick:m,client:f,policyResource:g,hasSelection:v,className:x=""}){const[h,p]=l.useState(!1),[b,y]=l.useState(null),[w,N]=l.useState(!1),[S,C]=l.useState(""),[j,R]=l.useState(null),D=l.useCallback(async()=>{var E,O;if(f){p(!0),y(null);try{const T=['verb in ["create", "update", "patch", "delete"]'];if(g!=null&&g.apiGroup&&T.push(`objectRef.apiGroup == "${g.apiGroup}"`),g!=null&&g.kind){const W=g.kind.toLowerCase()+"s";T.push(`objectRef.resource == "${W}"`)}const L=T.join(" && "),A=new Date,G=new Date(A.getTime()-60*60*1e3);let M=((E=(await f.createQuery("preview-events-"+Date.now(),{filter:L,limit:20,startTime:G.toISOString(),endTime:A.toISOString()})).status)==null?void 0:E.results)||[];if(M.length===0){const W=new Date(A.getTime()-864e5);if(M=((O=(await f.createQuery("preview-events-longer-"+Date.now(),{filter:L,limit:20,startTime:W.toISOString(),endTime:A.toISOString()})).status)==null?void 0:O.results)||[],M.length===0){y(g!=null&&g.apiGroup?`No events found for ${g.apiGroup}/${g.kind||"*"} in the last 24 hours.`:"No events found. Please specify an API Group and Kind first.");return}}const k=M.map(W=>({type:"audit",audit:W}));a(k)}catch(T){const L=T instanceof Error?T.message:"Failed to load events";L.includes("memory limit")||L.includes("503")?y("Query too broad. Please specify an API Group and Kind to narrow the search."):y(L)}finally{p(!1)}}},[f,g,a]),F=l.useCallback(()=>{try{const E=JSON.parse(S);let O;Array.isArray(E)?O=E.map(T=>T.type&&(T.audit||T.event)?T:T.verb?{type:"audit",audit:T}:{type:"event",event:T}):E.type&&(E.audit||E.event)?O=[E]:E.verb?O=[{type:"audit",audit:E}]:O=[{type:"event",event:E}],a(O),R(null),C(""),N(!1)}catch(E){R(E instanceof Error?E.message:"Invalid JSON")}},[S,a]),I=t.size,B=e.length,z=f&&(g==null?void 0:g.apiGroup);return s.jsxs("div",{className:V("space-y-4",x),children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Test Policy"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Load audit logs from the API to test your policy rules."})]}),s.jsx(ue,{children:s.jsxs(xe,{className:"pt-6",children:[!z&&s.jsxs(be,{variant:"warning",className:"mb-4",children:[s.jsx(gt,{className:"h-4 w-4"}),s.jsx(ye,{children:"Select an API Group and Kind above to load relevant audit logs."})]}),z&&s.jsx("div",{className:"mb-4",children:s.jsxs(le,{variant:"outline",className:"bg-lime-100 text-lime-900 border-lime-300 dark:bg-lime-900/50 dark:text-lime-200 dark:border-lime-700 font-mono",children:[g.apiGroup,"/",g.kind||"*"]})}),s.jsx(X,{onClick:D,disabled:h||!z,className:"w-full",children:h?s.jsxs(s.Fragment,{children:[s.jsx(Is,{className:"h-4 w-4 animate-spin"}),"Loading..."]}):"Load Audit Logs from API"}),b&&s.jsxs(be,{variant:"destructive",className:"mt-4",children:[s.jsx(gt,{className:"h-4 w-4"}),s.jsx(ye,{children:b})]})]})}),e.length>0&&s.jsxs(ue,{children:[s.jsx(it,{className:"pb-2 pt-4 px-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Do,{children:[I," of ",B," selected"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(X,{variant:"outline",size:"sm",onClick:c,disabled:I===B,children:"Select All"}),s.jsx(X,{variant:"outline",size:"sm",onClick:d,disabled:I===0,children:"Clear"})]})]})}),s.jsx(xe,{className:"p-0",children:s.jsx("ul",{className:"max-h-64 overflow-y-auto divide-y",children:e.map((E,O)=>{const T=E.type==="audit"?E.audit:null,L=t.has(O);return s.jsx("li",{className:V("transition-colors",L?"bg-green-50 dark:bg-green-950/50":"bg-background"),children:s.jsxs("label",{className:"flex items-start gap-3 p-3 cursor-pointer hover:bg-muted/50",children:[s.jsx(ms,{checked:L,onCheckedChange:()=>i(O),className:"mt-0.5"}),s.jsxs("span",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"block text-sm text-foreground truncate",children:T?Xg(T):"Unknown event"}),s.jsxs("span",{className:"flex items-center gap-2 mt-1",children:[(T==null?void 0:T.requestReceivedTimestamp)&&s.jsx("span",{className:"text-xs text-muted-foreground",children:Qg(T.requestReceivedTimestamp)}),(T==null?void 0:T.verb)&&s.jsx(le,{variant:Jg(T.verb),className:"text-xs uppercase",children:T.verb})]})]})]})},(T==null?void 0:T.auditID)||O)})})})]}),e.length===0&&!h&&s.jsx(ue,{children:s.jsxs(xe,{className:"py-8 text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"No audit logs loaded yet."}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Click "Load Audit Logs from API" to fetch recent events.'})]})}),s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>N(!w),className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(yu,{className:V("h-3 w-3 transition-transform",w&&"rotate-90")}),"Advanced: Manual JSON Input"]}),w&&s.jsx(ue,{className:"mt-2",children:s.jsxs(xe,{className:"pt-4",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Paste a raw audit event JSON:"}),s.jsx($t,{value:S,onChange:E=>{C(E.target.value),R(null)},rows:6,placeholder:'{"verb": "create", "user": {"username": "..."}, ...}',spellCheck:!1,className:V("font-mono text-xs",j&&"border-destructive")}),j&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:j}),s.jsx(X,{variant:"secondary",size:"sm",onClick:F,disabled:!S.trim(),className:"mt-2",children:"Add from JSON"})]})})]}),s.jsx(X,{onClick:u,disabled:r||!v,className:"w-full",size:"lg",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Is,{className:"h-4 w-4 animate-spin"}),"Running Preview..."]}):s.jsxs(s.Fragment,{children:["Run Preview",I>0&&` (${I} event${I!==1?"s":""})`]})}),o&&!n&&s.jsxs(be,{variant:"destructive",children:[s.jsx(gt,{className:"h-4 w-4"}),s.jsx(ye,{children:o.message})]}),n&&s.jsx(Yg,{result:n,onResourceClick:m})]})}function lx({client:e,policyName:t,onSaveSuccess:n,onCancel:r,onResourceClick:o,className:a=""}){const i=Vp({client:e,initialPolicyName:t}),c=Gp({client:e});l.useEffect(()=>{t&&i.load(t).catch(f=>{console.error("Failed to load policy:",f)})},[t]);const d=l.useCallback(async(f=!1)=>{var g;try{const v=await i.save(f);!f&&n&&((g=v.metadata)!=null&&g.name)&&n(v.metadata.name)}catch(v){console.error("Save failed:",v)}},[i,n]),u=l.useCallback(()=>{const f={resource:i.spec.resource,auditRules:i.spec.auditRules,eventRules:i.spec.eventRules},g=i.spec.resource.kindLabel||ex(i.spec.resource.kind),v=i.spec.resource.kindLabelPlural||tx(g);c.runPreview(f,g,v).catch(x=>{console.error("Preview failed:",x)})},[i.spec,c]),m=i.name.trim()!==""&&i.spec.resource.apiGroup.trim()!==""&&i.spec.resource.kind.trim()!=="";return s.jsxs(ue,{className:`rounded-xl ${a}`,children:[s.jsxs(it,{className:"flex flex-row justify-between items-center p-6 border-b border-border space-y-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[i.isNew?s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx(ie,{htmlFor:"policy-name",className:"text-xs text-muted-foreground",children:"Policy Name"}),s.jsx(he,{id:"policy-name",type:"text",className:"w-[300px] text-base font-medium",value:i.name,onChange:f=>i.setName(f.target.value),placeholder:"e.g., httpproxy-policy"})]}):s.jsx("h2",{className:"m-0 text-2xl font-semibold text-foreground",children:i.name}),i.isDirty&&s.jsx(le,{variant:"warning",children:"Unsaved changes"})]}),s.jsxs("div",{className:"flex gap-3",children:[r&&s.jsx(X,{type:"button",variant:"outline",onClick:r,disabled:i.isSaving,children:"Cancel"}),s.jsx(X,{type:"button",variant:"outline",onClick:()=>d(!0),disabled:!m||i.isSaving,title:"Validate without saving",children:"Validate"}),s.jsx(X,{type:"button",onClick:()=>d(!1),disabled:!m||i.isSaving||!i.isDirty,className:"bg-[#BF9595] text-[#0C1D31] border-[#BF9595] hover:bg-[#A88080] hover:border-[#A88080]",children:i.isSaving?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"w-3.5 h-3.5 border-2 border-border border-t-[#BF9595] rounded-full animate-spin"}),"Saving..."]}):"Save Policy"})]})]}),i.error&&s.jsx(be,{variant:"destructive",className:"mx-6 mt-4",children:s.jsxs(ye,{children:[s.jsx("strong",{children:"Error:"})," ",i.error.message]})}),i.isLoading&&s.jsxs("div",{className:"flex items-center justify-center gap-3 py-12 text-muted-foreground",children:[s.jsx("span",{className:"w-5 h-5 border-[3px] border-border border-t-[#BF9595] rounded-full animate-spin"}),"Loading policy..."]}),!i.isLoading&&s.jsxs(xe,{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 p-6",children:[s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsx(kg,{resource:i.spec.resource,onChange:i.setResource,client:e}),s.jsx(Hg,{auditRules:i.spec.auditRules||[],eventRules:i.spec.eventRules||[],previewResult:c.result,onAuditRulesChange:i.setAuditRules,onEventRulesChange:i.setEventRules,onAddAuditRule:i.addAuditRule,onAddEventRule:i.addEventRule})]}),s.jsx("div",{className:"sticky top-4 self-start",children:s.jsx(Zg,{inputs:c.inputs,selectedIndices:c.selectedIndices,result:c.result,isLoading:c.isLoading,error:c.error,onInputsChange:c.setInputs,onToggleSelection:c.toggleSelection,onSelectAll:c.selectAll,onDeselectAll:c.deselectAll,onRunPreview:u,onResourceClick:o,client:e,policyResource:i.spec.resource,hasSelection:c.hasSelection})})]})]})}function ex(e){return e?e.replace(/([A-Z]+)([A-Z][a-z])/g,"$1 $2").replace(/([a-z])([A-Z])/g,"$1 $2").trim():""}function tx(e){if(!e)return"";const t=e.trim();return t.endsWith("y")?t.slice(0,-1)+"ies":t.endsWith("s")||t.endsWith("x")||t.endsWith("z")||t.endsWith("ch")||t.endsWith("sh")?t+"es":t+"s"}new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString();new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString();class dx{constructor(t){this.config={...t,fetch:t.fetch||globalThis.fetch.bind(globalThis)}}async createQuery(t,n){const r={apiVersion:"activity.miloapis.com/v1alpha1",kind:"AuditLogQuery",metadata:{name:t},spec:n};return(await this.fetch("/apis/activity.miloapis.com/v1alpha1/auditlogqueries",{method:"POST",body:JSON.stringify(r)})).json()}async*executeQueryPaginated(t,n){var c;let r=0,o={...t};const a=(n==null?void 0:n.maxPages)||100,i=(n==null?void 0:n.queryNamePrefix)||"query";for(;r<a;){const d=`${i}-${Date.now()}-${r}`,u=await this.createQuery(d,o);if(yield u,!((c=u.status)!=null&&c.continueAfter))break;o={...o,continueAfter:u.status.continueAfter},r++}}async listActivities(t){const n=new URLSearchParams;t!=null&&t.filter&&n.set("filter",t.filter),t!=null&&t.fieldSelector&&n.set("fieldSelector",t.fieldSelector),t!=null&&t.labelSelector&&n.set("labelSelector",t.labelSelector),t!=null&&t.search&&n.set("search",t.search),t!=null&&t.start&&n.set("start",t.start),t!=null&&t.end&&n.set("end",t.end),t!=null&&t.changeSource&&n.set("changeSource",t.changeSource),t!=null&&t.limit&&n.set("limit",String(t.limit)),t!=null&&t.continue&&n.set("continue",t.continue);const r=n.toString(),o=`/apis/activity.miloapis.com/v1alpha1/activities${r?`?${r}`:""}`;return(await this.fetch(o)).json()}async getActivity(t,n){return(await this.fetch(`/apis/activity.miloapis.com/v1alpha1/namespaces/${t}/activities/${n}`)).json()}async queryFacets(t){const n={apiVersion:"activity.miloapis.com/v1alpha1",kind:"ActivityFacetQuery",spec:t};return(await this.fetch("/apis/activity.miloapis.com/v1alpha1/activityfacetqueries",{method:"POST",body:JSON.stringify(n)})).json()}async*listActivitiesPaginated(t,n){var i;let r={...t};const o=(n==null?void 0:n.maxPages)||100;let a=0;for(;a<o;){const c=await this.listActivities(r);if(yield c,!((i=c.metadata)!=null&&i.continue))break;r={...r,continue:c.metadata.continue},a++}}watchActivities(t,n){const r=new AbortController,o=new URLSearchParams;o.set("watch","true"),t!=null&&t.filter&&o.set("filter",t.filter),t!=null&&t.fieldSelector&&o.set("fieldSelector",t.fieldSelector),t!=null&&t.labelSelector&&o.set("labelSelector",t.labelSelector),t!=null&&t.search&&o.set("search",t.search),t!=null&&t.start&&o.set("start",t.start),t!=null&&t.end&&o.set("end",t.end),t!=null&&t.changeSource&&o.set("changeSource",t.changeSource),n!=null&&n.resourceVersion&&o.set("resourceVersion",n.resourceVersion);const i=`/apis/activity.miloapis.com/v1alpha1/activities?${o.toString()}`,c=`${this.config.baseUrl}${i}`,d={Accept:"application/json"};return this.config.token&&(d.Authorization=`Bearer ${this.config.token}`),(async()=>{var m,f,g,v;try{const x=await this.config.fetch(c,{headers:d,signal:r.signal});if(!x.ok){const y=await x.text();throw new Error(`Watch request failed: ${x.status} ${y}`)}if(!x.body)throw new Error("Response body is not available");const h=x.body.getReader(),p=new TextDecoder;let b="";for(;;){const{done:y,value:w}=await h.read();if(y){(m=n==null?void 0:n.onClose)==null||m.call(n);break}b+=p.decode(w,{stream:!0});const N=b.split(`
`);b=N.pop()||"";for(const S of N)if(S.trim())try{const C=JSON.parse(S);(f=n==null?void 0:n.onEvent)==null||f.call(n,C)}catch(C){console.warn("Failed to parse watch event:",C,S)}}}catch(x){if(x.name==="AbortError"){(g=n==null?void 0:n.onClose)==null||g.call(n);return}(v=n==null?void 0:n.onError)==null||v.call(n,x)}})(),{stop:()=>r.abort()}}async*watchActivitiesGenerator(t,n){const r=new AbortController,o=new URLSearchParams;o.set("watch","true"),t!=null&&t.filter&&o.set("filter",t.filter),t!=null&&t.fieldSelector&&o.set("fieldSelector",t.fieldSelector),t!=null&&t.labelSelector&&o.set("labelSelector",t.labelSelector),t!=null&&t.search&&o.set("search",t.search),t!=null&&t.start&&o.set("start",t.start),t!=null&&t.end&&o.set("end",t.end),t!=null&&t.changeSource&&o.set("changeSource",t.changeSource),n&&o.set("resourceVersion",n);const i=`/apis/activity.miloapis.com/v1alpha1/activities?${o.toString()}`,c=`${this.config.baseUrl}${i}`,d={Accept:"application/json"};this.config.token&&(d.Authorization=`Bearer ${this.config.token}`);try{const u=await this.config.fetch(c,{headers:d,signal:r.signal});if(!u.ok){const v=await u.text();throw new Error(`Watch request failed: ${u.status} ${v}`)}if(!u.body)throw new Error("Response body is not available");const m=u.body.getReader(),f=new TextDecoder;let g="";for(;;){const{done:v,value:x}=await m.read();if(v)break;g+=f.decode(x,{stream:!0});const h=g.split(`
`);g=h.pop()||"";for(const p of h)p.trim()&&(yield JSON.parse(p))}}finally{r.abort()}}async listPolicies(){return(await this.fetch("/apis/activity.miloapis.com/v1alpha1/activitypolicies")).json()}async getPolicy(t){return(await this.fetch(`/apis/activity.miloapis.com/v1alpha1/activitypolicies/${t}`)).json()}async createPolicy(t,n,r){const o={apiVersion:"activity.miloapis.com/v1alpha1",kind:"ActivityPolicy",metadata:{name:t},spec:n},a=new URLSearchParams;r&&a.set("dryRun","All");const i=a.toString(),c=`/apis/activity.miloapis.com/v1alpha1/activitypolicies${i?`?${i}`:""}`;return(await this.fetch(c,{method:"POST",body:JSON.stringify(o)})).json()}async updatePolicy(t,n,r,o){const a={apiVersion:"activity.miloapis.com/v1alpha1",kind:"ActivityPolicy",metadata:{name:t,...o?{resourceVersion:o}:{}},spec:n},i=new URLSearchParams;r&&i.set("dryRun","All");const c=i.toString(),d=`/apis/activity.miloapis.com/v1alpha1/activitypolicies/${t}${c?`?${c}`:""}`;return(await this.fetch(d,{method:"PUT",body:JSON.stringify(a)})).json()}async deletePolicy(t){await this.fetch(`/apis/activity.miloapis.com/v1alpha1/activitypolicies/${t}`,{method:"DELETE"})}async discoverAPIGroups(){return(await this.fetch("/apis")).json()}async discoverAPIResources(t,n){var a,i;let r=n;if(!r)try{const d=(a=(await this.discoverAPIGroups()).groups)==null?void 0:a.find(u=>u.name===t);r=((i=d==null?void 0:d.preferredVersion)==null?void 0:i.version)||"v1"}catch{r="v1"}return(await this.fetch(`/apis/${t}/${r}`)).json()}async queryAuditLogFacets(t){const n={apiVersion:"activity.miloapis.com/v1alpha1",kind:"AuditLogFacetsQuery",spec:t};return(await this.fetch("/apis/activity.miloapis.com/v1alpha1/auditlogfacetsqueries",{method:"POST",body:JSON.stringify(n)})).json()}async getAuditedAPIGroups(){var t,n,r;try{const a=(n=(t=(await this.queryAuditLogFacets({timeRange:{start:"now-30d"},facets:[{field:"objectRef.apiGroup",limit:100}]})).status)==null?void 0:t.facets)==null?void 0:n.find(i=>i.field==="objectRef.apiGroup");return((r=a==null?void 0:a.values)==null?void 0:r.map(i=>i.value).filter(i=>i))||[]}catch{return[]}}async getAuditedResources(t){var n,r,o;try{const i=(r=(n=(await this.queryAuditLogFacets({timeRange:{start:"now-30d"},filter:`objectRef.apiGroup == "${t}"`,facets:[{field:"objectRef.resource",limit:100}]})).status)==null?void 0:n.facets)==null?void 0:r.find(c=>c.field==="objectRef.resource");return((o=i==null?void 0:i.values)==null?void 0:o.map(c=>c.value).filter(c=>c))||[]}catch{return[]}}async createPolicyPreview(t){const n={apiVersion:"activity.miloapis.com/v1alpha1",kind:"PolicyPreview",spec:t};return(await this.fetch("/apis/activity.miloapis.com/v1alpha1/policypreviews",{method:"POST",body:JSON.stringify(n)})).json()}async listEvents(t){const n=new URLSearchParams;t!=null&&t.fieldSelector&&n.set("fieldSelector",t.fieldSelector),t!=null&&t.labelSelector&&n.set("labelSelector",t.labelSelector),t!=null&&t.limit&&n.set("limit",String(t.limit)),t!=null&&t.continue&&n.set("continue",t.continue),t!=null&&t.resourceVersion&&n.set("resourceVersion",t.resourceVersion);const r=n.toString();let o;return t!=null&&t.namespace?o=`/apis/activity.miloapis.com/v1alpha1/namespaces/${t.namespace}/events`:o="/apis/activity.miloapis.com/v1alpha1/events",r&&(o+=`?${r}`),(await this.fetch(o)).json()}async getEvent(t,n){return(await this.fetch(`/apis/activity.miloapis.com/v1alpha1/namespaces/${t}/events/${n}`)).json()}async*listEventsPaginated(t,n){var i;let r={...t};const o=(n==null?void 0:n.maxPages)||100;let a=0;for(;a<o;){const c=await this.listEvents(r);if(yield c,!((i=c.metadata)!=null&&i.continue))break;r={...r,continue:c.metadata.continue},a++}}async queryEventFacets(t){const n={apiVersion:"activity.miloapis.com/v1alpha1",kind:"EventFacetQuery",spec:t};return(await this.fetch("/apis/activity.miloapis.com/v1alpha1/eventfacetqueries",{method:"POST",body:JSON.stringify(n)})).json()}watchEvents(t,n){const r=new AbortController,o=new URLSearchParams;o.set("watch","true"),t!=null&&t.fieldSelector&&o.set("fieldSelector",t.fieldSelector),t!=null&&t.labelSelector&&o.set("labelSelector",t.labelSelector),n!=null&&n.resourceVersion&&o.set("resourceVersion",n.resourceVersion);const a=o.toString();let i;t!=null&&t.namespace?i=`/apis/activity.miloapis.com/v1alpha1/namespaces/${t.namespace}/events`:i="/apis/activity.miloapis.com/v1alpha1/events",i+=`?${a}`;const c=`${this.config.baseUrl}${i}`,d={Accept:"application/json"};return this.config.token&&(d.Authorization=`Bearer ${this.config.token}`),(async()=>{var m,f,g,v;try{const x=await this.config.fetch(c,{headers:d,signal:r.signal});if(!x.ok){const y=await x.text();throw new Error(`Watch request failed: ${x.status} ${y}`)}if(!x.body)throw new Error("Response body is not available");const h=x.body.getReader(),p=new TextDecoder;let b="";for(;;){const{done:y,value:w}=await h.read();if(y){(m=n==null?void 0:n.onClose)==null||m.call(n);break}b+=p.decode(w,{stream:!0});const N=b.split(`
`);b=N.pop()||"";for(const S of N)if(S.trim())try{const C=JSON.parse(S);(f=n==null?void 0:n.onEvent)==null||f.call(n,C)}catch(C){console.warn("Failed to parse watch event:",C,S)}}}catch(x){if(x.name==="AbortError"){(g=n==null?void 0:n.onClose)==null||g.call(n);return}(v=n==null?void 0:n.onError)==null||v.call(n,x)}})(),{stop:()=>r.abort()}}async fetch(t,n){const r=`${this.config.baseUrl}${t}`,o={"Content-Type":"application/json",...(n==null?void 0:n.headers)||{}};this.config.token&&(o.Authorization=`Bearer ${this.config.token}`);const a=await this.config.fetch(r,{...n,headers:o});if(!a.ok){const i=await a.text();throw new Error(`API request failed: ${a.status} ${i}`)}return a}}export{dx as A,X as B,ue as C,_p as D,ix as E,he as I,ie as L,lx as P,ax as R,it as a,Pn as b,Do as c,xe as d,rn as e,cx as f,ox as g,sx as h,Ei as i,Ri as j,Ai as k,Np as u};
