import{b as f,r as a,j as e}from"./index-Cpyx2Kcx.js";import{A as p,g as u}from"./index.esm-BHZ-heAd.js";import{E as g}from"./EventDetailModal-DK6DciOo.js";import{A as v,N as y}from"./NavigationToolbar-CLBTHe8_.js";import"./components-DdpqaNbj.js";function x(){const n=f(),[s,o]=a.useState(null),[l,c]=a.useState(null),r=typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1";a.useEffect(()=>{if(r)o(new p({baseUrl:""}));else{const t=sessionStorage.getItem("apiUrl")||"",i=sessionStorage.getItem("token")||void 0;o(new p({baseUrl:t||"",token:i}))}},[r]);const d=t=>{c(t)},m=t=>{const i=new URLSearchParams;t.uid?i.set("uid",t.uid):(t.apiGroup&&i.set("apiGroup",t.apiGroup),t.kind&&i.set("kind",t.kind),t.namespace&&i.set("namespace",t.namespace),t.name&&i.set("name",t.name)),n(`/resource-history?${i.toString()}`)};return e.jsxs(v,{children:[e.jsx(y,{}),s&&e.jsx(u,{client:s,onActivityClick:d,onResourceClick:m,onCreatePolicy:()=>n("/policies"),initialTimeRange:{start:"now-7d"},pageSize:30,showFilters:!0,infiniteScroll:!0,enableStreaming:!0}),l&&e.jsx(g,{title:"Activity Details",data:l,onClose:()=>c(null)})]})}export{x as default};
